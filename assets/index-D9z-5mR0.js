var pm=h=>{throw TypeError(h)};var uh=(h,t,i)=>t.has(h)||pm("Cannot "+i);var Zt=(h,t,i)=>(uh(h,t,"read from private field"),i?i.call(h):t.get(h)),ki=(h,t,i)=>t.has(h)?pm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,i),qe=(h,t,i,s)=>(uh(h,t,"write to private field"),s?s.call(h,i):t.set(h,i),i),Bi=(h,t,i)=>(uh(h,t,"access private method"),i);var gm=(h,t,i,s)=>({set _(r){qe(h,t,r,i)},get _(){return Zt(h,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();function K0(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var hh={exports:{}},vr={};var mm;function W0(){if(mm)return vr;mm=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:h,type:s,key:l,ref:r!==void 0?r:null,props:o}}return vr.Fragment=t,vr.jsx=i,vr.jsxs=i,vr}var ym;function Q0(){return ym||(ym=1,hh.exports=W0()),hh.exports}var R=Q0(),dh={exports:{}},yt={};var bm;function Z0(){if(bm)return yt;bm=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function A(D){return D===null||typeof D!="object"?null:(D=b&&D[b]||D["@@iterator"],typeof D=="function"?D:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function w(D,q,W){this.props=D,this.context=q,this.refs=T,this.updater=W||E}w.prototype.isReactComponent={},w.prototype.setState=function(D,q){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,q,"setState")},w.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function x(){}x.prototype=w.prototype;function C(D,q,W){this.props=D,this.context=q,this.refs=T,this.updater=W||E}var O=C.prototype=new x;O.constructor=C,S(O,w.prototype),O.isPureReactComponent=!0;var N=Array.isArray;function j(){}var B={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function Y(D,q,W){var tt=W.ref;return{$$typeof:h,type:D,key:q,ref:tt!==void 0?tt:null,props:W}}function Q(D,q){return Y(D.type,q,D.props)}function J(D){return typeof D=="object"&&D!==null&&D.$$typeof===h}function ot(D){var q={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(W){return q[W]})}var ft=/\/+/g;function st(D,q){return typeof D=="object"&&D!==null&&D.key!=null?ot(""+D.key):q.toString(36)}function mt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(j,j):(D.status="pending",D.then(function(q){D.status==="pending"&&(D.status="fulfilled",D.value=q)},function(q){D.status==="pending"&&(D.status="rejected",D.reason=q)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function k(D,q,W,tt,lt){var dt=typeof D;(dt==="undefined"||dt==="boolean")&&(D=null);var rt=!1;if(D===null)rt=!0;else switch(dt){case"bigint":case"string":case"number":rt=!0;break;case"object":switch(D.$$typeof){case h:case t:rt=!0;break;case g:return rt=D._init,k(rt(D._payload),q,W,tt,lt)}}if(rt)return lt=lt(D),rt=tt===""?"."+st(D,0):tt,N(lt)?(W="",rt!=null&&(W=rt.replace(ft,"$&/")+"/"),k(lt,q,W,"",function(Ne){return Ne})):lt!=null&&(J(lt)&&(lt=Q(lt,W+(lt.key==null||D&&D.key===lt.key?"":(""+lt.key).replace(ft,"$&/")+"/")+rt)),q.push(lt)),1;rt=0;var Gt=tt===""?".":tt+":";if(N(D))for(var Ot=0;Ot<D.length;Ot++)tt=D[Ot],dt=Gt+st(tt,Ot),rt+=k(tt,q,W,dt,lt);else if(Ot=A(D),typeof Ot=="function")for(D=Ot.call(D),Ot=0;!(tt=D.next()).done;)tt=tt.value,dt=Gt+st(tt,Ot++),rt+=k(tt,q,W,dt,lt);else if(dt==="object"){if(typeof D.then=="function")return k(mt(D),q,W,tt,lt);throw q=String(D),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return rt}function G(D,q,W){if(D==null)return D;var tt=[],lt=0;return k(D,tt,"","",function(dt){return q.call(W,dt,lt++)}),tt}function Z(D){if(D._status===-1){var q=D._result;q=q(),q.then(function(W){(D._status===0||D._status===-1)&&(D._status=1,D._result=W)},function(W){(D._status===0||D._status===-1)&&(D._status=2,D._result=W)}),D._status===-1&&(D._status=0,D._result=q)}if(D._status===1)return D._result.default;throw D._result}var ht=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},At={map:G,forEach:function(D,q,W){G(D,function(){q.apply(this,arguments)},W)},count:function(D){var q=0;return G(D,function(){q++}),q},toArray:function(D){return G(D,function(q){return q})||[]},only:function(D){if(!J(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return yt.Activity=y,yt.Children=At,yt.Component=w,yt.Fragment=i,yt.Profiler=r,yt.PureComponent=C,yt.StrictMode=s,yt.Suspense=d,yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,yt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return B.H.useMemoCache(D)}},yt.cache=function(D){return function(){return D.apply(null,arguments)}},yt.cacheSignal=function(){return null},yt.cloneElement=function(D,q,W){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var tt=S({},D.props),lt=D.key;if(q!=null)for(dt in q.key!==void 0&&(lt=""+q.key),q)!V.call(q,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&q.ref===void 0||(tt[dt]=q[dt]);var dt=arguments.length-2;if(dt===1)tt.children=W;else if(1<dt){for(var rt=Array(dt),Gt=0;Gt<dt;Gt++)rt[Gt]=arguments[Gt+2];tt.children=rt}return Y(D.type,lt,tt)},yt.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},yt.createElement=function(D,q,W){var tt,lt={},dt=null;if(q!=null)for(tt in q.key!==void 0&&(dt=""+q.key),q)V.call(q,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(lt[tt]=q[tt]);var rt=arguments.length-2;if(rt===1)lt.children=W;else if(1<rt){for(var Gt=Array(rt),Ot=0;Ot<rt;Ot++)Gt[Ot]=arguments[Ot+2];lt.children=Gt}if(D&&D.defaultProps)for(tt in rt=D.defaultProps,rt)lt[tt]===void 0&&(lt[tt]=rt[tt]);return Y(D,dt,lt)},yt.createRef=function(){return{current:null}},yt.forwardRef=function(D){return{$$typeof:u,render:D}},yt.isValidElement=J,yt.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:Z}},yt.memo=function(D,q){return{$$typeof:p,type:D,compare:q===void 0?null:q}},yt.startTransition=function(D){var q=B.T,W={};B.T=W;try{var tt=D(),lt=B.S;lt!==null&&lt(W,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(j,ht)}catch(dt){ht(dt)}finally{q!==null&&W.types!==null&&(q.types=W.types),B.T=q}},yt.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},yt.use=function(D){return B.H.use(D)},yt.useActionState=function(D,q,W){return B.H.useActionState(D,q,W)},yt.useCallback=function(D,q){return B.H.useCallback(D,q)},yt.useContext=function(D){return B.H.useContext(D)},yt.useDebugValue=function(){},yt.useDeferredValue=function(D,q){return B.H.useDeferredValue(D,q)},yt.useEffect=function(D,q){return B.H.useEffect(D,q)},yt.useEffectEvent=function(D){return B.H.useEffectEvent(D)},yt.useId=function(){return B.H.useId()},yt.useImperativeHandle=function(D,q,W){return B.H.useImperativeHandle(D,q,W)},yt.useInsertionEffect=function(D,q){return B.H.useInsertionEffect(D,q)},yt.useLayoutEffect=function(D,q){return B.H.useLayoutEffect(D,q)},yt.useMemo=function(D,q){return B.H.useMemo(D,q)},yt.useOptimistic=function(D,q){return B.H.useOptimistic(D,q)},yt.useReducer=function(D,q,W){return B.H.useReducer(D,q,W)},yt.useRef=function(D){return B.H.useRef(D)},yt.useState=function(D){return B.H.useState(D)},yt.useSyncExternalStore=function(D,q,W){return B.H.useSyncExternalStore(D,q,W)},yt.useTransition=function(){return B.H.useTransition()},yt.version="19.2.3",yt}var vm;function Gh(){return vm||(vm=1,dh.exports=Z0()),dh.exports}var P=Gh(),fh={exports:{}},Ar={},ph={exports:{}},gh={};var Am;function J0(){return Am||(Am=1,(function(h){function t(k,G){var Z=k.length;k.push(G);t:for(;0<Z;){var ht=Z-1>>>1,At=k[ht];if(0<r(At,G))k[ht]=G,k[Z]=At,Z=ht;else break t}}function i(k){return k.length===0?null:k[0]}function s(k){if(k.length===0)return null;var G=k[0],Z=k.pop();if(Z!==G){k[0]=Z;t:for(var ht=0,At=k.length,D=At>>>1;ht<D;){var q=2*(ht+1)-1,W=k[q],tt=q+1,lt=k[tt];if(0>r(W,Z))tt<At&&0>r(lt,W)?(k[ht]=lt,k[tt]=Z,ht=tt):(k[ht]=W,k[q]=Z,ht=q);else if(tt<At&&0>r(lt,Z))k[ht]=lt,k[tt]=Z,ht=tt;else break t}}return G}function r(k,G){var Z=k.sortIndex-G.sortIndex;return Z!==0?Z:k.id-G.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;h.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();h.unstable_now=function(){return l.now()-u}}var d=[],p=[],g=1,y=null,b=3,A=!1,E=!1,S=!1,T=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function O(k){for(var G=i(p);G!==null;){if(G.callback===null)s(p);else if(G.startTime<=k)s(p),G.sortIndex=G.expirationTime,t(d,G);else break;G=i(p)}}function N(k){if(S=!1,O(k),!E)if(i(d)!==null)E=!0,j||(j=!0,ot());else{var G=i(p);G!==null&&mt(N,G.startTime-k)}}var j=!1,B=-1,V=5,Y=-1;function Q(){return T?!0:!(h.unstable_now()-Y<V)}function J(){if(T=!1,j){var k=h.unstable_now();Y=k;var G=!0;try{t:{E=!1,S&&(S=!1,x(B),B=-1),A=!0;var Z=b;try{e:{for(O(k),y=i(d);y!==null&&!(y.expirationTime>k&&Q());){var ht=y.callback;if(typeof ht=="function"){y.callback=null,b=y.priorityLevel;var At=ht(y.expirationTime<=k);if(k=h.unstable_now(),typeof At=="function"){y.callback=At,O(k),G=!0;break e}y===i(d)&&s(d),O(k)}else s(d);y=i(d)}if(y!==null)G=!0;else{var D=i(p);D!==null&&mt(N,D.startTime-k),G=!1}}break t}finally{y=null,b=Z,A=!1}G=void 0}}finally{G?ot():j=!1}}}var ot;if(typeof C=="function")ot=function(){C(J)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,st=ft.port2;ft.port1.onmessage=J,ot=function(){st.postMessage(null)}}else ot=function(){w(J,0)};function mt(k,G){B=w(function(){k(h.unstable_now())},G)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(k){k.callback=null},h.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<k?Math.floor(1e3/k):5},h.unstable_getCurrentPriorityLevel=function(){return b},h.unstable_next=function(k){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var Z=b;b=G;try{return k()}finally{b=Z}},h.unstable_requestPaint=function(){T=!0},h.unstable_runWithPriority=function(k,G){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Z=b;b=k;try{return G()}finally{b=Z}},h.unstable_scheduleCallback=function(k,G,Z){var ht=h.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ht+Z:ht):Z=ht,k){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=Z+At,k={id:g++,callback:G,priorityLevel:k,startTime:Z,expirationTime:At,sortIndex:-1},Z>ht?(k.sortIndex=Z,t(p,k),i(d)===null&&k===i(p)&&(S?(x(B),B=-1):S=!0,mt(N,Z-ht))):(k.sortIndex=At,t(d,k),E||A||(E=!0,j||(j=!0,ot()))),k},h.unstable_shouldYield=Q,h.unstable_wrapCallback=function(k){var G=b;return function(){var Z=b;b=G;try{return k.apply(this,arguments)}finally{b=Z}}}})(gh)),gh}var Sm;function tA(){return Sm||(Sm=1,ph.exports=J0()),ph.exports}var mh={exports:{}},De={};var Em;function eA(){if(Em)return De;Em=1;var h=Gh();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:d,containerInfo:p,implementation:g}}var l=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return De.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,De.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(d,p,null,g)},De.flushSync=function(d){var p=l.T,g=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=p,s.p=g,s.d.f()}},De.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(d,p))},De.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},De.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},De.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=u(p.as,p.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(d)},De.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},De.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=u(p.as,p.crossOrigin);s.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(d)},De.requestFormReset=function(d){s.d.r(d)},De.unstable_batchedUpdates=function(d,p){return d(p)},De.useFormState=function(d,p,g){return l.H.useFormState(d,p,g)},De.useFormStatus=function(){return l.H.useHostTransitionStatus()},De.version="19.2.3",De}var wm;function iA(){if(wm)return mh.exports;wm=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),mh.exports=eA(),mh.exports}var _m;function nA(){if(_m)return Ar;_m=1;var h=tA(),t=Gh(),i=iA();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function l(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function u(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function d(e){if(o(e)!==e)throw Error(s(188))}function p(e){var n=e.alternate;if(!n){if(n=o(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,c=n;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return d(f),e;if(m===c)return d(f),n;m=m.sibling}throw Error(s(188))}if(a.return!==c.return)a=f,c=m;else{for(var v=!1,_=f.child;_;){if(_===a){v=!0,a=f,c=m;break}if(_===c){v=!0,c=f,a=m;break}_=_.sibling}if(!v){for(_=m.child;_;){if(_===a){v=!0,a=m,c=f;break}if(_===c){v=!0,c=m,a=f;break}_=_.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function g(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=g(e),n!==null)return n;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function ot(e){return e===null||typeof e!="object"?null:(e=J&&e[J]||e["@@iterator"],typeof e=="function"?e:null)}var ft=Symbol.for("react.client.reference");function st(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ft?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case w:return"Profiler";case T:return"StrictMode";case N:return"Suspense";case j:return"SuspenseList";case Y:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case C:return e.displayName||"Context";case x:return(e._context.displayName||"Context")+".Consumer";case O:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B:return n=e.displayName||null,n!==null?n:st(e.type)||"Memo";case V:n=e._payload,e=e._init;try{return st(e(n))}catch{}}return null}var mt=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ht=[],At=-1;function D(e){return{current:e}}function q(e){0>At||(e.current=ht[At],ht[At]=null,At--)}function W(e,n){At++,ht[At]=e.current,e.current=n}var tt=D(null),lt=D(null),dt=D(null),rt=D(null);function Gt(e,n){switch(W(dt,n),W(lt,e),W(tt,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?zg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=zg(n),e=jg(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}q(tt),W(tt,e)}function Ot(){q(tt),q(lt),q(dt)}function Ne(e){e.memoizedState!==null&&W(rt,e);var n=tt.current,a=jg(n,e.type);n!==a&&(W(lt,e),W(tt,a))}function Pt(e){lt.current===e&&(q(tt),q(lt)),rt.current===e&&(q(rt),gr._currentValue=Z)}var $e,Vt;function Lt(e){if($e===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);$e=n&&n[1]||"",Vt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$e+e+Vt}var $t=!1;function ye(e,n){if(!e||$t)return"";$t=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(I){var H=I}Reflect.construct(e,[],K)}else{try{K.call()}catch(I){H=I}e.call(K.prototype)}}else{try{throw Error()}catch(I){H=I}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(I){if(I&&H&&typeof I.stack=="string")return[I.stack,H.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],_=m[1];if(v&&_){var M=v.split(`
`),U=_.split(`
`);for(f=c=0;c<M.length&&!M[c].includes("DetermineComponentFrameRoot");)c++;for(;f<U.length&&!U[f].includes("DetermineComponentFrameRoot");)f++;if(c===M.length||f===U.length)for(c=M.length-1,f=U.length-1;1<=c&&0<=f&&M[c]!==U[f];)f--;for(;1<=c&&0<=f;c--,f--)if(M[c]!==U[f]){if(c!==1||f!==1)do if(c--,f--,0>f||M[c]!==U[f]){var X=`
`+M[c].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=c&&0<=f);break}}}finally{$t=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Lt(a):""}function ue(e,n){switch(e.tag){case 26:case 27:case 5:return Lt(e.type);case 16:return Lt("Lazy");case 13:return e.child!==n&&n!==null?Lt("Suspense Fallback"):Lt("Suspense");case 19:return Lt("SuspenseList");case 0:case 15:return ye(e.type,!1);case 11:return ye(e.type.render,!1);case 1:return ye(e.type,!0);case 31:return Lt("Activity");default:return""}}function Qr(e){try{var n="",a=null;do n+=ue(e,a),a=e,e=e.return;while(e);return n}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var _a=Object.prototype.hasOwnProperty,Vn=h.unstable_scheduleCallback,Ta=h.unstable_cancelCallback,Ss=h.unstable_shouldYield,Wl=h.unstable_requestPaint,ke=h.unstable_now,Ql=h.unstable_getCurrentPriorityLevel,Zr=h.unstable_ImmediatePriority,Jr=h.unstable_UserBlockingPriority,Ke=h.unstable_NormalPriority,pn=h.unstable_LowPriority,wi=h.unstable_IdlePriority,xa=h.log,Ob=h.unstable_setDisableYieldValue,Ca=null,We=null;function gn(e){if(typeof xa=="function"&&Ob(e),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(Ca,e)}catch{}}var Qe=Math.clz32?Math.clz32:Bb,Nb=Math.log,kb=Math.LN2;function Bb(e){return e>>>=0,e===0?32:31-(Nb(e)/kb|0)|0}var to=256,eo=262144,io=4194304;function qn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function no(e,n,a){var c=e.pendingLanes;if(c===0)return 0;var f=0,m=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var _=c&134217727;return _!==0?(c=_&~m,c!==0?f=qn(c):(v&=_,v!==0?f=qn(v):a||(a=_&~e,a!==0&&(f=qn(a))))):(_=c&~m,_!==0?f=qn(_):v!==0?f=qn(v):a||(a=c&~e,a!==0&&(f=qn(a)))),f===0?0:n!==0&&n!==f&&(n&m)===0&&(m=f&-f,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:f}function Ra(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Pb(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yd(){var e=io;return io<<=1,(io&62914560)===0&&(io=4194304),e}function Zl(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Ma(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function zb(e,n,a,c,f,m){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var _=e.entanglements,M=e.expirationTimes,U=e.hiddenUpdates;for(a=v&~a;0<a;){var X=31-Qe(a),K=1<<X;_[X]=0,M[X]=-1;var H=U[X];if(H!==null)for(U[X]=null,X=0;X<H.length;X++){var I=H[X];I!==null&&(I.lane&=-536870913)}a&=~K}c!==0&&bd(e,c,0),m!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=m&~(v&~n))}function bd(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var c=31-Qe(n);e.entangledLanes|=n,e.entanglements[c]=e.entanglements[c]|1073741824|a&261930}function vd(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var c=31-Qe(a),f=1<<c;f&n|e[c]&n&&(e[c]|=n),a&=~f}}function Ad(e,n){var a=n&-n;return a=(a&42)!==0?1:Jl(a),(a&(e.suspendedLanes|n))!==0?0:a}function Jl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function tc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Sd(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:om(e.type))}function Ed(e,n){var a=G.p;try{return G.p=e,n()}finally{G.p=a}}var mn=Math.random().toString(36).slice(2),we="__reactFiber$"+mn,je="__reactProps$"+mn,Es="__reactContainer$"+mn,ec="__reactEvents$"+mn,jb="__reactListeners$"+mn,Fb="__reactHandles$"+mn,wd="__reactResources$"+mn,Da="__reactMarker$"+mn;function ic(e){delete e[we],delete e[je],delete e[ec],delete e[jb],delete e[Fb]}function ws(e){var n=e[we];if(n)return n;for(var a=e.parentNode;a;){if(n=a[Es]||a[we]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=qg(e);e!==null;){if(a=e[we])return a;e=qg(e)}return n}e=a,a=e.parentNode}return null}function _s(e){if(e=e[we]||e[Es]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function La(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function Ts(e){var n=e[wd];return n||(n=e[wd]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function be(e){e[Da]=!0}var _d=new Set,Td={};function Xn(e,n){xs(e,n),xs(e+"Capture",n)}function xs(e,n){for(Td[e]=n,e=0;e<n.length;e++)_d.add(n[e])}var Ub=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xd={},Cd={};function Hb(e){return _a.call(Cd,e)?!0:_a.call(xd,e)?!1:Ub.test(e)?Cd[e]=!0:(xd[e]=!0,!1)}function so(e,n,a){if(Hb(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function ao(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Ii(e,n,a,c){if(c===null)e.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+c)}}function ci(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Rd(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ib(e,n,a){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(e,n,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function nc(e){if(!e._valueTracker){var n=Rd(e)?"checked":"value";e._valueTracker=Ib(e,n,""+e[n])}}function Md(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),c="";return e&&(c=Rd(e)?e.checked?"true":"false":e.value),e=c,e!==a?(n.setValue(e),!0):!1}function ro(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Gb=/[\n"\\]/g;function ui(e){return e.replace(Gb,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function sc(e,n,a,c,f,m,v,_){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+ci(n)):e.value!==""+ci(n)&&(e.value=""+ci(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?ac(e,v,ci(n)):a!=null?ac(e,v,ci(a)):c!=null&&e.removeAttribute("value"),f==null&&m!=null&&(e.defaultChecked=!!m),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+ci(_):e.removeAttribute("name")}function Dd(e,n,a,c,f,m,v,_){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){nc(e);return}a=a!=null?""+ci(a):"",n=n!=null?""+ci(n):a,_||n===e.value||(e.value=n),e.defaultValue=n}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=_?e.checked:!!c,e.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),nc(e)}function ac(e,n,a){n==="number"&&ro(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Cs(e,n,a,c){if(e=e.options,n){n={};for(var f=0;f<a.length;f++)n["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=n.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&c&&(e[a].defaultSelected=!0)}else{for(a=""+ci(a),n=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,c&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function Ld(e,n,a){if(n!=null&&(n=""+ci(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+ci(a):""}function Od(e,n,a,c){if(n==null){if(c!=null){if(a!=null)throw Error(s(92));if(mt(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),n=a}a=ci(n),e.defaultValue=a,c=e.textContent,c===a&&c!==""&&c!==null&&(e.value=c),nc(e)}function Rs(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Vb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nd(e,n,a){var c=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":c?e.setProperty(n,a):typeof a!="number"||a===0||Vb.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function kd(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var f in n)c=n[f],n.hasOwnProperty(f)&&a[f]!==c&&Nd(e,f,c)}else for(var m in n)n.hasOwnProperty(m)&&Nd(e,m,n[m])}function rc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oo(e){return Xb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Gi(){}var oc=null;function lc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ms=null,Ds=null;function Bd(e){var n=_s(e);if(n&&(e=n.stateNode)){var a=e[je]||null;t:switch(e=n.stateNode,n.type){case"input":if(sc(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ui(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var c=a[n];if(c!==e&&c.form===e.form){var f=c[je]||null;if(!f)throw Error(s(90));sc(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<a.length;n++)c=a[n],c.form===e.form&&Md(c)}break t;case"textarea":Ld(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Cs(e,!!a.multiple,n,!1)}}}var cc=!1;function Pd(e,n,a){if(cc)return e(n,a);cc=!0;try{var c=e(n);return c}finally{if(cc=!1,(Ms!==null||Ds!==null)&&(Ko(),Ms&&(n=Ms,e=Ds,Ds=Ms=null,Bd(n),e)))for(n=0;n<e.length;n++)Bd(e[n])}}function Oa(e,n){var a=e.stateNode;if(a===null)return null;var c=a[je]||null;if(c===null)return null;a=c[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uc=!1;if(Vi)try{var Na={};Object.defineProperty(Na,"passive",{get:function(){uc=!0}}),window.addEventListener("test",Na,Na),window.removeEventListener("test",Na,Na)}catch{uc=!1}var yn=null,hc=null,lo=null;function zd(){if(lo)return lo;var e,n=hc,a=n.length,c,f="value"in yn?yn.value:yn.textContent,m=f.length;for(e=0;e<a&&n[e]===f[e];e++);var v=a-e;for(c=1;c<=v&&n[a-c]===f[m-c];c++);return lo=f.slice(e,1<c?1-c:void 0)}function co(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function uo(){return!0}function jd(){return!1}function Fe(e){function n(a,c,f,m,v){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(a=e[_],this[_]=a?a(m):m[_]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?uo:jd,this.isPropagationStopped=jd,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=uo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=uo)},persist:function(){},isPersistent:uo}),n}var Yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ho=Fe(Yn),ka=y({},Yn,{view:0,detail:0}),Yb=Fe(ka),dc,fc,Ba,fo=y({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ba&&(Ba&&e.type==="mousemove"?(dc=e.screenX-Ba.screenX,fc=e.screenY-Ba.screenY):fc=dc=0,Ba=e),dc)},movementY:function(e){return"movementY"in e?e.movementY:fc}}),Fd=Fe(fo),$b=y({},fo,{dataTransfer:0}),Kb=Fe($b),Wb=y({},ka,{relatedTarget:0}),pc=Fe(Wb),Qb=y({},Yn,{animationName:0,elapsedTime:0,pseudoElement:0}),Zb=Fe(Qb),Jb=y({},Yn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tv=Fe(Jb),ev=y({},Yn,{data:0}),Ud=Fe(ev),iv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function av(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=sv[e])?!!n[e]:!1}function gc(){return av}var rv=y({},ka,{key:function(e){if(e.key){var n=iv[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=co(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gc,charCode:function(e){return e.type==="keypress"?co(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?co(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ov=Fe(rv),lv=y({},fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hd=Fe(lv),cv=y({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gc}),uv=Fe(cv),hv=y({},Yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),dv=Fe(hv),fv=y({},fo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pv=Fe(fv),gv=y({},Yn,{newState:0,oldState:0}),mv=Fe(gv),yv=[9,13,27,32],mc=Vi&&"CompositionEvent"in window,Pa=null;Vi&&"documentMode"in document&&(Pa=document.documentMode);var bv=Vi&&"TextEvent"in window&&!Pa,Id=Vi&&(!mc||Pa&&8<Pa&&11>=Pa),Gd=" ",Vd=!1;function qd(e,n){switch(e){case"keyup":return yv.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ls=!1;function vv(e,n){switch(e){case"compositionend":return Xd(n);case"keypress":return n.which!==32?null:(Vd=!0,Gd);case"textInput":return e=n.data,e===Gd&&Vd?null:e;default:return null}}function Av(e,n){if(Ls)return e==="compositionend"||!mc&&qd(e,n)?(e=zd(),lo=hc=yn=null,Ls=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Id&&n.locale!=="ko"?null:n.data;default:return null}}var Sv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Sv[e.type]:n==="textarea"}function $d(e,n,a,c){Ms?Ds?Ds.push(c):Ds=[c]:Ms=c,n=il(n,"onChange"),0<n.length&&(a=new ho("onChange","change",null,a,c),e.push({event:a,listeners:n}))}var za=null,ja=null;function Ev(e){Lg(e,0)}function po(e){var n=La(e);if(Md(n))return e}function Kd(e,n){if(e==="change")return n}var Wd=!1;if(Vi){var yc;if(Vi){var bc="oninput"in document;if(!bc){var Qd=document.createElement("div");Qd.setAttribute("oninput","return;"),bc=typeof Qd.oninput=="function"}yc=bc}else yc=!1;Wd=yc&&(!document.documentMode||9<document.documentMode)}function Zd(){za&&(za.detachEvent("onpropertychange",Jd),ja=za=null)}function Jd(e){if(e.propertyName==="value"&&po(ja)){var n=[];$d(n,ja,e,lc(e)),Pd(Ev,n)}}function wv(e,n,a){e==="focusin"?(Zd(),za=n,ja=a,za.attachEvent("onpropertychange",Jd)):e==="focusout"&&Zd()}function _v(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return po(ja)}function Tv(e,n){if(e==="click")return po(n)}function xv(e,n){if(e==="input"||e==="change")return po(n)}function Cv(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Ze=typeof Object.is=="function"?Object.is:Cv;function Fa(e,n){if(Ze(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),c=Object.keys(n);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!_a.call(n,f)||!Ze(e[f],n[f]))return!1}return!0}function tf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ef(e,n){var a=tf(e);e=0;for(var c;a;){if(a.nodeType===3){if(c=e+a.textContent.length,e<=n&&c>=n)return{node:a,offset:n-e};e=c}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=tf(a)}}function nf(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?nf(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function sf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ro(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=ro(e.document)}return n}function vc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Rv=Vi&&"documentMode"in document&&11>=document.documentMode,Os=null,Ac=null,Ua=null,Sc=!1;function af(e,n,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sc||Os==null||Os!==ro(c)||(c=Os,"selectionStart"in c&&vc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ua&&Fa(Ua,c)||(Ua=c,c=il(Ac,"onSelect"),0<c.length&&(n=new ho("onSelect","select",null,n,a),e.push({event:n,listeners:c}),n.target=Os)))}function $n(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Ns={animationend:$n("Animation","AnimationEnd"),animationiteration:$n("Animation","AnimationIteration"),animationstart:$n("Animation","AnimationStart"),transitionrun:$n("Transition","TransitionRun"),transitionstart:$n("Transition","TransitionStart"),transitioncancel:$n("Transition","TransitionCancel"),transitionend:$n("Transition","TransitionEnd")},Ec={},rf={};Vi&&(rf=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function Kn(e){if(Ec[e])return Ec[e];if(!Ns[e])return e;var n=Ns[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in rf)return Ec[e]=n[a];return e}var of=Kn("animationend"),lf=Kn("animationiteration"),cf=Kn("animationstart"),Mv=Kn("transitionrun"),Dv=Kn("transitionstart"),Lv=Kn("transitioncancel"),uf=Kn("transitionend"),hf=new Map,wc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wc.push("scrollEnd");function _i(e,n){hf.set(e,n),Xn(n,[e])}var go=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},hi=[],ks=0,_c=0;function mo(){for(var e=ks,n=_c=ks=0;n<e;){var a=hi[n];hi[n++]=null;var c=hi[n];hi[n++]=null;var f=hi[n];hi[n++]=null;var m=hi[n];if(hi[n++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}m!==0&&df(a,f,m)}}function yo(e,n,a,c){hi[ks++]=e,hi[ks++]=n,hi[ks++]=a,hi[ks++]=c,_c|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Tc(e,n,a,c){return yo(e,n,a,c),bo(e)}function Wn(e,n){return yo(e,null,null,n),bo(e)}function df(e,n,a){e.lanes|=a;var c=e.alternate;c!==null&&(c.lanes|=a);for(var f=!1,m=e.return;m!==null;)m.childLanes|=a,c=m.alternate,c!==null&&(c.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(f=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,f&&n!==null&&(f=31-Qe(a),e=m.hiddenUpdates,c=e[f],c===null?e[f]=[n]:c.push(n),n.lane=a|536870912),m):null}function bo(e){if(50<lr)throw lr=0,ku=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Bs={};function Ov(e,n,a,c){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(e,n,a,c){return new Ov(e,n,a,c)}function xc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qi(e,n){var a=e.alternate;return a===null?(a=Je(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ff(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function vo(e,n,a,c,f,m){var v=0;if(c=e,typeof e=="function")xc(e)&&(v=1);else if(typeof e=="string")v=z0(e,a,tt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Y:return e=Je(31,a,n,f),e.elementType=Y,e.lanes=m,e;case S:return Qn(a.children,f,m,n);case T:v=8,f|=24;break;case w:return e=Je(12,a,n,f|2),e.elementType=w,e.lanes=m,e;case N:return e=Je(13,a,n,f),e.elementType=N,e.lanes=m,e;case j:return e=Je(19,a,n,f),e.elementType=j,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:v=10;break t;case x:v=9;break t;case O:v=11;break t;case B:v=14;break t;case V:v=16,c=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),c=null}return n=Je(v,a,n,f),n.elementType=e,n.type=c,n.lanes=m,n}function Qn(e,n,a,c){return e=Je(7,e,c,n),e.lanes=a,e}function Cc(e,n,a){return e=Je(6,e,null,n),e.lanes=a,e}function pf(e){var n=Je(18,null,null,0);return n.stateNode=e,n}function Rc(e,n,a){return n=Je(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var gf=new WeakMap;function di(e,n){if(typeof e=="object"&&e!==null){var a=gf.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Qr(n)},gf.set(e,n),n)}return{value:e,source:n,stack:Qr(n)}}var Ps=[],zs=0,Ao=null,Ha=0,fi=[],pi=0,bn=null,Di=1,Li="";function Xi(e,n){Ps[zs++]=Ha,Ps[zs++]=Ao,Ao=e,Ha=n}function mf(e,n,a){fi[pi++]=Di,fi[pi++]=Li,fi[pi++]=bn,bn=e;var c=Di;e=Li;var f=32-Qe(c)-1;c&=~(1<<f),a+=1;var m=32-Qe(n)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Di=1<<32-Qe(n)+f|a<<f|c,Li=m+e}else Di=1<<m|a<<f|c,Li=e}function Mc(e){e.return!==null&&(Xi(e,1),mf(e,1,0))}function Dc(e){for(;e===Ao;)Ao=Ps[--zs],Ps[zs]=null,Ha=Ps[--zs],Ps[zs]=null;for(;e===bn;)bn=fi[--pi],fi[pi]=null,Li=fi[--pi],fi[pi]=null,Di=fi[--pi],fi[pi]=null}function yf(e,n){fi[pi++]=Di,fi[pi++]=Li,fi[pi++]=bn,Di=n.id,Li=n.overflow,bn=e}var _e=null,Kt=null,Mt=!1,vn=null,gi=!1,Lc=Error(s(519));function An(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ia(di(n,e)),Lc}function bf(e){var n=e.stateNode,a=e.type,c=e.memoizedProps;switch(n[we]=e,n[je]=c,a){case"dialog":Tt("cancel",n),Tt("close",n);break;case"iframe":case"object":case"embed":Tt("load",n);break;case"video":case"audio":for(a=0;a<ur.length;a++)Tt(ur[a],n);break;case"source":Tt("error",n);break;case"img":case"image":case"link":Tt("error",n),Tt("load",n);break;case"details":Tt("toggle",n);break;case"input":Tt("invalid",n),Dd(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Tt("invalid",n);break;case"textarea":Tt("invalid",n),Od(n,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||c.suppressHydrationWarning===!0||Bg(n.textContent,a)?(c.popover!=null&&(Tt("beforetoggle",n),Tt("toggle",n)),c.onScroll!=null&&Tt("scroll",n),c.onScrollEnd!=null&&Tt("scrollend",n),c.onClick!=null&&(n.onclick=Gi),n=!0):n=!1,n||An(e,!0)}function vf(e){for(_e=e.return;_e;)switch(_e.tag){case 5:case 31:case 13:gi=!1;return;case 27:case 3:gi=!0;return;default:_e=_e.return}}function js(e){if(e!==_e)return!1;if(!Mt)return vf(e),Mt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Ku(e.type,e.memoizedProps)),a=!a),a&&Kt&&An(e),vf(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Kt=Vg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Kt=Vg(e)}else n===27?(n=Kt,kn(e.type)?(e=th,th=null,Kt=e):Kt=n):Kt=_e?yi(e.stateNode.nextSibling):null;return!0}function Zn(){Kt=_e=null,Mt=!1}function Oc(){var e=vn;return e!==null&&(Ge===null?Ge=e:Ge.push.apply(Ge,e),vn=null),e}function Ia(e){vn===null?vn=[e]:vn.push(e)}var Nc=D(null),Jn=null,Yi=null;function Sn(e,n,a){W(Nc,n._currentValue),n._currentValue=a}function $i(e){e._currentValue=Nc.current,q(Nc)}function kc(e,n,a){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===a)break;e=e.return}}function Bc(e,n,a,c){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;t:for(;m!==null;){var _=m;m=f;for(var M=0;M<n.length;M++)if(_.context===n[M]){m.lanes|=a,_=m.alternate,_!==null&&(_.lanes|=a),kc(m.return,a,e),c||(v=null);break t}m=_.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),kc(v,a,e),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===e){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Fs(e,n,a,c){e=null;for(var f=n,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var _=f.type;Ze(f.pendingProps.value,v.value)||(e!==null?e.push(_):e=[_])}}else if(f===rt.current){if(v=f.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(gr):e=[gr])}f=f.return}e!==null&&Bc(n,e,a,c),n.flags|=262144}function So(e){for(e=e.firstContext;e!==null;){if(!Ze(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ts(e){Jn=e,Yi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Te(e){return Af(Jn,e)}function Eo(e,n){return Jn===null&&ts(e),Af(e,n)}function Af(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Yi===null){if(e===null)throw Error(s(308));Yi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Yi=Yi.next=n;return a}var Nv=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,c){e.push(c)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},kv=h.unstable_scheduleCallback,Bv=h.unstable_NormalPriority,he={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pc(){return{controller:new Nv,data:new Map,refCount:0}}function Ga(e){e.refCount--,e.refCount===0&&kv(Bv,function(){e.controller.abort()})}var Va=null,zc=0,Us=0,Hs=null;function Pv(e,n){if(Va===null){var a=Va=[];zc=0,Us=Uu(),Hs={status:"pending",value:void 0,then:function(c){a.push(c)}}}return zc++,n.then(Sf,Sf),n}function Sf(){if(--zc===0&&Va!==null){Hs!==null&&(Hs.status="fulfilled");var e=Va;Va=null,Us=0,Hs=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function zv(e,n){var a=[],c={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){c.status="fulfilled",c.value=n;for(var f=0;f<a.length;f++)(0,a[f])(n)},function(f){for(c.status="rejected",c.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),c}var Ef=k.S;k.S=function(e,n){ag=ke(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Pv(e,n),Ef!==null&&Ef(e,n)};var es=D(null);function jc(){var e=es.current;return e!==null?e:qt.pooledCache}function wo(e,n){n===null?W(es,es.current):W(es,n.pool)}function wf(){var e=jc();return e===null?null:{parent:he._currentValue,pool:e}}var Is=Error(s(460)),Fc=Error(s(474)),_o=Error(s(542)),To={then:function(){}};function _f(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Tf(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Gi,Gi),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Cf(e),e;default:if(typeof n.status=="string")n.then(Gi,Gi);else{if(e=qt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(c){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=c}},function(c){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Cf(e),e}throw ns=n,Is}}function is(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ns=a,Is):a}}var ns=null;function xf(){if(ns===null)throw Error(s(459));var e=ns;return ns=null,e}function Cf(e){if(e===Is||e===_o)throw Error(s(483))}var Gs=null,qa=0;function xo(e){var n=qa;return qa+=1,Gs===null&&(Gs=[]),Tf(Gs,e,n)}function Xa(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Co(e,n){throw n.$$typeof===b?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Rf(e){function n(z,L){if(e){var F=z.deletions;F===null?(z.deletions=[L],z.flags|=16):F.push(L)}}function a(z,L){if(!e)return null;for(;L!==null;)n(z,L),L=L.sibling;return null}function c(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function f(z,L){return z=qi(z,L),z.index=0,z.sibling=null,z}function m(z,L,F){return z.index=F,e?(F=z.alternate,F!==null?(F=F.index,F<L?(z.flags|=67108866,L):F):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function v(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function _(z,L,F,$){return L===null||L.tag!==6?(L=Cc(F,z.mode,$),L.return=z,L):(L=f(L,F),L.return=z,L)}function M(z,L,F,$){var ct=F.type;return ct===S?X(z,L,F.props.children,$,F.key):L!==null&&(L.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===V&&is(ct)===L.type)?(L=f(L,F.props),Xa(L,F),L.return=z,L):(L=vo(F.type,F.key,F.props,null,z.mode,$),Xa(L,F),L.return=z,L)}function U(z,L,F,$){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=Rc(F,z.mode,$),L.return=z,L):(L=f(L,F.children||[]),L.return=z,L)}function X(z,L,F,$,ct){return L===null||L.tag!==7?(L=Qn(F,z.mode,$,ct),L.return=z,L):(L=f(L,F),L.return=z,L)}function K(z,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Cc(""+L,z.mode,F),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case A:return F=vo(L.type,L.key,L.props,null,z.mode,F),Xa(F,L),F.return=z,F;case E:return L=Rc(L,z.mode,F),L.return=z,L;case V:return L=is(L),K(z,L,F)}if(mt(L)||ot(L))return L=Qn(L,z.mode,F,null),L.return=z,L;if(typeof L.then=="function")return K(z,xo(L),F);if(L.$$typeof===C)return K(z,Eo(z,L),F);Co(z,L)}return null}function H(z,L,F,$){var ct=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ct!==null?null:_(z,L,""+F,$);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===ct?M(z,L,F,$):null;case E:return F.key===ct?U(z,L,F,$):null;case V:return F=is(F),H(z,L,F,$)}if(mt(F)||ot(F))return ct!==null?null:X(z,L,F,$,null);if(typeof F.then=="function")return H(z,L,xo(F),$);if(F.$$typeof===C)return H(z,L,Eo(z,F),$);Co(z,F)}return null}function I(z,L,F,$,ct){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return z=z.get(F)||null,_(L,z,""+$,ct);if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return z=z.get($.key===null?F:$.key)||null,M(L,z,$,ct);case E:return z=z.get($.key===null?F:$.key)||null,U(L,z,$,ct);case V:return $=is($),I(z,L,F,$,ct)}if(mt($)||ot($))return z=z.get(F)||null,X(L,z,$,ct,null);if(typeof $.then=="function")return I(z,L,F,xo($),ct);if($.$$typeof===C)return I(z,L,F,Eo(L,$),ct);Co(L,$)}return null}function nt(z,L,F,$){for(var ct=null,Nt=null,at=L,Et=L=0,Ct=null;at!==null&&Et<F.length;Et++){at.index>Et?(Ct=at,at=null):Ct=at.sibling;var kt=H(z,at,F[Et],$);if(kt===null){at===null&&(at=Ct);break}e&&at&&kt.alternate===null&&n(z,at),L=m(kt,L,Et),Nt===null?ct=kt:Nt.sibling=kt,Nt=kt,at=Ct}if(Et===F.length)return a(z,at),Mt&&Xi(z,Et),ct;if(at===null){for(;Et<F.length;Et++)at=K(z,F[Et],$),at!==null&&(L=m(at,L,Et),Nt===null?ct=at:Nt.sibling=at,Nt=at);return Mt&&Xi(z,Et),ct}for(at=c(at);Et<F.length;Et++)Ct=I(at,z,Et,F[Et],$),Ct!==null&&(e&&Ct.alternate!==null&&at.delete(Ct.key===null?Et:Ct.key),L=m(Ct,L,Et),Nt===null?ct=Ct:Nt.sibling=Ct,Nt=Ct);return e&&at.forEach(function(Fn){return n(z,Fn)}),Mt&&Xi(z,Et),ct}function pt(z,L,F,$){if(F==null)throw Error(s(151));for(var ct=null,Nt=null,at=L,Et=L=0,Ct=null,kt=F.next();at!==null&&!kt.done;Et++,kt=F.next()){at.index>Et?(Ct=at,at=null):Ct=at.sibling;var Fn=H(z,at,kt.value,$);if(Fn===null){at===null&&(at=Ct);break}e&&at&&Fn.alternate===null&&n(z,at),L=m(Fn,L,Et),Nt===null?ct=Fn:Nt.sibling=Fn,Nt=Fn,at=Ct}if(kt.done)return a(z,at),Mt&&Xi(z,Et),ct;if(at===null){for(;!kt.done;Et++,kt=F.next())kt=K(z,kt.value,$),kt!==null&&(L=m(kt,L,Et),Nt===null?ct=kt:Nt.sibling=kt,Nt=kt);return Mt&&Xi(z,Et),ct}for(at=c(at);!kt.done;Et++,kt=F.next())kt=I(at,z,Et,kt.value,$),kt!==null&&(e&&kt.alternate!==null&&at.delete(kt.key===null?Et:kt.key),L=m(kt,L,Et),Nt===null?ct=kt:Nt.sibling=kt,Nt=kt);return e&&at.forEach(function($0){return n(z,$0)}),Mt&&Xi(z,Et),ct}function Ht(z,L,F,$){if(typeof F=="object"&&F!==null&&F.type===S&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:t:{for(var ct=F.key;L!==null;){if(L.key===ct){if(ct=F.type,ct===S){if(L.tag===7){a(z,L.sibling),$=f(L,F.props.children),$.return=z,z=$;break t}}else if(L.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===V&&is(ct)===L.type){a(z,L.sibling),$=f(L,F.props),Xa($,F),$.return=z,z=$;break t}a(z,L);break}else n(z,L);L=L.sibling}F.type===S?($=Qn(F.props.children,z.mode,$,F.key),$.return=z,z=$):($=vo(F.type,F.key,F.props,null,z.mode,$),Xa($,F),$.return=z,z=$)}return v(z);case E:t:{for(ct=F.key;L!==null;){if(L.key===ct)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){a(z,L.sibling),$=f(L,F.children||[]),$.return=z,z=$;break t}else{a(z,L);break}else n(z,L);L=L.sibling}$=Rc(F,z.mode,$),$.return=z,z=$}return v(z);case V:return F=is(F),Ht(z,L,F,$)}if(mt(F))return nt(z,L,F,$);if(ot(F)){if(ct=ot(F),typeof ct!="function")throw Error(s(150));return F=ct.call(F),pt(z,L,F,$)}if(typeof F.then=="function")return Ht(z,L,xo(F),$);if(F.$$typeof===C)return Ht(z,L,Eo(z,F),$);Co(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(a(z,L.sibling),$=f(L,F),$.return=z,z=$):(a(z,L),$=Cc(F,z.mode,$),$.return=z,z=$),v(z)):a(z,L)}return function(z,L,F,$){try{qa=0;var ct=Ht(z,L,F,$);return Gs=null,ct}catch(at){if(at===Is||at===_o)throw at;var Nt=Je(29,at,null,z.mode);return Nt.lanes=$,Nt.return=z,Nt}}}var ss=Rf(!0),Mf=Rf(!1),En=!1;function Uc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hc(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function wn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _n(e,n,a){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Bt&2)!==0){var f=c.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),c.pending=n,n=bo(e),df(e,null,a),n}return yo(e,c,n,a),bo(e)}function Ya(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var c=n.lanes;c&=e.pendingLanes,a|=c,n.lanes=a,vd(e,a)}}function Ic(e,n){var a=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?f=m=n:m=m.next=n}else f=m=n;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Gc=!1;function $a(){if(Gc){var e=Hs;if(e!==null)throw e}}function Ka(e,n,a,c){Gc=!1;var f=e.updateQueue;En=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var M=_,U=M.next;M.next=null,v===null?m=U:v.next=U,v=M;var X=e.alternate;X!==null&&(X=X.updateQueue,_=X.lastBaseUpdate,_!==v&&(_===null?X.firstBaseUpdate=U:_.next=U,X.lastBaseUpdate=M))}if(m!==null){var K=f.baseState;v=0,X=U=M=null,_=m;do{var H=_.lane&-536870913,I=H!==_.lane;if(I?(xt&H)===H:(c&H)===H){H!==0&&H===Us&&(Gc=!0),X!==null&&(X=X.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});t:{var nt=e,pt=_;H=n;var Ht=a;switch(pt.tag){case 1:if(nt=pt.payload,typeof nt=="function"){K=nt.call(Ht,K,H);break t}K=nt;break t;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=pt.payload,H=typeof nt=="function"?nt.call(Ht,K,H):nt,H==null)break t;K=y({},K,H);break t;case 2:En=!0}}H=_.callback,H!==null&&(e.flags|=64,I&&(e.flags|=8192),I=f.callbacks,I===null?f.callbacks=[H]:I.push(H))}else I={lane:H,tag:_.tag,payload:_.payload,callback:_.callback,next:null},X===null?(U=X=I,M=K):X=X.next=I,v|=H;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;I=_,_=I.next,I.next=null,f.lastBaseUpdate=I,f.shared.pending=null}}while(!0);X===null&&(M=K),f.baseState=M,f.firstBaseUpdate=U,f.lastBaseUpdate=X,m===null&&(f.shared.lanes=0),Mn|=v,e.lanes=v,e.memoizedState=K}}function Df(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Lf(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Df(a[e],n)}var Vs=D(null),Ro=D(0);function Of(e,n){e=sn,W(Ro,e),W(Vs,n),sn=e|n.baseLanes}function Vc(){W(Ro,sn),W(Vs,Vs.current)}function qc(){sn=Ro.current,q(Vs),q(Ro)}var ti=D(null),mi=null;function Tn(e){var n=e.alternate;W(re,re.current&1),W(ti,e),mi===null&&(n===null||Vs.current!==null||n.memoizedState!==null)&&(mi=e)}function Xc(e){W(re,re.current),W(ti,e),mi===null&&(mi=e)}function Nf(e){e.tag===22?(W(re,re.current),W(ti,e),mi===null&&(mi=e)):xn()}function xn(){W(re,re.current),W(ti,ti.current)}function ei(e){q(ti),mi===e&&(mi=null),q(re)}var re=D(0);function Mo(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Zu(a)||Ju(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ki=0,St=null,Ft=null,de=null,Do=!1,qs=!1,as=!1,Lo=0,Wa=0,Xs=null,jv=0;function se(){throw Error(s(321))}function Yc(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Ze(e[a],n[a]))return!1;return!0}function $c(e,n,a,c,f,m){return Ki=m,St=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,k.H=e===null||e.memoizedState===null?mp:cu,as=!1,m=a(c,f),as=!1,qs&&(m=Bf(n,a,c,f)),kf(e),m}function kf(e){k.H=Ja;var n=Ft!==null&&Ft.next!==null;if(Ki=0,de=Ft=St=null,Do=!1,Wa=0,Xs=null,n)throw Error(s(300));e===null||fe||(e=e.dependencies,e!==null&&So(e)&&(fe=!0))}function Bf(e,n,a,c){St=e;var f=0;do{if(qs&&(Xs=null),Wa=0,qs=!1,25<=f)throw Error(s(301));if(f+=1,de=Ft=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}k.H=yp,m=n(a,c)}while(qs);return m}function Fv(){var e=k.H,n=e.useState()[0];return n=typeof n.then=="function"?Qa(n):n,e=e.useState()[0],(Ft!==null?Ft.memoizedState:null)!==e&&(St.flags|=1024),n}function Kc(){var e=Lo!==0;return Lo=0,e}function Wc(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Qc(e){if(Do){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Do=!1}Ki=0,de=Ft=St=null,qs=!1,Wa=Lo=0,Xs=null}function Be(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?St.memoizedState=de=e:de=de.next=e,de}function oe(){if(Ft===null){var e=St.alternate;e=e!==null?e.memoizedState:null}else e=Ft.next;var n=de===null?St.memoizedState:de.next;if(n!==null)de=n,Ft=e;else{if(e===null)throw St.alternate===null?Error(s(467)):Error(s(310));Ft=e,e={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},de===null?St.memoizedState=de=e:de=de.next=e}return de}function Oo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qa(e){var n=Wa;return Wa+=1,Xs===null&&(Xs=[]),e=Tf(Xs,e,n),n=St,(de===null?n.memoizedState:de.next)===null&&(n=n.alternate,k.H=n===null||n.memoizedState===null?mp:cu),e}function No(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Qa(e);if(e.$$typeof===C)return Te(e)}throw Error(s(438,String(e)))}function Zc(e){var n=null,a=St.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var c=St.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Oo(),St.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),c=0;c<e;c++)a[c]=Q;return n.index++,a}function Wi(e,n){return typeof n=="function"?n(e):n}function ko(e){var n=oe();return Jc(n,Ft,e)}function Jc(e,n,a){var c=e.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var f=e.baseQueue,m=c.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}n.baseQueue=f=m,c.pending=null}if(m=e.baseState,f===null)e.memoizedState=m;else{n=f.next;var _=v=null,M=null,U=n,X=!1;do{var K=U.lane&-536870913;if(K!==U.lane?(xt&K)===K:(Ki&K)===K){var H=U.revertLane;if(H===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),K===Us&&(X=!0);else if((Ki&H)===H){U=U.next,H===Us&&(X=!0);continue}else K={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},M===null?(_=M=K,v=m):M=M.next=K,St.lanes|=H,Mn|=H;K=U.action,as&&a(m,K),m=U.hasEagerState?U.eagerState:a(m,K)}else H={lane:K,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},M===null?(_=M=H,v=m):M=M.next=H,St.lanes|=K,Mn|=K;U=U.next}while(U!==null&&U!==n);if(M===null?v=m:M.next=_,!Ze(m,e.memoizedState)&&(fe=!0,X&&(a=Hs,a!==null)))throw a;e.memoizedState=m,e.baseState=v,e.baseQueue=M,c.lastRenderedState=m}return f===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function tu(e){var n=oe(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var c=a.dispatch,f=a.pending,m=n.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do m=e(m,v.action),v=v.next;while(v!==f);Ze(m,n.memoizedState)||(fe=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,c]}function Pf(e,n,a){var c=St,f=oe(),m=Mt;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=n();var v=!Ze((Ft||f).memoizedState,a);if(v&&(f.memoizedState=a,fe=!0),f=f.queue,nu(Ff.bind(null,c,f,e),[e]),f.getSnapshot!==n||v||de!==null&&de.memoizedState.tag&1){if(c.flags|=2048,Ys(9,{destroy:void 0},jf.bind(null,c,f,a,n),null),qt===null)throw Error(s(349));m||(Ki&127)!==0||zf(c,n,a)}return a}function zf(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=St.updateQueue,n===null?(n=Oo(),St.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function jf(e,n,a,c){n.value=a,n.getSnapshot=c,Uf(n)&&Hf(e)}function Ff(e,n,a){return a(function(){Uf(n)&&Hf(e)})}function Uf(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Ze(e,a)}catch{return!0}}function Hf(e){var n=Wn(e,2);n!==null&&Ve(n,e,2)}function eu(e){var n=Be();if(typeof e=="function"){var a=e;if(e=a(),as){gn(!0);try{a()}finally{gn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:e},n}function If(e,n,a,c){return e.baseState=a,Jc(e,Ft,typeof c=="function"?c:Wi)}function Uv(e,n,a,c,f){if(zo(e))throw Error(s(485));if(e=n.action,e!==null){var m={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};k.T!==null?a(!0):m.isTransition=!1,c(m),a=n.pending,a===null?(m.next=n.pending=m,Gf(n,m)):(m.next=a.next,n.pending=a.next=m)}}function Gf(e,n){var a=n.action,c=n.payload,f=e.state;if(n.isTransition){var m=k.T,v={};k.T=v;try{var _=a(f,c),M=k.S;M!==null&&M(v,_),Vf(e,n,_)}catch(U){iu(e,n,U)}finally{m!==null&&v.types!==null&&(m.types=v.types),k.T=m}}else try{m=a(f,c),Vf(e,n,m)}catch(U){iu(e,n,U)}}function Vf(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){qf(e,n,c)},function(c){return iu(e,n,c)}):qf(e,n,a)}function qf(e,n,a){n.status="fulfilled",n.value=a,Xf(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Gf(e,a)))}function iu(e,n,a){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=a,Xf(n),n=n.next;while(n!==c)}e.action=null}function Xf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Yf(e,n){return n}function $f(e,n){if(Mt){var a=qt.formState;if(a!==null){t:{var c=St;if(Mt){if(Kt){e:{for(var f=Kt,m=gi;f.nodeType!==8;){if(!m){f=null;break e}if(f=yi(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Kt=yi(f.nextSibling),c=f.data==="F!";break t}}An(c)}c=!1}c&&(n=a[0])}}return a=Be(),a.memoizedState=a.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yf,lastRenderedState:n},a.queue=c,a=fp.bind(null,St,c),c.dispatch=a,c=eu(!1),m=lu.bind(null,St,!1,c.queue),c=Be(),f={state:n,dispatch:null,action:e,pending:null},c.queue=f,a=Uv.bind(null,St,f,m,a),f.dispatch=a,c.memoizedState=e,[n,a,!1]}function Kf(e){var n=oe();return Wf(n,Ft,e)}function Wf(e,n,a){if(n=Jc(e,n,Yf)[0],e=ko(Wi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=Qa(n)}catch(v){throw v===Is?_o:v}else c=n;n=oe();var f=n.queue,m=f.dispatch;return a!==n.memoizedState&&(St.flags|=2048,Ys(9,{destroy:void 0},Hv.bind(null,f,a),null)),[c,m,e]}function Hv(e,n){e.action=n}function Qf(e){var n=oe(),a=Ft;if(a!==null)return Wf(n,a,e);oe(),n=n.memoizedState,a=oe();var c=a.queue.dispatch;return a.memoizedState=e,[n,c,!1]}function Ys(e,n,a,c){return e={tag:e,create:a,deps:c,inst:n,next:null},n=St.updateQueue,n===null&&(n=Oo(),St.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(c=a.next,a.next=e,e.next=c,n.lastEffect=e),e}function Zf(){return oe().memoizedState}function Bo(e,n,a,c){var f=Be();St.flags|=e,f.memoizedState=Ys(1|n,{destroy:void 0},a,c===void 0?null:c)}function Po(e,n,a,c){var f=oe();c=c===void 0?null:c;var m=f.memoizedState.inst;Ft!==null&&c!==null&&Yc(c,Ft.memoizedState.deps)?f.memoizedState=Ys(n,m,a,c):(St.flags|=e,f.memoizedState=Ys(1|n,m,a,c))}function Jf(e,n){Bo(8390656,8,e,n)}function nu(e,n){Po(2048,8,e,n)}function Iv(e){St.flags|=4;var n=St.updateQueue;if(n===null)n=Oo(),St.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function tp(e){var n=oe().memoizedState;return Iv({ref:n,nextImpl:e}),function(){if((Bt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function ep(e,n){return Po(4,2,e,n)}function ip(e,n){return Po(4,4,e,n)}function np(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function sp(e,n,a){a=a!=null?a.concat([e]):null,Po(4,4,np.bind(null,n,e),a)}function su(){}function ap(e,n){var a=oe();n=n===void 0?null:n;var c=a.memoizedState;return n!==null&&Yc(n,c[1])?c[0]:(a.memoizedState=[e,n],e)}function rp(e,n){var a=oe();n=n===void 0?null:n;var c=a.memoizedState;if(n!==null&&Yc(n,c[1]))return c[0];if(c=e(),as){gn(!0);try{e()}finally{gn(!1)}}return a.memoizedState=[c,n],c}function au(e,n,a){return a===void 0||(Ki&1073741824)!==0&&(xt&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=og(),St.lanes|=e,Mn|=e,a)}function op(e,n,a,c){return Ze(a,n)?a:Vs.current!==null?(e=au(e,a,c),Ze(e,n)||(fe=!0),e):(Ki&42)===0||(Ki&1073741824)!==0&&(xt&261930)===0?(fe=!0,e.memoizedState=a):(e=og(),St.lanes|=e,Mn|=e,n)}function lp(e,n,a,c,f){var m=G.p;G.p=m!==0&&8>m?m:8;var v=k.T,_={};k.T=_,lu(e,!1,n,a);try{var M=f(),U=k.S;if(U!==null&&U(_,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var X=zv(M,c);Za(e,n,X,si(e))}else Za(e,n,c,si(e))}catch(K){Za(e,n,{then:function(){},status:"rejected",reason:K},si())}finally{G.p=m,v!==null&&_.types!==null&&(v.types=_.types),k.T=v}}function Gv(){}function ru(e,n,a,c){if(e.tag!==5)throw Error(s(476));var f=cp(e).queue;lp(e,f,n,Z,a===null?Gv:function(){return up(e),a(c)})}function cp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:Z},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function up(e){var n=cp(e);n.next===null&&(n=e.alternate.memoizedState),Za(e,n.next.queue,{},si())}function ou(){return Te(gr)}function hp(){return oe().memoizedState}function dp(){return oe().memoizedState}function Vv(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=si();e=wn(a);var c=_n(n,e,a);c!==null&&(Ve(c,n,a),Ya(c,n,a)),n={cache:Pc()},e.payload=n;return}n=n.return}}function qv(e,n,a){var c=si();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},zo(e)?pp(n,a):(a=Tc(e,n,a,c),a!==null&&(Ve(a,e,c),gp(a,n,c)))}function fp(e,n,a){var c=si();Za(e,n,a,c)}function Za(e,n,a,c){var f={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(zo(e))pp(n,f);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var v=n.lastRenderedState,_=m(v,a);if(f.hasEagerState=!0,f.eagerState=_,Ze(_,v))return yo(e,n,f,0),qt===null&&mo(),!1}catch{}if(a=Tc(e,n,f,c),a!==null)return Ve(a,e,c),gp(a,n,c),!0}return!1}function lu(e,n,a,c){if(c={lane:2,revertLane:Uu(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},zo(e)){if(n)throw Error(s(479))}else n=Tc(e,a,c,2),n!==null&&Ve(n,e,2)}function zo(e){var n=e.alternate;return e===St||n!==null&&n===St}function pp(e,n){qs=Do=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function gp(e,n,a){if((a&4194048)!==0){var c=n.lanes;c&=e.pendingLanes,a|=c,n.lanes=a,vd(e,a)}}var Ja={readContext:Te,use:No,useCallback:se,useContext:se,useEffect:se,useImperativeHandle:se,useLayoutEffect:se,useInsertionEffect:se,useMemo:se,useReducer:se,useRef:se,useState:se,useDebugValue:se,useDeferredValue:se,useTransition:se,useSyncExternalStore:se,useId:se,useHostTransitionStatus:se,useFormState:se,useActionState:se,useOptimistic:se,useMemoCache:se,useCacheRefresh:se};Ja.useEffectEvent=se;var mp={readContext:Te,use:No,useCallback:function(e,n){return Be().memoizedState=[e,n===void 0?null:n],e},useContext:Te,useEffect:Jf,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Bo(4194308,4,np.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Bo(4194308,4,e,n)},useInsertionEffect:function(e,n){Bo(4,2,e,n)},useMemo:function(e,n){var a=Be();n=n===void 0?null:n;var c=e();if(as){gn(!0);try{e()}finally{gn(!1)}}return a.memoizedState=[c,n],c},useReducer:function(e,n,a){var c=Be();if(a!==void 0){var f=a(n);if(as){gn(!0);try{a(n)}finally{gn(!1)}}}else f=n;return c.memoizedState=c.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},c.queue=e,e=e.dispatch=qv.bind(null,St,e),[c.memoizedState,e]},useRef:function(e){var n=Be();return e={current:e},n.memoizedState=e},useState:function(e){e=eu(e);var n=e.queue,a=fp.bind(null,St,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:su,useDeferredValue:function(e,n){var a=Be();return au(a,e,n)},useTransition:function(){var e=eu(!1);return e=lp.bind(null,St,e.queue,!0,!1),Be().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var c=St,f=Be();if(Mt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),qt===null)throw Error(s(349));(xt&127)!==0||zf(c,n,a)}f.memoizedState=a;var m={value:a,getSnapshot:n};return f.queue=m,Jf(Ff.bind(null,c,m,e),[e]),c.flags|=2048,Ys(9,{destroy:void 0},jf.bind(null,c,m,a,n),null),a},useId:function(){var e=Be(),n=qt.identifierPrefix;if(Mt){var a=Li,c=Di;a=(c&~(1<<32-Qe(c)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Lo++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=jv++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:ou,useFormState:$f,useActionState:$f,useOptimistic:function(e){var n=Be();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=lu.bind(null,St,!0,a),a.dispatch=n,[e,n]},useMemoCache:Zc,useCacheRefresh:function(){return Be().memoizedState=Vv.bind(null,St)},useEffectEvent:function(e){var n=Be(),a={impl:e};return n.memoizedState=a,function(){if((Bt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},cu={readContext:Te,use:No,useCallback:ap,useContext:Te,useEffect:nu,useImperativeHandle:sp,useInsertionEffect:ep,useLayoutEffect:ip,useMemo:rp,useReducer:ko,useRef:Zf,useState:function(){return ko(Wi)},useDebugValue:su,useDeferredValue:function(e,n){var a=oe();return op(a,Ft.memoizedState,e,n)},useTransition:function(){var e=ko(Wi)[0],n=oe().memoizedState;return[typeof e=="boolean"?e:Qa(e),n]},useSyncExternalStore:Pf,useId:hp,useHostTransitionStatus:ou,useFormState:Kf,useActionState:Kf,useOptimistic:function(e,n){var a=oe();return If(a,Ft,e,n)},useMemoCache:Zc,useCacheRefresh:dp};cu.useEffectEvent=tp;var yp={readContext:Te,use:No,useCallback:ap,useContext:Te,useEffect:nu,useImperativeHandle:sp,useInsertionEffect:ep,useLayoutEffect:ip,useMemo:rp,useReducer:tu,useRef:Zf,useState:function(){return tu(Wi)},useDebugValue:su,useDeferredValue:function(e,n){var a=oe();return Ft===null?au(a,e,n):op(a,Ft.memoizedState,e,n)},useTransition:function(){var e=tu(Wi)[0],n=oe().memoizedState;return[typeof e=="boolean"?e:Qa(e),n]},useSyncExternalStore:Pf,useId:hp,useHostTransitionStatus:ou,useFormState:Qf,useActionState:Qf,useOptimistic:function(e,n){var a=oe();return Ft!==null?If(a,Ft,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Zc,useCacheRefresh:dp};yp.useEffectEvent=tp;function uu(e,n,a,c){n=e.memoizedState,a=a(c,n),a=a==null?n:y({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var hu={enqueueSetState:function(e,n,a){e=e._reactInternals;var c=si(),f=wn(c);f.payload=n,a!=null&&(f.callback=a),n=_n(e,f,c),n!==null&&(Ve(n,e,c),Ya(n,e,c))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var c=si(),f=wn(c);f.tag=1,f.payload=n,a!=null&&(f.callback=a),n=_n(e,f,c),n!==null&&(Ve(n,e,c),Ya(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=si(),c=wn(a);c.tag=2,n!=null&&(c.callback=n),n=_n(e,c,a),n!==null&&(Ve(n,e,a),Ya(n,e,a))}};function bp(e,n,a,c,f,m,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,m,v):n.prototype&&n.prototype.isPureReactComponent?!Fa(a,c)||!Fa(f,m):!0}function vp(e,n,a,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,c),n.state!==e&&hu.enqueueReplaceState(n,n.state,null)}function rs(e,n){var a=n;if("ref"in n){a={};for(var c in n)c!=="ref"&&(a[c]=n[c])}if(e=e.defaultProps){a===n&&(a=y({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function Ap(e){go(e)}function Sp(e){console.error(e)}function Ep(e){go(e)}function jo(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function wp(e,n,a){try{var c=e.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function du(e,n,a){return a=wn(a),a.tag=3,a.payload={element:null},a.callback=function(){jo(e,n)},a}function _p(e){return e=wn(e),e.tag=3,e}function Tp(e,n,a,c){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;e.payload=function(){return f(m)},e.callback=function(){wp(n,a,c)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){wp(n,a,c),typeof f!="function"&&(Dn===null?Dn=new Set([this]):Dn.add(this));var _=c.stack;this.componentDidCatch(c.value,{componentStack:_!==null?_:""})})}function Xv(e,n,a,c,f){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=a.alternate,n!==null&&Fs(n,a,f,!0),a=ti.current,a!==null){switch(a.tag){case 31:case 13:return mi===null?Wo():a.alternate===null&&ae===0&&(ae=3),a.flags&=-257,a.flags|=65536,a.lanes=f,c===To?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([c]):n.add(c),zu(e,c,f)),!1;case 22:return a.flags|=65536,c===To?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([c]):a.add(c)),zu(e,c,f)),!1}throw Error(s(435,a.tag))}return zu(e,c,f),Wo(),!1}if(Mt)return n=ti.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,c!==Lc&&(e=Error(s(422),{cause:c}),Ia(di(e,a)))):(c!==Lc&&(n=Error(s(423),{cause:c}),Ia(di(n,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,c=di(c,a),f=du(e.stateNode,c,f),Ic(e,f),ae!==4&&(ae=2)),!1;var m=Error(s(520),{cause:c});if(m=di(m,a),or===null?or=[m]:or.push(m),ae!==4&&(ae=2),n===null)return!0;c=di(c,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=du(a.stateNode,c,e),Ic(a,e),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Dn===null||!Dn.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=_p(f),Tp(f,e,a,c),Ic(a,f),!1}a=a.return}while(a!==null);return!1}var fu=Error(s(461)),fe=!1;function xe(e,n,a,c){n.child=e===null?Mf(n,null,a,c):ss(n,e.child,a,c)}function xp(e,n,a,c,f){a=a.render;var m=n.ref;if("ref"in c){var v={};for(var _ in c)_!=="ref"&&(v[_]=c[_])}else v=c;return ts(n),c=$c(e,n,a,v,m,f),_=Kc(),e!==null&&!fe?(Wc(e,n,f),Qi(e,n,f)):(Mt&&_&&Mc(n),n.flags|=1,xe(e,n,c,f),n.child)}function Cp(e,n,a,c,f){if(e===null){var m=a.type;return typeof m=="function"&&!xc(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,Rp(e,n,m,c,f)):(e=vo(a.type,null,c,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,!Su(e,f)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:Fa,a(v,c)&&e.ref===n.ref)return Qi(e,n,f)}return n.flags|=1,e=qi(m,c),e.ref=n.ref,e.return=n,n.child=e}function Rp(e,n,a,c,f){if(e!==null){var m=e.memoizedProps;if(Fa(m,c)&&e.ref===n.ref)if(fe=!1,n.pendingProps=c=m,Su(e,f))(e.flags&131072)!==0&&(fe=!0);else return n.lanes=e.lanes,Qi(e,n,f)}return pu(e,n,a,c,f)}function Mp(e,n,a,c){var f=c.children,m=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,e!==null){for(c=n.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,n.child=null;return Dp(e,n,m,a,c)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&wo(n,m!==null?m.cachePool:null),m!==null?Of(n,m):Vc(),Nf(n);else return c=n.lanes=536870912,Dp(e,n,m!==null?m.baseLanes|a:a,a,c)}else m!==null?(wo(n,m.cachePool),Of(n,m),xn(),n.memoizedState=null):(e!==null&&wo(n,null),Vc(),xn());return xe(e,n,f,a),n.child}function tr(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Dp(e,n,a,c,f){var m=jc();return m=m===null?null:{parent:he._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},e!==null&&wo(n,null),Vc(),Nf(n),e!==null&&Fs(e,n,c,!0),n.childLanes=f,null}function Fo(e,n){return n=Ho({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Lp(e,n,a){return ss(n,e.child,null,a),e=Fo(n,n.pendingProps),e.flags|=2,ei(n),n.memoizedState=null,e}function Yv(e,n,a){var c=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Mt){if(c.mode==="hidden")return e=Fo(n,c),n.lanes=536870912,tr(null,e);if(Xc(n),(e=Kt)?(e=Gg(e,gi),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:bn!==null?{id:Di,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},a=pf(e),a.return=n,n.child=a,_e=n,Kt=null)):e=null,e===null)throw An(n);return n.lanes=536870912,null}return Fo(n,c)}var m=e.memoizedState;if(m!==null){var v=m.dehydrated;if(Xc(n),f)if(n.flags&256)n.flags&=-257,n=Lp(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(fe||Fs(e,n,a,!1),f=(a&e.childLanes)!==0,fe||f){if(c=qt,c!==null&&(v=Ad(c,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,Wn(e,v),Ve(c,e,v),fu;Wo(),n=Lp(e,n,a)}else e=m.treeContext,Kt=yi(v.nextSibling),_e=n,Mt=!0,vn=null,gi=!1,e!==null&&yf(n,e),n=Fo(n,c),n.flags|=4096;return n}return e=qi(e.child,{mode:c.mode,children:c.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Uo(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function pu(e,n,a,c,f){return ts(n),a=$c(e,n,a,c,void 0,f),c=Kc(),e!==null&&!fe?(Wc(e,n,f),Qi(e,n,f)):(Mt&&c&&Mc(n),n.flags|=1,xe(e,n,a,f),n.child)}function Op(e,n,a,c,f,m){return ts(n),n.updateQueue=null,a=Bf(n,c,a,f),kf(e),c=Kc(),e!==null&&!fe?(Wc(e,n,m),Qi(e,n,m)):(Mt&&c&&Mc(n),n.flags|=1,xe(e,n,a,m),n.child)}function Np(e,n,a,c,f){if(ts(n),n.stateNode===null){var m=Bs,v=a.contextType;typeof v=="object"&&v!==null&&(m=Te(v)),m=new a(c,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=hu,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=c,m.state=n.memoizedState,m.refs={},Uc(n),v=a.contextType,m.context=typeof v=="object"&&v!==null?Te(v):Bs,m.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(uu(n,a,v,c),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&hu.enqueueReplaceState(m,m.state,null),Ka(n,c,m,f),$a(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(e===null){m=n.stateNode;var _=n.memoizedProps,M=rs(a,_);m.props=M;var U=m.context,X=a.contextType;v=Bs,typeof X=="object"&&X!==null&&(v=Te(X));var K=a.getDerivedStateFromProps;X=typeof K=="function"||typeof m.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_||U!==v)&&vp(n,m,c,v),En=!1;var H=n.memoizedState;m.state=H,Ka(n,c,m,f),$a(),U=n.memoizedState,_||H!==U||En?(typeof K=="function"&&(uu(n,a,K,c),U=n.memoizedState),(M=En||bp(n,a,M,c,H,U,v))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=U),m.props=c,m.state=U,m.context=v,c=M):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{m=n.stateNode,Hc(e,n),v=n.memoizedProps,X=rs(a,v),m.props=X,K=n.pendingProps,H=m.context,U=a.contextType,M=Bs,typeof U=="object"&&U!==null&&(M=Te(U)),_=a.getDerivedStateFromProps,(U=typeof _=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==K||H!==M)&&vp(n,m,c,M),En=!1,H=n.memoizedState,m.state=H,Ka(n,c,m,f),$a();var I=n.memoizedState;v!==K||H!==I||En||e!==null&&e.dependencies!==null&&So(e.dependencies)?(typeof _=="function"&&(uu(n,a,_,c),I=n.memoizedState),(X=En||bp(n,a,X,c,H,I,M)||e!==null&&e.dependencies!==null&&So(e.dependencies))?(U||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,I,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,I,M)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=I),m.props=c,m.state=I,m.context=M,c=X):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),c=!1)}return m=c,Uo(e,n),c=(n.flags&128)!==0,m||c?(m=n.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,e!==null&&c?(n.child=ss(n,e.child,null,f),n.child=ss(n,null,a,f)):xe(e,n,a,f),n.memoizedState=m.state,e=n.child):e=Qi(e,n,f),e}function kp(e,n,a,c){return Zn(),n.flags|=256,xe(e,n,a,c),n.child}var gu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mu(e){return{baseLanes:e,cachePool:wf()}}function yu(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=ni),e}function Bp(e,n,a){var c=n.pendingProps,f=!1,m=(n.flags&128)!==0,v;if((v=m)||(v=e!==null&&e.memoizedState===null?!1:(re.current&2)!==0),v&&(f=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Mt){if(f?Tn(n):xn(),(e=Kt)?(e=Gg(e,gi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:bn!==null?{id:Di,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},a=pf(e),a.return=n,n.child=a,_e=n,Kt=null)):e=null,e===null)throw An(n);return Ju(e)?n.lanes=32:n.lanes=536870912,null}var _=c.children;return c=c.fallback,f?(xn(),f=n.mode,_=Ho({mode:"hidden",children:_},f),c=Qn(c,f,a,null),_.return=n,c.return=n,_.sibling=c,n.child=_,c=n.child,c.memoizedState=mu(a),c.childLanes=yu(e,v,a),n.memoizedState=gu,tr(null,c)):(Tn(n),bu(n,_))}var M=e.memoizedState;if(M!==null&&(_=M.dehydrated,_!==null)){if(m)n.flags&256?(Tn(n),n.flags&=-257,n=vu(e,n,a)):n.memoizedState!==null?(xn(),n.child=e.child,n.flags|=128,n=null):(xn(),_=c.fallback,f=n.mode,c=Ho({mode:"visible",children:c.children},f),_=Qn(_,f,a,null),_.flags|=2,c.return=n,_.return=n,c.sibling=_,n.child=c,ss(n,e.child,null,a),c=n.child,c.memoizedState=mu(a),c.childLanes=yu(e,v,a),n.memoizedState=gu,n=tr(null,c));else if(Tn(n),Ju(_)){if(v=_.nextSibling&&_.nextSibling.dataset,v)var U=v.dgst;v=U,c=Error(s(419)),c.stack="",c.digest=v,Ia({value:c,source:null,stack:null}),n=vu(e,n,a)}else if(fe||Fs(e,n,a,!1),v=(a&e.childLanes)!==0,fe||v){if(v=qt,v!==null&&(c=Ad(v,a),c!==0&&c!==M.retryLane))throw M.retryLane=c,Wn(e,c),Ve(v,e,c),fu;Zu(_)||Wo(),n=vu(e,n,a)}else Zu(_)?(n.flags|=192,n.child=e.child,n=null):(e=M.treeContext,Kt=yi(_.nextSibling),_e=n,Mt=!0,vn=null,gi=!1,e!==null&&yf(n,e),n=bu(n,c.children),n.flags|=4096);return n}return f?(xn(),_=c.fallback,f=n.mode,M=e.child,U=M.sibling,c=qi(M,{mode:"hidden",children:c.children}),c.subtreeFlags=M.subtreeFlags&65011712,U!==null?_=qi(U,_):(_=Qn(_,f,a,null),_.flags|=2),_.return=n,c.return=n,c.sibling=_,n.child=c,tr(null,c),c=n.child,_=e.child.memoizedState,_===null?_=mu(a):(f=_.cachePool,f!==null?(M=he._currentValue,f=f.parent!==M?{parent:M,pool:M}:f):f=wf(),_={baseLanes:_.baseLanes|a,cachePool:f}),c.memoizedState=_,c.childLanes=yu(e,v,a),n.memoizedState=gu,tr(e.child,c)):(Tn(n),a=e.child,e=a.sibling,a=qi(a,{mode:"visible",children:c.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function bu(e,n){return n=Ho({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Ho(e,n){return e=Je(22,e,null,n),e.lanes=0,e}function vu(e,n,a){return ss(n,e.child,null,a),e=bu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Pp(e,n,a){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),kc(e.return,n,a)}function Au(e,n,a,c,f,m){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f,treeForkCount:m}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=a,v.tailMode=f,v.treeForkCount=m)}function zp(e,n,a){var c=n.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var v=re.current,_=(v&2)!==0;if(_?(v=v&1|2,n.flags|=128):v&=1,W(re,v),xe(e,n,c,a),c=Mt?Ha:0,!_&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pp(e,a,n);else if(e.tag===19)Pp(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=n.child,f=null;a!==null;)e=a.alternate,e!==null&&Mo(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=n.child,n.child=null):(f=a.sibling,a.sibling=null),Au(n,!1,f,a,m,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&Mo(e)===null){n.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}Au(n,!0,a,null,m,c);break;case"together":Au(n,!1,null,null,void 0,c);break;default:n.memoizedState=null}return n.child}function Qi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Mn|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Fs(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=qi(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=qi(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Su(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&So(e)))}function $v(e,n,a){switch(n.tag){case 3:Gt(n,n.stateNode.containerInfo),Sn(n,he,e.memoizedState.cache),Zn();break;case 27:case 5:Ne(n);break;case 4:Gt(n,n.stateNode.containerInfo);break;case 10:Sn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Xc(n),null;break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(Tn(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Bp(e,n,a):(Tn(n),e=Qi(e,n,a),e!==null?e.sibling:null);Tn(n);break;case 19:var f=(e.flags&128)!==0;if(c=(a&n.childLanes)!==0,c||(Fs(e,n,a,!1),c=(a&n.childLanes)!==0),f){if(c)return zp(e,n,a);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),W(re,re.current),c)break;return null;case 22:return n.lanes=0,Mp(e,n,a,n.pendingProps);case 24:Sn(n,he,e.memoizedState.cache)}return Qi(e,n,a)}function jp(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)fe=!0;else{if(!Su(e,a)&&(n.flags&128)===0)return fe=!1,$v(e,n,a);fe=(e.flags&131072)!==0}else fe=!1,Mt&&(n.flags&1048576)!==0&&mf(n,Ha,n.index);switch(n.lanes=0,n.tag){case 16:t:{var c=n.pendingProps;if(e=is(n.elementType),n.type=e,typeof e=="function")xc(e)?(c=rs(e,c),n.tag=1,n=Np(null,n,e,c,a)):(n.tag=0,n=pu(null,n,e,c,a));else{if(e!=null){var f=e.$$typeof;if(f===O){n.tag=11,n=xp(null,n,e,c,a);break t}else if(f===B){n.tag=14,n=Cp(null,n,e,c,a);break t}}throw n=st(e)||e,Error(s(306,n,""))}}return n;case 0:return pu(e,n,n.type,n.pendingProps,a);case 1:return c=n.type,f=rs(c,n.pendingProps),Np(e,n,c,f,a);case 3:t:{if(Gt(n,n.stateNode.containerInfo),e===null)throw Error(s(387));c=n.pendingProps;var m=n.memoizedState;f=m.element,Hc(e,n),Ka(n,c,null,a);var v=n.memoizedState;if(c=v.cache,Sn(n,he,c),c!==m.cache&&Bc(n,[he],a,!0),$a(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=kp(e,n,c,a);break t}else if(c!==f){f=di(Error(s(424)),n),Ia(f),n=kp(e,n,c,a);break t}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Kt=yi(e.firstChild),_e=n,Mt=!0,vn=null,gi=!0,a=Mf(n,null,c,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Zn(),c===f){n=Qi(e,n,a);break t}xe(e,n,c,a)}n=n.child}return n;case 26:return Uo(e,n),e===null?(a=Kg(n.type,null,n.pendingProps,null))?n.memoizedState=a:Mt||(a=n.type,e=n.pendingProps,c=nl(dt.current).createElement(a),c[we]=n,c[je]=e,Ce(c,a,e),be(c),n.stateNode=c):n.memoizedState=Kg(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Ne(n),e===null&&Mt&&(c=n.stateNode=Xg(n.type,n.pendingProps,dt.current),_e=n,gi=!0,f=Kt,kn(n.type)?(th=f,Kt=yi(c.firstChild)):Kt=f),xe(e,n,n.pendingProps.children,a),Uo(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Mt&&((f=c=Kt)&&(c=_0(c,n.type,n.pendingProps,gi),c!==null?(n.stateNode=c,_e=n,Kt=yi(c.firstChild),gi=!1,f=!0):f=!1),f||An(n)),Ne(n),f=n.type,m=n.pendingProps,v=e!==null?e.memoizedProps:null,c=m.children,Ku(f,m)?c=null:v!==null&&Ku(f,v)&&(n.flags|=32),n.memoizedState!==null&&(f=$c(e,n,Fv,null,null,a),gr._currentValue=f),Uo(e,n),xe(e,n,c,a),n.child;case 6:return e===null&&Mt&&((e=a=Kt)&&(a=T0(a,n.pendingProps,gi),a!==null?(n.stateNode=a,_e=n,Kt=null,e=!0):e=!1),e||An(n)),null;case 13:return Bp(e,n,a);case 4:return Gt(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=ss(n,null,c,a):xe(e,n,c,a),n.child;case 11:return xp(e,n,n.type,n.pendingProps,a);case 7:return xe(e,n,n.pendingProps,a),n.child;case 8:return xe(e,n,n.pendingProps.children,a),n.child;case 12:return xe(e,n,n.pendingProps.children,a),n.child;case 10:return c=n.pendingProps,Sn(n,n.type,c.value),xe(e,n,c.children,a),n.child;case 9:return f=n.type._context,c=n.pendingProps.children,ts(n),f=Te(f),c=c(f),n.flags|=1,xe(e,n,c,a),n.child;case 14:return Cp(e,n,n.type,n.pendingProps,a);case 15:return Rp(e,n,n.type,n.pendingProps,a);case 19:return zp(e,n,a);case 31:return Yv(e,n,a);case 22:return Mp(e,n,a,n.pendingProps);case 24:return ts(n),c=Te(he),e===null?(f=jc(),f===null&&(f=qt,m=Pc(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),n.memoizedState={parent:c,cache:f},Uc(n),Sn(n,he,f)):((e.lanes&a)!==0&&(Hc(e,n),Ka(n,null,null,a),$a()),f=e.memoizedState,m=n.memoizedState,f.parent!==c?(f={parent:c,cache:c},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),Sn(n,he,c)):(c=m.cache,Sn(n,he,c),c!==f.cache&&Bc(n,[he],a,!0))),xe(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Zi(e){e.flags|=4}function Eu(e,n,a,c,f){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(hg())e.flags|=8192;else throw ns=To,Fc}else e.flags&=-16777217}function Fp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!tm(n))if(hg())e.flags|=8192;else throw ns=To,Fc}function Io(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?yd():536870912,e.lanes|=n,Qs|=n)}function er(e,n){if(!Mt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Wt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,c=0;if(n)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=c,e.childLanes=a,n}function Kv(e,n,a){var c=n.pendingProps;switch(Dc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(n),null;case 1:return Wt(n),null;case 3:return a=n.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),$i(he),Ot(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(js(n)?Zi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Oc())),Wt(n),null;case 26:var f=n.type,m=n.memoizedState;return e===null?(Zi(n),m!==null?(Wt(n),Fp(n,m)):(Wt(n),Eu(n,f,null,c,a))):m?m!==e.memoizedState?(Zi(n),Wt(n),Fp(n,m)):(Wt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==c&&Zi(n),Wt(n),Eu(n,f,e,c,a)),null;case 27:if(Pt(n),a=dt.current,f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&Zi(n);else{if(!c){if(n.stateNode===null)throw Error(s(166));return Wt(n),null}e=tt.current,js(n)?bf(n):(e=Xg(f,c,a),n.stateNode=e,Zi(n))}return Wt(n),null;case 5:if(Pt(n),f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&Zi(n);else{if(!c){if(n.stateNode===null)throw Error(s(166));return Wt(n),null}if(m=tt.current,js(n))bf(n);else{var v=nl(dt.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}m[we]=n,m[je]=c;t:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break t;for(;v.sibling===null;){if(v.return===null||v.return===n)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=m;t:switch(Ce(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&Zi(n)}}return Wt(n),Eu(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==c&&Zi(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(s(166));if(e=dt.current,js(n)){if(e=n.stateNode,a=n.memoizedProps,c=null,f=_e,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}e[we]=n,e=!!(e.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Bg(e.nodeValue,a)),e||An(n,!0)}else e=nl(e).createTextNode(c),e[we]=n,n.stateNode=e}return Wt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(c=js(n),a!==null){if(e===null){if(!c)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[we]=n}else Zn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Wt(n),e=!1}else a=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(ei(n),n):(ei(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Wt(n),null;case 13:if(c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=js(n),c!==null&&c.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[we]=n}else Zn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Wt(n),f=!1}else f=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(ei(n),n):(ei(n),null)}return ei(n),(n.flags&128)!==0?(n.lanes=a,n):(a=c!==null,e=e!==null&&e.memoizedState!==null,a&&(c=n.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),Io(n,n.updateQueue),Wt(n),null);case 4:return Ot(),e===null&&Vu(n.stateNode.containerInfo),Wt(n),null;case 10:return $i(n.type),Wt(n),null;case 19:if(q(re),c=n.memoizedState,c===null)return Wt(n),null;if(f=(n.flags&128)!==0,m=c.rendering,m===null)if(f)er(c,!1);else{if(ae!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=Mo(e),m!==null){for(n.flags|=128,er(c,!1),e=m.updateQueue,n.updateQueue=e,Io(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)ff(a,e),a=a.sibling;return W(re,re.current&1|2),Mt&&Xi(n,c.treeForkCount),n.child}e=e.sibling}c.tail!==null&&ke()>Yo&&(n.flags|=128,f=!0,er(c,!1),n.lanes=4194304)}else{if(!f)if(e=Mo(m),e!==null){if(n.flags|=128,f=!0,e=e.updateQueue,n.updateQueue=e,Io(n,e),er(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Mt)return Wt(n),null}else 2*ke()-c.renderingStartTime>Yo&&a!==536870912&&(n.flags|=128,f=!0,er(c,!1),n.lanes=4194304);c.isBackwards?(m.sibling=n.child,n.child=m):(e=c.last,e!==null?e.sibling=m:n.child=m,c.last=m)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=ke(),e.sibling=null,a=re.current,W(re,f?a&1|2:a&1),Mt&&Xi(n,c.treeForkCount),e):(Wt(n),null);case 22:case 23:return ei(n),qc(),c=n.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(a&536870912)!==0&&(n.flags&128)===0&&(Wt(n),n.subtreeFlags&6&&(n.flags|=8192)):Wt(n),a=n.updateQueue,a!==null&&Io(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==a&&(n.flags|=2048),e!==null&&q(es),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),$i(he),Wt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function Wv(e,n){switch(Dc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return $i(he),Ot(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Pt(n),null;case 31:if(n.memoizedState!==null){if(ei(n),n.alternate===null)throw Error(s(340));Zn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(ei(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Zn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return q(re),null;case 4:return Ot(),null;case 10:return $i(n.type),null;case 22:case 23:return ei(n),qc(),e!==null&&q(es),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return $i(he),null;case 25:return null;default:return null}}function Up(e,n){switch(Dc(n),n.tag){case 3:$i(he),Ot();break;case 26:case 27:case 5:Pt(n);break;case 4:Ot();break;case 31:n.memoizedState!==null&&ei(n);break;case 13:ei(n);break;case 19:q(re);break;case 10:$i(n.type);break;case 22:case 23:ei(n),qc(),e!==null&&q(es);break;case 24:$i(he)}}function ir(e,n){try{var a=n.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&e)===e){c=void 0;var m=a.create,v=a.inst;c=m(),v.destroy=c}a=a.next}while(a!==f)}}catch(_){jt(n,n.return,_)}}function Cn(e,n,a){try{var c=n.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&e)===e){var v=c.inst,_=v.destroy;if(_!==void 0){v.destroy=void 0,f=n;var M=a,U=_;try{U()}catch(X){jt(f,M,X)}}}c=c.next}while(c!==m)}}catch(X){jt(n,n.return,X)}}function Hp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Lf(n,a)}catch(c){jt(e,e.return,c)}}}function Ip(e,n,a){a.props=rs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(c){jt(e,n,c)}}function nr(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof a=="function"?e.refCleanup=a(c):a.current=c}}catch(f){jt(e,n,f)}}function Oi(e,n){var a=e.ref,c=e.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(f){jt(e,n,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){jt(e,n,f)}else a.current=null}function Gp(e){var n=e.type,a=e.memoizedProps,c=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break t;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(f){jt(e,e.return,f)}}function wu(e,n,a){try{var c=e.stateNode;b0(c,e.type,a,n),c[je]=n}catch(f){jt(e,e.return,f)}}function Vp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&kn(e.type)||e.tag===4}function _u(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Vp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&kn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tu(e,n,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Gi));else if(c!==4&&(c===27&&kn(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Tu(e,n,a),e=e.sibling;e!==null;)Tu(e,n,a),e=e.sibling}function Go(e,n,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(c!==4&&(c===27&&kn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Go(e,n,a),e=e.sibling;e!==null;)Go(e,n,a),e=e.sibling}function qp(e){var n=e.stateNode,a=e.memoizedProps;try{for(var c=e.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);Ce(n,c,a),n[we]=e,n[je]=a}catch(m){jt(e,e.return,m)}}var Ji=!1,pe=!1,xu=!1,Xp=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Qv(e,n){if(e=e.containerInfo,Yu=ul,e=sf(e),vc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break t}var v=0,_=-1,M=-1,U=0,X=0,K=e,H=null;e:for(;;){for(var I;K!==a||f!==0&&K.nodeType!==3||(_=v+f),K!==m||c!==0&&K.nodeType!==3||(M=v+c),K.nodeType===3&&(v+=K.nodeValue.length),(I=K.firstChild)!==null;)H=K,K=I;for(;;){if(K===e)break e;if(H===a&&++U===f&&(_=v),H===m&&++X===c&&(M=v),(I=K.nextSibling)!==null)break;K=H,H=K.parentNode}K=I}a=_===-1||M===-1?null:{start:_,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for($u={focusedElem:e,selectionRange:a},ul=!1,ve=n;ve!==null;)if(n=ve,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ve=e;else for(;ve!==null;){switch(n=ve,m=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=n,f=m.memoizedProps,m=m.memoizedState,c=a.stateNode;try{var nt=rs(a.type,f);e=c.getSnapshotBeforeUpdate(nt,m),c.__reactInternalSnapshotBeforeUpdate=e}catch(pt){jt(a,a.return,pt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Qu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Qu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,ve=e;break}ve=n.return}}function Yp(e,n,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:en(e,a),c&4&&ir(5,a);break;case 1:if(en(e,a),c&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){jt(a,a.return,v)}else{var f=rs(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(f,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){jt(a,a.return,v)}}c&64&&Hp(a),c&512&&nr(a,a.return);break;case 3:if(en(e,a),c&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Lf(e,n)}catch(v){jt(a,a.return,v)}}break;case 27:n===null&&c&4&&qp(a);case 26:case 5:en(e,a),n===null&&c&4&&Gp(a),c&512&&nr(a,a.return);break;case 12:en(e,a);break;case 31:en(e,a),c&4&&Wp(e,a);break;case 13:en(e,a),c&4&&Qp(e,a),c&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=r0.bind(null,a),x0(e,a))));break;case 22:if(c=a.memoizedState!==null||Ji,!c){n=n!==null&&n.memoizedState!==null||pe,f=Ji;var m=pe;Ji=c,(pe=n)&&!m?nn(e,a,(a.subtreeFlags&8772)!==0):en(e,a),Ji=f,pe=m}break;case 30:break;default:en(e,a)}}function $p(e){var n=e.alternate;n!==null&&(e.alternate=null,$p(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&ic(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Qt=null,Ue=!1;function tn(e,n,a){for(a=a.child;a!==null;)Kp(e,n,a),a=a.sibling}function Kp(e,n,a){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(Ca,a)}catch{}switch(a.tag){case 26:pe||Oi(a,n),tn(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:pe||Oi(a,n);var c=Qt,f=Ue;kn(a.type)&&(Qt=a.stateNode,Ue=!1),tn(e,n,a),dr(a.stateNode),Qt=c,Ue=f;break;case 5:pe||Oi(a,n);case 6:if(c=Qt,f=Ue,Qt=null,tn(e,n,a),Qt=c,Ue=f,Qt!==null)if(Ue)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(a.stateNode)}catch(m){jt(a,n,m)}else try{Qt.removeChild(a.stateNode)}catch(m){jt(a,n,m)}break;case 18:Qt!==null&&(Ue?(e=Qt,Hg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),aa(e)):Hg(Qt,a.stateNode));break;case 4:c=Qt,f=Ue,Qt=a.stateNode.containerInfo,Ue=!0,tn(e,n,a),Qt=c,Ue=f;break;case 0:case 11:case 14:case 15:Cn(2,a,n),pe||Cn(4,a,n),tn(e,n,a);break;case 1:pe||(Oi(a,n),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Ip(a,n,c)),tn(e,n,a);break;case 21:tn(e,n,a);break;case 22:pe=(c=pe)||a.memoizedState!==null,tn(e,n,a),pe=c;break;default:tn(e,n,a)}}function Wp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{aa(e)}catch(a){jt(n,n.return,a)}}}function Qp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{aa(e)}catch(a){jt(n,n.return,a)}}function Zv(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Xp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Xp),n;default:throw Error(s(435,e.tag))}}function Vo(e,n){var a=Zv(e);n.forEach(function(c){if(!a.has(c)){a.add(c);var f=o0.bind(null,e,c);c.then(f,f)}})}function He(e,n){var a=n.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c],m=e,v=n,_=v;t:for(;_!==null;){switch(_.tag){case 27:if(kn(_.type)){Qt=_.stateNode,Ue=!1;break t}break;case 5:Qt=_.stateNode,Ue=!1;break t;case 3:case 4:Qt=_.stateNode.containerInfo,Ue=!0;break t}_=_.return}if(Qt===null)throw Error(s(160));Kp(m,v,f),Qt=null,Ue=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Zp(n,e),n=n.sibling}var Ti=null;function Zp(e,n){var a=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:He(n,e),Ie(e),c&4&&(Cn(3,e,e.return),ir(3,e),Cn(5,e,e.return));break;case 1:He(n,e),Ie(e),c&512&&(pe||a===null||Oi(a,a.return)),c&64&&Ji&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var f=Ti;if(He(n,e),Ie(e),c&512&&(pe||a===null||Oi(a,a.return)),c&4){var m=a!==null?a.memoizedState:null;if(c=e.memoizedState,a===null)if(c===null)if(e.stateNode===null){t:{c=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Da]||m[we]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Ce(m,c,a),m[we]=e,be(m),c=m;break t;case"link":var v=Zg("link","href",f).get(c+(a.href||""));if(v){for(var _=0;_<v.length;_++)if(m=v[_],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(_,1);break e}}m=f.createElement(c),Ce(m,c,a),f.head.appendChild(m);break;case"meta":if(v=Zg("meta","content",f).get(c+(a.content||""))){for(_=0;_<v.length;_++)if(m=v[_],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(_,1);break e}}m=f.createElement(c),Ce(m,c,a),f.head.appendChild(m);break;default:throw Error(s(468,c))}m[we]=e,be(m),c=m}e.stateNode=c}else Jg(f,e.type,e.stateNode);else e.stateNode=Qg(f,c,e.memoizedProps);else m!==c?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,c===null?Jg(f,e.type,e.stateNode):Qg(f,c,e.memoizedProps)):c===null&&e.stateNode!==null&&wu(e,e.memoizedProps,a.memoizedProps)}break;case 27:He(n,e),Ie(e),c&512&&(pe||a===null||Oi(a,a.return)),a!==null&&c&4&&wu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(He(n,e),Ie(e),c&512&&(pe||a===null||Oi(a,a.return)),e.flags&32){f=e.stateNode;try{Rs(f,"")}catch(nt){jt(e,e.return,nt)}}c&4&&e.stateNode!=null&&(f=e.memoizedProps,wu(e,f,a!==null?a.memoizedProps:f)),c&1024&&(xu=!0);break;case 6:if(He(n,e),Ie(e),c&4){if(e.stateNode===null)throw Error(s(162));c=e.memoizedProps,a=e.stateNode;try{a.nodeValue=c}catch(nt){jt(e,e.return,nt)}}break;case 3:if(rl=null,f=Ti,Ti=sl(n.containerInfo),He(n,e),Ti=f,Ie(e),c&4&&a!==null&&a.memoizedState.isDehydrated)try{aa(n.containerInfo)}catch(nt){jt(e,e.return,nt)}xu&&(xu=!1,Jp(e));break;case 4:c=Ti,Ti=sl(e.stateNode.containerInfo),He(n,e),Ie(e),Ti=c;break;case 12:He(n,e),Ie(e);break;case 31:He(n,e),Ie(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Vo(e,c)));break;case 13:He(n,e),Ie(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Xo=ke()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Vo(e,c)));break;case 22:f=e.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,U=Ji,X=pe;if(Ji=U||f,pe=X||M,He(n,e),pe=X,Ji=U,Ie(e),c&8192)t:for(n=e.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(a===null||M||Ji||pe||os(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){M=a=n;try{if(m=M.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{_=M.stateNode;var K=M.memoizedProps.style,H=K!=null&&K.hasOwnProperty("display")?K.display:null;_.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(nt){jt(M,M.return,nt)}}}else if(n.tag===6){if(a===null){M=n;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(nt){jt(M,M.return,nt)}}}else if(n.tag===18){if(a===null){M=n;try{var I=M.stateNode;f?Ig(I,!0):Ig(M.stateNode,!1)}catch(nt){jt(M,M.return,nt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=e.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Vo(e,a))));break;case 19:He(n,e),Ie(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Vo(e,c)));break;case 30:break;case 21:break;default:He(n,e),Ie(e)}}function Ie(e){var n=e.flags;if(n&2){try{for(var a,c=e.return;c!==null;){if(Vp(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,m=_u(e);Go(e,m,f);break;case 5:var v=a.stateNode;a.flags&32&&(Rs(v,""),a.flags&=-33);var _=_u(e);Go(e,_,v);break;case 3:case 4:var M=a.stateNode.containerInfo,U=_u(e);Tu(e,U,M);break;default:throw Error(s(161))}}catch(X){jt(e,e.return,X)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Jp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Jp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function en(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Yp(e,n.alternate,n),n=n.sibling}function os(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Cn(4,n,n.return),os(n);break;case 1:Oi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Ip(n,n.return,a),os(n);break;case 27:dr(n.stateNode);case 26:case 5:Oi(n,n.return),os(n);break;case 22:n.memoizedState===null&&os(n);break;case 30:os(n);break;default:os(n)}e=e.sibling}}function nn(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,f=e,m=n,v=m.flags;switch(m.tag){case 0:case 11:case 15:nn(f,m,a),ir(4,m);break;case 1:if(nn(f,m,a),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(U){jt(c,c.return,U)}if(c=m,f=c.updateQueue,f!==null){var _=c.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)Df(M[f],_)}catch(U){jt(c,c.return,U)}}a&&v&64&&Hp(m),nr(m,m.return);break;case 27:qp(m);case 26:case 5:nn(f,m,a),a&&c===null&&v&4&&Gp(m),nr(m,m.return);break;case 12:nn(f,m,a);break;case 31:nn(f,m,a),a&&v&4&&Wp(f,m);break;case 13:nn(f,m,a),a&&v&4&&Qp(f,m);break;case 22:m.memoizedState===null&&nn(f,m,a),nr(m,m.return);break;case 30:break;default:nn(f,m,a)}n=n.sibling}}function Cu(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ga(a))}function Ru(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ga(e))}function xi(e,n,a,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)tg(e,n,a,c),n=n.sibling}function tg(e,n,a,c){var f=n.flags;switch(n.tag){case 0:case 11:case 15:xi(e,n,a,c),f&2048&&ir(9,n);break;case 1:xi(e,n,a,c);break;case 3:xi(e,n,a,c),f&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ga(e)));break;case 12:if(f&2048){xi(e,n,a,c),e=n.stateNode;try{var m=n.memoizedProps,v=m.id,_=m.onPostCommit;typeof _=="function"&&_(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){jt(n,n.return,M)}}else xi(e,n,a,c);break;case 31:xi(e,n,a,c);break;case 13:xi(e,n,a,c);break;case 23:break;case 22:m=n.stateNode,v=n.alternate,n.memoizedState!==null?m._visibility&2?xi(e,n,a,c):sr(e,n):m._visibility&2?xi(e,n,a,c):(m._visibility|=2,$s(e,n,a,c,(n.subtreeFlags&10256)!==0||!1)),f&2048&&Cu(v,n);break;case 24:xi(e,n,a,c),f&2048&&Ru(n.alternate,n);break;default:xi(e,n,a,c)}}function $s(e,n,a,c,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=e,v=n,_=a,M=c,U=v.flags;switch(v.tag){case 0:case 11:case 15:$s(m,v,_,M,f),ir(8,v);break;case 23:break;case 22:var X=v.stateNode;v.memoizedState!==null?X._visibility&2?$s(m,v,_,M,f):sr(m,v):(X._visibility|=2,$s(m,v,_,M,f)),f&&U&2048&&Cu(v.alternate,v);break;case 24:$s(m,v,_,M,f),f&&U&2048&&Ru(v.alternate,v);break;default:$s(m,v,_,M,f)}n=n.sibling}}function sr(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,c=n,f=c.flags;switch(c.tag){case 22:sr(a,c),f&2048&&Cu(c.alternate,c);break;case 24:sr(a,c),f&2048&&Ru(c.alternate,c);break;default:sr(a,c)}n=n.sibling}}var ar=8192;function Ks(e,n,a){if(e.subtreeFlags&ar)for(e=e.child;e!==null;)eg(e,n,a),e=e.sibling}function eg(e,n,a){switch(e.tag){case 26:Ks(e,n,a),e.flags&ar&&e.memoizedState!==null&&j0(a,Ti,e.memoizedState,e.memoizedProps);break;case 5:Ks(e,n,a);break;case 3:case 4:var c=Ti;Ti=sl(e.stateNode.containerInfo),Ks(e,n,a),Ti=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=ar,ar=16777216,Ks(e,n,a),ar=c):Ks(e,n,a));break;default:Ks(e,n,a)}}function ig(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function rr(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var c=n[a];ve=c,sg(c,e)}ig(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ng(e),e=e.sibling}function ng(e){switch(e.tag){case 0:case 11:case 15:rr(e),e.flags&2048&&Cn(9,e,e.return);break;case 3:rr(e);break;case 12:rr(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,qo(e)):rr(e);break;default:rr(e)}}function qo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var c=n[a];ve=c,sg(c,e)}ig(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Cn(8,n,n.return),qo(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,qo(n));break;default:qo(n)}e=e.sibling}}function sg(e,n){for(;ve!==null;){var a=ve;switch(a.tag){case 0:case 11:case 15:Cn(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ga(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,ve=c;else t:for(a=e;ve!==null;){c=ve;var f=c.sibling,m=c.return;if($p(c),c===a){ve=null;break t}if(f!==null){f.return=m,ve=f;break t}ve=m}}}var Jv={getCacheForType:function(e){var n=Te(he),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Te(he).controller.signal}},t0=typeof WeakMap=="function"?WeakMap:Map,Bt=0,qt=null,_t=null,xt=0,zt=0,ii=null,Rn=!1,Ws=!1,Mu=!1,sn=0,ae=0,Mn=0,ls=0,Du=0,ni=0,Qs=0,or=null,Ge=null,Lu=!1,Xo=0,ag=0,Yo=1/0,$o=null,Dn=null,me=0,Ln=null,Zs=null,an=0,Ou=0,Nu=null,rg=null,lr=0,ku=null;function si(){return(Bt&2)!==0&&xt!==0?xt&-xt:k.T!==null?Uu():Sd()}function og(){if(ni===0)if((xt&536870912)===0||Mt){var e=eo;eo<<=1,(eo&3932160)===0&&(eo=262144),ni=e}else ni=536870912;return e=ti.current,e!==null&&(e.flags|=32),ni}function Ve(e,n,a){(e===qt&&(zt===2||zt===9)||e.cancelPendingCommit!==null)&&(Js(e,0),On(e,xt,ni,!1)),Ma(e,a),((Bt&2)===0||e!==qt)&&(e===qt&&((Bt&2)===0&&(ls|=a),ae===4&&On(e,xt,ni,!1)),Ni(e))}function lg(e,n,a){if((Bt&6)!==0)throw Error(s(327));var c=!a&&(n&127)===0&&(n&e.expiredLanes)===0||Ra(e,n),f=c?n0(e,n):Pu(e,n,!0),m=c;do{if(f===0){Ws&&!c&&On(e,n,0,!1);break}else{if(a=e.current.alternate,m&&!e0(a)){f=Pu(e,n,!1),m=!1;continue}if(f===2){if(m=n,e.errorRecoveryDisabledLanes&m)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var _=e;f=or;var M=_.current.memoizedState.isDehydrated;if(M&&(Js(_,v).flags|=256),v=Pu(_,v,!1),v!==2){if(Mu&&!M){_.errorRecoveryDisabledLanes|=m,ls|=m,f=4;break t}m=Ge,Ge=f,m!==null&&(Ge===null?Ge=m:Ge.push.apply(Ge,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){Js(e,0),On(e,n,0,!0);break}t:{switch(c=e,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:On(c,n,ni,!Rn);break t;case 2:Ge=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(f=Xo+300-ke(),10<f)){if(On(c,n,ni,!Rn),no(c,0,!0)!==0)break t;an=n,c.timeoutHandle=Fg(cg.bind(null,c,a,Ge,$o,Lu,n,ni,ls,Qs,Rn,m,"Throttled",-0,0),f);break t}cg(c,a,Ge,$o,Lu,n,ni,ls,Qs,Rn,m,null,-0,0)}}break}while(!0);Ni(e)}function cg(e,n,a,c,f,m,v,_,M,U,X,K,H,I){if(e.timeoutHandle=-1,K=n.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gi},eg(n,m,K);var nt=(m&62914560)===m?Xo-ke():(m&4194048)===m?ag-ke():0;if(nt=F0(K,nt),nt!==null){an=m,e.cancelPendingCommit=nt(yg.bind(null,e,n,m,a,c,f,v,_,M,X,K,null,H,I)),On(e,m,v,!U);return}}yg(e,n,m,a,c,f,v,_,M)}function e0(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var f=a[c],m=f.getSnapshot;f=f.value;try{if(!Ze(m(),f))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function On(e,n,a,c){n&=~Du,n&=~ls,e.suspendedLanes|=n,e.pingedLanes&=~n,c&&(e.warmLanes|=n),c=e.expirationTimes;for(var f=n;0<f;){var m=31-Qe(f),v=1<<m;c[m]=-1,f&=~v}a!==0&&bd(e,a,n)}function Ko(){return(Bt&6)===0?(cr(0),!1):!0}function Bu(){if(_t!==null){if(zt===0)var e=_t.return;else e=_t,Yi=Jn=null,Qc(e),Gs=null,qa=0,e=_t;for(;e!==null;)Up(e.alternate,e),e=e.return;_t=null}}function Js(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,S0(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),an=0,Bu(),qt=e,_t=a=qi(e.current,null),xt=n,zt=0,ii=null,Rn=!1,Ws=Ra(e,n),Mu=!1,Qs=ni=Du=ls=Mn=ae=0,Ge=or=null,Lu=!1,(n&8)!==0&&(n|=n&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=n;0<c;){var f=31-Qe(c),m=1<<f;n|=e[f],c&=~m}return sn=n,mo(),a}function ug(e,n){St=null,k.H=Ja,n===Is||n===_o?(n=xf(),zt=3):n===Fc?(n=xf(),zt=4):zt=n===fu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,ii=n,_t===null&&(ae=1,jo(e,di(n,e.current)))}function hg(){var e=ti.current;return e===null?!0:(xt&4194048)===xt?mi===null:(xt&62914560)===xt||(xt&536870912)!==0?e===mi:!1}function dg(){var e=k.H;return k.H=Ja,e===null?Ja:e}function fg(){var e=k.A;return k.A=Jv,e}function Wo(){ae=4,Rn||(xt&4194048)!==xt&&ti.current!==null||(Ws=!0),(Mn&134217727)===0&&(ls&134217727)===0||qt===null||On(qt,xt,ni,!1)}function Pu(e,n,a){var c=Bt;Bt|=2;var f=dg(),m=fg();(qt!==e||xt!==n)&&($o=null,Js(e,n)),n=!1;var v=ae;t:do try{if(zt!==0&&_t!==null){var _=_t,M=ii;switch(zt){case 8:Bu(),v=6;break t;case 3:case 2:case 9:case 6:ti.current===null&&(n=!0);var U=zt;if(zt=0,ii=null,ta(e,_,M,U),a&&Ws){v=0;break t}break;default:U=zt,zt=0,ii=null,ta(e,_,M,U)}}i0(),v=ae;break}catch(X){ug(e,X)}while(!0);return n&&e.shellSuspendCounter++,Yi=Jn=null,Bt=c,k.H=f,k.A=m,_t===null&&(qt=null,xt=0,mo()),v}function i0(){for(;_t!==null;)pg(_t)}function n0(e,n){var a=Bt;Bt|=2;var c=dg(),f=fg();qt!==e||xt!==n?($o=null,Yo=ke()+500,Js(e,n)):Ws=Ra(e,n);t:do try{if(zt!==0&&_t!==null){n=_t;var m=ii;e:switch(zt){case 1:zt=0,ii=null,ta(e,n,m,1);break;case 2:case 9:if(_f(m)){zt=0,ii=null,gg(n);break}n=function(){zt!==2&&zt!==9||qt!==e||(zt=7),Ni(e)},m.then(n,n);break t;case 3:zt=7;break t;case 4:zt=5;break t;case 7:_f(m)?(zt=0,ii=null,gg(n)):(zt=0,ii=null,ta(e,n,m,7));break;case 5:var v=null;switch(_t.tag){case 26:v=_t.memoizedState;case 5:case 27:var _=_t;if(v?tm(v):_.stateNode.complete){zt=0,ii=null;var M=_.sibling;if(M!==null)_t=M;else{var U=_.return;U!==null?(_t=U,Qo(U)):_t=null}break e}}zt=0,ii=null,ta(e,n,m,5);break;case 6:zt=0,ii=null,ta(e,n,m,6);break;case 8:Bu(),ae=6;break t;default:throw Error(s(462))}}s0();break}catch(X){ug(e,X)}while(!0);return Yi=Jn=null,k.H=c,k.A=f,Bt=a,_t!==null?0:(qt=null,xt=0,mo(),ae)}function s0(){for(;_t!==null&&!Ss();)pg(_t)}function pg(e){var n=jp(e.alternate,e,sn);e.memoizedProps=e.pendingProps,n===null?Qo(e):_t=n}function gg(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=Op(a,n,n.pendingProps,n.type,void 0,xt);break;case 11:n=Op(a,n,n.pendingProps,n.type.render,n.ref,xt);break;case 5:Qc(n);default:Up(a,n),n=_t=ff(n,sn),n=jp(a,n,sn)}e.memoizedProps=e.pendingProps,n===null?Qo(e):_t=n}function ta(e,n,a,c){Yi=Jn=null,Qc(n),Gs=null,qa=0;var f=n.return;try{if(Xv(e,f,n,a,xt)){ae=1,jo(e,di(a,e.current)),_t=null;return}}catch(m){if(f!==null)throw _t=f,m;ae=1,jo(e,di(a,e.current)),_t=null;return}n.flags&32768?(Mt||c===1?e=!0:Ws||(xt&536870912)!==0?e=!1:(Rn=e=!0,(c===2||c===9||c===3||c===6)&&(c=ti.current,c!==null&&c.tag===13&&(c.flags|=16384))),mg(n,e)):Qo(n)}function Qo(e){var n=e;do{if((n.flags&32768)!==0){mg(n,Rn);return}e=n.return;var a=Kv(n.alternate,n,sn);if(a!==null){_t=a;return}if(n=n.sibling,n!==null){_t=n;return}_t=n=e}while(n!==null);ae===0&&(ae=5)}function mg(e,n){do{var a=Wv(e.alternate,e);if(a!==null){a.flags&=32767,_t=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){_t=e;return}_t=e=a}while(e!==null);ae=6,_t=null}function yg(e,n,a,c,f,m,v,_,M){e.cancelPendingCommit=null;do Zo();while(me!==0);if((Bt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(m=n.lanes|n.childLanes,m|=_c,zb(e,a,m,v,_,M),e===qt&&(_t=qt=null,xt=0),Zs=n,Ln=e,an=a,Ou=m,Nu=f,rg=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,l0(Ke,function(){return Eg(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=k.T,k.T=null,f=G.p,G.p=2,v=Bt,Bt|=4;try{Qv(e,n,a)}finally{Bt=v,G.p=f,k.T=c}}me=1,bg(),vg(),Ag()}}function bg(){if(me===1){me=0;var e=Ln,n=Zs,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=k.T,k.T=null;var c=G.p;G.p=2;var f=Bt;Bt|=4;try{Zp(n,e);var m=$u,v=sf(e.containerInfo),_=m.focusedElem,M=m.selectionRange;if(v!==_&&_&&_.ownerDocument&&nf(_.ownerDocument.documentElement,_)){if(M!==null&&vc(_)){var U=M.start,X=M.end;if(X===void 0&&(X=U),"selectionStart"in _)_.selectionStart=U,_.selectionEnd=Math.min(X,_.value.length);else{var K=_.ownerDocument||document,H=K&&K.defaultView||window;if(H.getSelection){var I=H.getSelection(),nt=_.textContent.length,pt=Math.min(M.start,nt),Ht=M.end===void 0?pt:Math.min(M.end,nt);!I.extend&&pt>Ht&&(v=Ht,Ht=pt,pt=v);var z=ef(_,pt),L=ef(_,Ht);if(z&&L&&(I.rangeCount!==1||I.anchorNode!==z.node||I.anchorOffset!==z.offset||I.focusNode!==L.node||I.focusOffset!==L.offset)){var F=K.createRange();F.setStart(z.node,z.offset),I.removeAllRanges(),pt>Ht?(I.addRange(F),I.extend(L.node,L.offset)):(F.setEnd(L.node,L.offset),I.addRange(F))}}}}for(K=[],I=_;I=I.parentNode;)I.nodeType===1&&K.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<K.length;_++){var $=K[_];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}ul=!!Yu,$u=Yu=null}finally{Bt=f,G.p=c,k.T=a}}e.current=n,me=2}}function vg(){if(me===2){me=0;var e=Ln,n=Zs,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=k.T,k.T=null;var c=G.p;G.p=2;var f=Bt;Bt|=4;try{Yp(e,n.alternate,n)}finally{Bt=f,G.p=c,k.T=a}}me=3}}function Ag(){if(me===4||me===3){me=0,Wl();var e=Ln,n=Zs,a=an,c=rg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?me=5:(me=0,Zs=Ln=null,Sg(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Dn=null),tc(a),n=n.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(Ca,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=k.T,f=G.p,G.p=2,k.T=null;try{for(var m=e.onRecoverableError,v=0;v<c.length;v++){var _=c[v];m(_.value,{componentStack:_.stack})}}finally{k.T=n,G.p=f}}(an&3)!==0&&Zo(),Ni(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===ku?lr++:(lr=0,ku=e):lr=0,cr(0)}}function Sg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ga(n)))}function Zo(){return bg(),vg(),Ag(),Eg()}function Eg(){if(me!==5)return!1;var e=Ln,n=Ou;Ou=0;var a=tc(an),c=k.T,f=G.p;try{G.p=32>a?32:a,k.T=null,a=Nu,Nu=null;var m=Ln,v=an;if(me=0,Zs=Ln=null,an=0,(Bt&6)!==0)throw Error(s(331));var _=Bt;if(Bt|=4,ng(m.current),tg(m,m.current,v,a),Bt=_,cr(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(Ca,m)}catch{}return!0}finally{G.p=f,k.T=c,Sg(e,n)}}function wg(e,n,a){n=di(a,n),n=du(e.stateNode,n,2),e=_n(e,n,2),e!==null&&(Ma(e,2),Ni(e))}function jt(e,n,a){if(e.tag===3)wg(e,e,a);else for(;n!==null;){if(n.tag===3){wg(n,e,a);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Dn===null||!Dn.has(c))){e=di(a,e),a=_p(2),c=_n(n,a,2),c!==null&&(Tp(a,c,n,e),Ma(c,2),Ni(c));break}}n=n.return}}function zu(e,n,a){var c=e.pingCache;if(c===null){c=e.pingCache=new t0;var f=new Set;c.set(n,f)}else f=c.get(n),f===void 0&&(f=new Set,c.set(n,f));f.has(a)||(Mu=!0,f.add(a),e=a0.bind(null,e,n,a),n.then(e,e))}function a0(e,n,a){var c=e.pingCache;c!==null&&c.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,qt===e&&(xt&a)===a&&(ae===4||ae===3&&(xt&62914560)===xt&&300>ke()-Xo?(Bt&2)===0&&Js(e,0):Du|=a,Qs===xt&&(Qs=0)),Ni(e)}function _g(e,n){n===0&&(n=yd()),e=Wn(e,n),e!==null&&(Ma(e,n),Ni(e))}function r0(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),_g(e,a)}function o0(e,n){var a=0;switch(e.tag){case 31:case 13:var c=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(n),_g(e,a)}function l0(e,n){return Vn(e,n)}var Jo=null,ea=null,ju=!1,tl=!1,Fu=!1,Nn=0;function Ni(e){e!==ea&&e.next===null&&(ea===null?Jo=ea=e:ea=ea.next=e),tl=!0,ju||(ju=!0,u0())}function cr(e,n){if(!Fu&&tl){Fu=!0;do for(var a=!1,c=Jo;c!==null;){if(e!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var v=c.suspendedLanes,_=c.pingedLanes;m=(1<<31-Qe(42|e)+1)-1,m&=f&~(v&~_),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Rg(c,m))}else m=xt,m=no(c,c===qt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Ra(c,m)||(a=!0,Rg(c,m));c=c.next}while(a);Fu=!1}}function c0(){Tg()}function Tg(){tl=ju=!1;var e=0;Nn!==0&&A0()&&(e=Nn);for(var n=ke(),a=null,c=Jo;c!==null;){var f=c.next,m=xg(c,n);m===0?(c.next=null,a===null?Jo=f:a.next=f,f===null&&(ea=a)):(a=c,(e!==0||(m&3)!==0)&&(tl=!0)),c=f}me!==0&&me!==5||cr(e),Nn!==0&&(Nn=0)}function xg(e,n){for(var a=e.suspendedLanes,c=e.pingedLanes,f=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var v=31-Qe(m),_=1<<v,M=f[v];M===-1?((_&a)===0||(_&c)!==0)&&(f[v]=Pb(_,n)):M<=n&&(e.expiredLanes|=_),m&=~_}if(n=qt,a=xt,a=no(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,a===0||e===n&&(zt===2||zt===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&Ta(c),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ra(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(c!==null&&Ta(c),tc(a)){case 2:case 8:a=Jr;break;case 32:a=Ke;break;case 268435456:a=wi;break;default:a=Ke}return c=Cg.bind(null,e),a=Vn(a,c),e.callbackPriority=n,e.callbackNode=a,n}return c!==null&&c!==null&&Ta(c),e.callbackPriority=2,e.callbackNode=null,2}function Cg(e,n){if(me!==0&&me!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Zo()&&e.callbackNode!==a)return null;var c=xt;return c=no(e,e===qt?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(lg(e,c,n),xg(e,ke()),e.callbackNode!=null&&e.callbackNode===a?Cg.bind(null,e):null)}function Rg(e,n){if(Zo())return null;lg(e,n,!0)}function u0(){E0(function(){(Bt&6)!==0?Vn(Zr,c0):Tg()})}function Uu(){if(Nn===0){var e=Us;e===0&&(e=to,to<<=1,(to&261888)===0&&(to=256)),Nn=e}return Nn}function Mg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:oo(""+e)}function Dg(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function h0(e,n,a,c,f){if(n==="submit"&&a&&a.stateNode===f){var m=Mg((f[je]||null).action),v=c.submitter;v&&(n=(n=v[je]||null)?Mg(n.formAction):v.getAttribute("formAction"),n!==null&&(m=n,v=null));var _=new ho("action","action",null,c,f);e.push({event:_,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Nn!==0){var M=v?Dg(f,v):new FormData(f);ru(a,{pending:!0,data:M,method:f.method,action:m},null,M)}}else typeof m=="function"&&(_.preventDefault(),M=v?Dg(f,v):new FormData(f),ru(a,{pending:!0,data:M,method:f.method,action:m},m,M))},currentTarget:f}]})}}for(var Hu=0;Hu<wc.length;Hu++){var Iu=wc[Hu],d0=Iu.toLowerCase(),f0=Iu[0].toUpperCase()+Iu.slice(1);_i(d0,"on"+f0)}_i(of,"onAnimationEnd"),_i(lf,"onAnimationIteration"),_i(cf,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(Mv,"onTransitionRun"),_i(Dv,"onTransitionStart"),_i(Lv,"onTransitionCancel"),_i(uf,"onTransitionEnd"),xs("onMouseEnter",["mouseout","mouseover"]),xs("onMouseLeave",["mouseout","mouseover"]),xs("onPointerEnter",["pointerout","pointerover"]),xs("onPointerLeave",["pointerout","pointerover"]),Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ur="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ur));function Lg(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var c=e[a],f=c.event;c=c.listeners;t:{var m=void 0;if(n)for(var v=c.length-1;0<=v;v--){var _=c[v],M=_.instance,U=_.currentTarget;if(_=_.listener,M!==m&&f.isPropagationStopped())break t;m=_,f.currentTarget=U;try{m(f)}catch(X){go(X)}f.currentTarget=null,m=M}else for(v=0;v<c.length;v++){if(_=c[v],M=_.instance,U=_.currentTarget,_=_.listener,M!==m&&f.isPropagationStopped())break t;m=_,f.currentTarget=U;try{m(f)}catch(X){go(X)}f.currentTarget=null,m=M}}}}function Tt(e,n){var a=n[ec];a===void 0&&(a=n[ec]=new Set);var c=e+"__bubble";a.has(c)||(Og(n,e,2,!1),a.add(c))}function Gu(e,n,a){var c=0;n&&(c|=4),Og(a,e,c,n)}var el="_reactListening"+Math.random().toString(36).slice(2);function Vu(e){if(!e[el]){e[el]=!0,_d.forEach(function(a){a!=="selectionchange"&&(p0.has(a)||Gu(a,!1,e),Gu(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[el]||(n[el]=!0,Gu("selectionchange",!1,n))}}function Og(e,n,a,c){switch(om(n)){case 2:var f=I0;break;case 8:f=G0;break;default:f=ah}a=f.bind(null,n,a,e),f=void 0,!uc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),c?f!==void 0?e.addEventListener(n,a,{capture:!0,passive:f}):e.addEventListener(n,a,!0):f!==void 0?e.addEventListener(n,a,{passive:f}):e.addEventListener(n,a,!1)}function qu(e,n,a,c,f){var m=c;if((n&1)===0&&(n&2)===0&&c!==null)t:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var _=c.stateNode.containerInfo;if(_===f)break;if(v===4)for(v=c.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;_!==null;){if(v=ws(_),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){c=m=v;continue t}_=_.parentNode}}c=c.return}Pd(function(){var U=m,X=lc(a),K=[];t:{var H=hf.get(e);if(H!==void 0){var I=ho,nt=e;switch(e){case"keypress":if(co(a)===0)break t;case"keydown":case"keyup":I=ov;break;case"focusin":nt="focus",I=pc;break;case"focusout":nt="blur",I=pc;break;case"beforeblur":case"afterblur":I=pc;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Fd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=Kb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=uv;break;case of:case lf:case cf:I=Zb;break;case uf:I=dv;break;case"scroll":case"scrollend":I=Yb;break;case"wheel":I=pv;break;case"copy":case"cut":case"paste":I=tv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Hd;break;case"toggle":case"beforetoggle":I=mv}var pt=(n&4)!==0,Ht=!pt&&(e==="scroll"||e==="scrollend"),z=pt?H!==null?H+"Capture":null:H;pt=[];for(var L=U,F;L!==null;){var $=L;if(F=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||F===null||z===null||($=Oa(L,z),$!=null&&pt.push(hr(L,$,F))),Ht)break;L=L.return}0<pt.length&&(H=new I(H,nt,null,a,X),K.push({event:H,listeners:pt}))}}if((n&7)===0){t:{if(H=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",H&&a!==oc&&(nt=a.relatedTarget||a.fromElement)&&(ws(nt)||nt[Es]))break t;if((I||H)&&(H=X.window===X?X:(H=X.ownerDocument)?H.defaultView||H.parentWindow:window,I?(nt=a.relatedTarget||a.toElement,I=U,nt=nt?ws(nt):null,nt!==null&&(Ht=o(nt),pt=nt.tag,nt!==Ht||pt!==5&&pt!==27&&pt!==6)&&(nt=null)):(I=null,nt=U),I!==nt)){if(pt=Fd,$="onMouseLeave",z="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(pt=Hd,$="onPointerLeave",z="onPointerEnter",L="pointer"),Ht=I==null?H:La(I),F=nt==null?H:La(nt),H=new pt($,L+"leave",I,a,X),H.target=Ht,H.relatedTarget=F,$=null,ws(X)===U&&(pt=new pt(z,L+"enter",nt,a,X),pt.target=F,pt.relatedTarget=Ht,$=pt),Ht=$,I&&nt)e:{for(pt=g0,z=I,L=nt,F=0,$=z;$;$=pt($))F++;$=0;for(var ct=L;ct;ct=pt(ct))$++;for(;0<F-$;)z=pt(z),F--;for(;0<$-F;)L=pt(L),$--;for(;F--;){if(z===L||L!==null&&z===L.alternate){pt=z;break e}z=pt(z),L=pt(L)}pt=null}else pt=null;I!==null&&Ng(K,H,I,pt,!1),nt!==null&&Ht!==null&&Ng(K,Ht,nt,pt,!0)}}t:{if(H=U?La(U):window,I=H.nodeName&&H.nodeName.toLowerCase(),I==="select"||I==="input"&&H.type==="file")var Nt=Kd;else if(Yd(H))if(Wd)Nt=xv;else{Nt=_v;var at=wv}else I=H.nodeName,!I||I.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?U&&rc(U.elementType)&&(Nt=Kd):Nt=Tv;if(Nt&&(Nt=Nt(e,U))){$d(K,Nt,a,X);break t}at&&at(e,H,U),e==="focusout"&&U&&H.type==="number"&&U.memoizedProps.value!=null&&ac(H,"number",H.value)}switch(at=U?La(U):window,e){case"focusin":(Yd(at)||at.contentEditable==="true")&&(Os=at,Ac=U,Ua=null);break;case"focusout":Ua=Ac=Os=null;break;case"mousedown":Sc=!0;break;case"contextmenu":case"mouseup":case"dragend":Sc=!1,af(K,a,X);break;case"selectionchange":if(Rv)break;case"keydown":case"keyup":af(K,a,X)}var Et;if(mc)t:{switch(e){case"compositionstart":var Ct="onCompositionStart";break t;case"compositionend":Ct="onCompositionEnd";break t;case"compositionupdate":Ct="onCompositionUpdate";break t}Ct=void 0}else Ls?qd(e,a)&&(Ct="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ct="onCompositionStart");Ct&&(Id&&a.locale!=="ko"&&(Ls||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Ls&&(Et=zd()):(yn=X,hc="value"in yn?yn.value:yn.textContent,Ls=!0)),at=il(U,Ct),0<at.length&&(Ct=new Ud(Ct,e,null,a,X),K.push({event:Ct,listeners:at}),Et?Ct.data=Et:(Et=Xd(a),Et!==null&&(Ct.data=Et)))),(Et=bv?vv(e,a):Av(e,a))&&(Ct=il(U,"onBeforeInput"),0<Ct.length&&(at=new Ud("onBeforeInput","beforeinput",null,a,X),K.push({event:at,listeners:Ct}),at.data=Et)),h0(K,e,U,a,X)}Lg(K,n)})}function hr(e,n,a){return{instance:e,listener:n,currentTarget:a}}function il(e,n){for(var a=n+"Capture",c=[];e!==null;){var f=e,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Oa(e,a),f!=null&&c.unshift(hr(e,f,m)),f=Oa(e,n),f!=null&&c.push(hr(e,f,m))),e.tag===3)return c;e=e.return}return[]}function g0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ng(e,n,a,c,f){for(var m=n._reactName,v=[];a!==null&&a!==c;){var _=a,M=_.alternate,U=_.stateNode;if(_=_.tag,M!==null&&M===c)break;_!==5&&_!==26&&_!==27||U===null||(M=U,f?(U=Oa(a,m),U!=null&&v.unshift(hr(a,U,M))):f||(U=Oa(a,m),U!=null&&v.push(hr(a,U,M)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var m0=/\r\n?/g,y0=/\u0000|\uFFFD/g;function kg(e){return(typeof e=="string"?e:""+e).replace(m0,`
`).replace(y0,"")}function Bg(e,n){return n=kg(n),kg(e)===n}function Ut(e,n,a,c,f,m){switch(a){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||Rs(e,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&Rs(e,""+c);break;case"className":ao(e,"class",c);break;case"tabIndex":ao(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ao(e,a,c);break;case"style":kd(e,c,m);break;case"data":if(n!=="object"){ao(e,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=oo(""+c),e.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&Ut(e,n,"name",f.name,f,null),Ut(e,n,"formEncType",f.formEncType,f,null),Ut(e,n,"formMethod",f.formMethod,f,null),Ut(e,n,"formTarget",f.formTarget,f,null)):(Ut(e,n,"encType",f.encType,f,null),Ut(e,n,"method",f.method,f,null),Ut(e,n,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=oo(""+c),e.setAttribute(a,c);break;case"onClick":c!=null&&(e.onclick=Gi);break;case"onScroll":c!=null&&Tt("scroll",e);break;case"onScrollEnd":c!=null&&Tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}a=oo(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""+c):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":c===!0?e.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,c):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(a,c):e.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(a):e.setAttribute(a,c);break;case"popover":Tt("beforetoggle",e),Tt("toggle",e),so(e,"popover",c);break;case"xlinkActuate":Ii(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ii(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ii(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ii(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ii(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ii(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ii(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ii(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ii(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":so(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=qb.get(a)||a,so(e,a,c))}}function Xu(e,n,a,c,f,m){switch(a){case"style":kd(e,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof c=="string"?Rs(e,c):(typeof c=="number"||typeof c=="bigint")&&Rs(e,""+c);break;case"onScroll":c!=null&&Tt("scroll",e);break;case"onScrollEnd":c!=null&&Tt("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Td.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),n=a.slice(2,f?a.length-7:void 0),m=e[je]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(n,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,c,f);break t}a in e?e[a]=c:c===!0?e.setAttribute(a,""):so(e,a,c)}}}function Ce(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",e),Tt("load",e);var c=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Ut(e,n,m,v,a,null)}}f&&Ut(e,n,"srcSet",a.srcSet,a,null),c&&Ut(e,n,"src",a.src,a,null);return;case"input":Tt("invalid",e);var _=m=v=f=null,M=null,U=null;for(c in a)if(a.hasOwnProperty(c)){var X=a[c];if(X!=null)switch(c){case"name":f=X;break;case"type":v=X;break;case"checked":M=X;break;case"defaultChecked":U=X;break;case"value":m=X;break;case"defaultValue":_=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,n));break;default:Ut(e,n,c,X,a,null)}}Dd(e,m,_,M,U,v,f,!1);return;case"select":Tt("invalid",e),c=v=m=null;for(f in a)if(a.hasOwnProperty(f)&&(_=a[f],_!=null))switch(f){case"value":m=_;break;case"defaultValue":v=_;break;case"multiple":c=_;default:Ut(e,n,f,_,a,null)}n=m,a=v,e.multiple=!!c,n!=null?Cs(e,!!c,n,!1):a!=null&&Cs(e,!!c,a,!0);return;case"textarea":Tt("invalid",e),m=f=c=null;for(v in a)if(a.hasOwnProperty(v)&&(_=a[v],_!=null))switch(v){case"value":c=_;break;case"defaultValue":f=_;break;case"children":m=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:Ut(e,n,v,_,a,null)}Od(e,c,f,m);return;case"option":for(M in a)a.hasOwnProperty(M)&&(c=a[M],c!=null)&&(M==="selected"?e.selected=c&&typeof c!="function"&&typeof c!="symbol":Ut(e,n,M,c,a,null));return;case"dialog":Tt("beforetoggle",e),Tt("toggle",e),Tt("cancel",e),Tt("close",e);break;case"iframe":case"object":Tt("load",e);break;case"video":case"audio":for(c=0;c<ur.length;c++)Tt(ur[c],e);break;case"image":Tt("error",e),Tt("load",e);break;case"details":Tt("toggle",e);break;case"embed":case"source":case"link":Tt("error",e),Tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(c=a[U],c!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Ut(e,n,U,c,a,null)}return;default:if(rc(n)){for(X in a)a.hasOwnProperty(X)&&(c=a[X],c!==void 0&&Xu(e,n,X,c,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(c=a[_],c!=null&&Ut(e,n,_,c,a,null))}function b0(e,n,a,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,_=null,M=null,U=null,X=null;for(I in a){var K=a[I];if(a.hasOwnProperty(I)&&K!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":M=K;default:c.hasOwnProperty(I)||Ut(e,n,I,null,c,K)}}for(var H in c){var I=c[H];if(K=a[H],c.hasOwnProperty(H)&&(I!=null||K!=null))switch(H){case"type":m=I;break;case"name":f=I;break;case"checked":U=I;break;case"defaultChecked":X=I;break;case"value":v=I;break;case"defaultValue":_=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(137,n));break;default:I!==K&&Ut(e,n,H,I,c,K)}}sc(e,v,_,M,U,X,m,f);return;case"select":I=v=_=H=null;for(m in a)if(M=a[m],a.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":I=M;default:c.hasOwnProperty(m)||Ut(e,n,m,null,c,M)}for(f in c)if(m=c[f],M=a[f],c.hasOwnProperty(f)&&(m!=null||M!=null))switch(f){case"value":H=m;break;case"defaultValue":_=m;break;case"multiple":v=m;default:m!==M&&Ut(e,n,f,m,c,M)}n=_,a=v,c=I,H!=null?Cs(e,!!a,H,!1):!!c!=!!a&&(n!=null?Cs(e,!!a,n,!0):Cs(e,!!a,a?[]:"",!1));return;case"textarea":I=H=null;for(_ in a)if(f=a[_],a.hasOwnProperty(_)&&f!=null&&!c.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Ut(e,n,_,null,c,f)}for(v in c)if(f=c[v],m=a[v],c.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":H=f;break;case"defaultValue":I=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&Ut(e,n,v,f,c,m)}Ld(e,H,I);return;case"option":for(var nt in a)H=a[nt],a.hasOwnProperty(nt)&&H!=null&&!c.hasOwnProperty(nt)&&(nt==="selected"?e.selected=!1:Ut(e,n,nt,null,c,H));for(M in c)H=c[M],I=a[M],c.hasOwnProperty(M)&&H!==I&&(H!=null||I!=null)&&(M==="selected"?e.selected=H&&typeof H!="function"&&typeof H!="symbol":Ut(e,n,M,H,c,I));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in a)H=a[pt],a.hasOwnProperty(pt)&&H!=null&&!c.hasOwnProperty(pt)&&Ut(e,n,pt,null,c,H);for(U in c)if(H=c[U],I=a[U],c.hasOwnProperty(U)&&H!==I&&(H!=null||I!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,n));break;default:Ut(e,n,U,H,c,I)}return;default:if(rc(n)){for(var Ht in a)H=a[Ht],a.hasOwnProperty(Ht)&&H!==void 0&&!c.hasOwnProperty(Ht)&&Xu(e,n,Ht,void 0,c,H);for(X in c)H=c[X],I=a[X],!c.hasOwnProperty(X)||H===I||H===void 0&&I===void 0||Xu(e,n,X,H,c,I);return}}for(var z in a)H=a[z],a.hasOwnProperty(z)&&H!=null&&!c.hasOwnProperty(z)&&Ut(e,n,z,null,c,H);for(K in c)H=c[K],I=a[K],!c.hasOwnProperty(K)||H===I||H==null&&I==null||Ut(e,n,K,H,c,I)}function Pg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function v0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var f=a[c],m=f.transferSize,v=f.initiatorType,_=f.duration;if(m&&_&&Pg(v)){for(v=0,_=f.responseEnd,c+=1;c<a.length;c++){var M=a[c],U=M.startTime;if(U>_)break;var X=M.transferSize,K=M.initiatorType;X&&Pg(K)&&(M=M.responseEnd,v+=X*(M<_?1:(_-U)/(M-U)))}if(--c,n+=8*(m+v)/(f.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Yu=null,$u=null;function nl(e){return e.nodeType===9?e:e.ownerDocument}function zg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Ku(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Wu=null;function A0(){var e=window.event;return e&&e.type==="popstate"?e===Wu?!1:(Wu=e,!0):(Wu=null,!1)}var Fg=typeof setTimeout=="function"?setTimeout:void 0,S0=typeof clearTimeout=="function"?clearTimeout:void 0,Ug=typeof Promise=="function"?Promise:void 0,E0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ug<"u"?function(e){return Ug.resolve(null).then(e).catch(w0)}:Fg;function w0(e){setTimeout(function(){throw e})}function kn(e){return e==="head"}function Hg(e,n){var a=n,c=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(c===0){e.removeChild(f),aa(n);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")dr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,dr(a);for(var m=a.firstChild;m;){var v=m.nextSibling,_=m.nodeName;m[Da]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&dr(e.ownerDocument.body);a=f}while(a);aa(n)}function Ig(e,n){var a=e;e=0;do{var c=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=c}while(a)}function Qu(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Qu(a),ic(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function _0(e,n,a,c){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[Da])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=yi(e.nextSibling),e===null)break}return null}function T0(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=yi(e.nextSibling),e===null))return null;return e}function Gg(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=yi(e.nextSibling),e===null))return null;return e}function Zu(e){return e.data==="$?"||e.data==="$~"}function Ju(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function x0(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var c=function(){n(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function yi(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var th=null;function Vg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return yi(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function qg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function Xg(e,n,a){switch(n=nl(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function dr(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);ic(e)}var bi=new Map,Yg=new Set;function sl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var rn=G.d;G.d={f:C0,r:R0,D:M0,C:D0,L:L0,m:O0,X:k0,S:N0,M:B0};function C0(){var e=rn.f(),n=Ko();return e||n}function R0(e){var n=_s(e);n!==null&&n.tag===5&&n.type==="form"?up(n):rn.r(e)}var ia=typeof document>"u"?null:document;function $g(e,n,a){var c=ia;if(c&&typeof n=="string"&&n){var f=ui(n);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Yg.has(f)||(Yg.add(f),e={rel:e,crossOrigin:a,href:n},c.querySelector(f)===null&&(n=c.createElement("link"),Ce(n,"link",e),be(n),c.head.appendChild(n)))}}function M0(e){rn.D(e),$g("dns-prefetch",e,null)}function D0(e,n){rn.C(e,n),$g("preconnect",e,n)}function L0(e,n,a){rn.L(e,n,a);var c=ia;if(c&&e&&n){var f='link[rel="preload"][as="'+ui(n)+'"]';n==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+ui(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+ui(a.imageSizes)+'"]')):f+='[href="'+ui(e)+'"]';var m=f;switch(n){case"style":m=na(e);break;case"script":m=sa(e)}bi.has(m)||(e=y({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),bi.set(m,e),c.querySelector(f)!==null||n==="style"&&c.querySelector(fr(m))||n==="script"&&c.querySelector(pr(m))||(n=c.createElement("link"),Ce(n,"link",e),be(n),c.head.appendChild(n)))}}function O0(e,n){rn.m(e,n);var a=ia;if(a&&e){var c=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+ui(c)+'"][href="'+ui(e)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=sa(e)}if(!bi.has(m)&&(e=y({rel:"modulepreload",href:e},n),bi.set(m,e),a.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(pr(m)))return}c=a.createElement("link"),Ce(c,"link",e),be(c),a.head.appendChild(c)}}}function N0(e,n,a){rn.S(e,n,a);var c=ia;if(c&&e){var f=Ts(c).hoistableStyles,m=na(e);n=n||"default";var v=f.get(m);if(!v){var _={loading:0,preload:null};if(v=c.querySelector(fr(m)))_.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":n},a),(a=bi.get(m))&&eh(e,a);var M=v=c.createElement("link");be(M),Ce(M,"link",e),M._p=new Promise(function(U,X){M.onload=U,M.onerror=X}),M.addEventListener("load",function(){_.loading|=1}),M.addEventListener("error",function(){_.loading|=2}),_.loading|=4,al(v,n,c)}v={type:"stylesheet",instance:v,count:1,state:_},f.set(m,v)}}}function k0(e,n){rn.X(e,n);var a=ia;if(a&&e){var c=Ts(a).hoistableScripts,f=sa(e),m=c.get(f);m||(m=a.querySelector(pr(f)),m||(e=y({src:e,async:!0},n),(n=bi.get(f))&&ih(e,n),m=a.createElement("script"),be(m),Ce(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function B0(e,n){rn.M(e,n);var a=ia;if(a&&e){var c=Ts(a).hoistableScripts,f=sa(e),m=c.get(f);m||(m=a.querySelector(pr(f)),m||(e=y({src:e,async:!0,type:"module"},n),(n=bi.get(f))&&ih(e,n),m=a.createElement("script"),be(m),Ce(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function Kg(e,n,a,c){var f=(f=dt.current)?sl(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=na(a.href),a=Ts(f).hoistableStyles,c=a.get(n),c||(c={type:"style",instance:null,count:0,state:null},a.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=na(a.href);var m=Ts(f).hoistableStyles,v=m.get(e);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,v),(m=f.querySelector(fr(e)))&&!m._p&&(v.instance=m,v.state.loading=5),bi.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},bi.set(e,a),m||P0(f,e,a,v.state))),n&&c===null)throw Error(s(528,""));return v}if(n&&c!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=sa(a),a=Ts(f).hoistableScripts,c=a.get(n),c||(c={type:"script",instance:null,count:0,state:null},a.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function na(e){return'href="'+ui(e)+'"'}function fr(e){return'link[rel="stylesheet"]['+e+"]"}function Wg(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function P0(e,n,a,c){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=e.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),Ce(n,"link",a),be(n),e.head.appendChild(n))}function sa(e){return'[src="'+ui(e)+'"]'}function pr(e){return"script[async]"+e}function Qg(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var c=e.querySelector('style[data-href~="'+ui(a.href)+'"]');if(c)return n.instance=c,be(c),c;var f=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),be(c),Ce(c,"style",f),al(c,a.precedence,e),n.instance=c;case"stylesheet":f=na(a.href);var m=e.querySelector(fr(f));if(m)return n.state.loading|=4,n.instance=m,be(m),m;c=Wg(a),(f=bi.get(f))&&eh(c,f),m=(e.ownerDocument||e).createElement("link"),be(m);var v=m;return v._p=new Promise(function(_,M){v.onload=_,v.onerror=M}),Ce(m,"link",c),n.state.loading|=4,al(m,a.precedence,e),n.instance=m;case"script":return m=sa(a.src),(f=e.querySelector(pr(m)))?(n.instance=f,be(f),f):(c=a,(f=bi.get(m))&&(c=y({},a),ih(c,f)),e=e.ownerDocument||e,f=e.createElement("script"),be(f),Ce(f,"link",c),e.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,al(c,a.precedence,e));return n.instance}function al(e,n,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,v=0;v<c.length;v++){var _=c[v];if(_.dataset.precedence===n)m=_;else if(m!==f)break}m?m.parentNode.insertBefore(e,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function eh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function ih(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var rl=null;function Zg(e,n,a){if(rl===null){var c=new Map,f=rl=new Map;f.set(a,c)}else f=rl,c=f.get(a),c||(c=new Map,f.set(a,c));if(c.has(e))return c;for(c.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var m=a[f];if(!(m[Da]||m[we]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(n)||"";v=e+v;var _=c.get(v);_?_.push(m):c.set(v,[m])}}return c}function Jg(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function z0(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function tm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function j0(e,n,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=na(c.href),m=n.querySelector(fr(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=ol.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=m,be(m);return}m=n.ownerDocument||n,c=Wg(c),(f=bi.get(f))&&eh(c,f),m=m.createElement("link"),be(m);var v=m;v._p=new Promise(function(_,M){v.onload=_,v.onerror=M}),Ce(m,"link",c),a.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=ol.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var nh=0;function F0(e,n){return e.stylesheets&&e.count===0&&cl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var c=setTimeout(function(){if(e.stylesheets&&cl(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+n);0<e.imgBytes&&nh===0&&(nh=62500*v0());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&cl(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>nh?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function ol(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ll=null;function cl(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ll=new Map,n.forEach(U0,e),ll=null,ol.call(e))}function U0(e,n){if(!(n.state.loading&4)){var a=ll.get(e);if(a)var c=a.get(null);else{a=new Map,ll.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),c=v)}c&&a.set(null,c)}f=n.instance,v=f.getAttribute("data-precedence"),m=a.get(v)||c,m===c&&a.set(null,f),a.set(v,f),this.count++,c=ol.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),n.state.loading|=4}}var gr={$$typeof:C,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function H0(e,n,a,c,f,m,v,_,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zl(0),this.hiddenUpdates=Zl(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function em(e,n,a,c,f,m,v,_,M,U,X,K){return e=new H0(e,n,a,v,M,U,X,K,_),n=1,m===!0&&(n|=24),m=Je(3,null,null,n),e.current=m,m.stateNode=e,n=Pc(),n.refCount++,e.pooledCache=n,n.refCount++,m.memoizedState={element:c,isDehydrated:a,cache:n},Uc(m),e}function im(e){return e?(e=Bs,e):Bs}function nm(e,n,a,c,f,m){f=im(f),c.context===null?c.context=f:c.pendingContext=f,c=wn(n),c.payload={element:a},m=m===void 0?null:m,m!==null&&(c.callback=m),a=_n(e,c,n),a!==null&&(Ve(a,e,n),Ya(a,e,n))}function sm(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function sh(e,n){sm(e,n),(e=e.alternate)&&sm(e,n)}function am(e){if(e.tag===13||e.tag===31){var n=Wn(e,67108864);n!==null&&Ve(n,e,67108864),sh(e,67108864)}}function rm(e){if(e.tag===13||e.tag===31){var n=si();n=Jl(n);var a=Wn(e,n);a!==null&&Ve(a,e,n),sh(e,n)}}var ul=!0;function I0(e,n,a,c){var f=k.T;k.T=null;var m=G.p;try{G.p=2,ah(e,n,a,c)}finally{G.p=m,k.T=f}}function G0(e,n,a,c){var f=k.T;k.T=null;var m=G.p;try{G.p=8,ah(e,n,a,c)}finally{G.p=m,k.T=f}}function ah(e,n,a,c){if(ul){var f=rh(c);if(f===null)qu(e,n,c,hl,a),lm(e,c);else if(q0(f,e,n,a,c))c.stopPropagation();else if(lm(e,c),n&4&&-1<V0.indexOf(e)){for(;f!==null;){var m=_s(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=qn(m.pendingLanes);if(v!==0){var _=m;for(_.pendingLanes|=2,_.entangledLanes|=2;v;){var M=1<<31-Qe(v);_.entanglements[1]|=M,v&=~M}Ni(m),(Bt&6)===0&&(Yo=ke()+500,cr(0))}}break;case 31:case 13:_=Wn(m,2),_!==null&&Ve(_,m,2),Ko(),sh(m,2)}if(m=rh(c),m===null&&qu(e,n,c,hl,a),m===f)break;f=m}f!==null&&c.stopPropagation()}else qu(e,n,c,null,a)}}function rh(e){return e=lc(e),oh(e)}var hl=null;function oh(e){if(hl=null,e=ws(e),e!==null){var n=o(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=l(n),e!==null)return e;e=null}else if(a===31){if(e=u(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return hl=e,null}function om(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ql()){case Zr:return 2;case Jr:return 8;case Ke:case pn:return 32;case wi:return 268435456;default:return 32}default:return 32}}var lh=!1,Bn=null,Pn=null,zn=null,mr=new Map,yr=new Map,jn=[],V0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lm(e,n){switch(e){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":mr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":yr.delete(n.pointerId)}}function br(e,n,a,c,f,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},n!==null&&(n=_s(n),n!==null&&am(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function q0(e,n,a,c,f){switch(n){case"focusin":return Bn=br(Bn,e,n,a,c,f),!0;case"dragenter":return Pn=br(Pn,e,n,a,c,f),!0;case"mouseover":return zn=br(zn,e,n,a,c,f),!0;case"pointerover":var m=f.pointerId;return mr.set(m,br(mr.get(m)||null,e,n,a,c,f)),!0;case"gotpointercapture":return m=f.pointerId,yr.set(m,br(yr.get(m)||null,e,n,a,c,f)),!0}return!1}function cm(e){var n=ws(e.target);if(n!==null){var a=o(n);if(a!==null){if(n=a.tag,n===13){if(n=l(a),n!==null){e.blockedOn=n,Ed(e.priority,function(){rm(a)});return}}else if(n===31){if(n=u(a),n!==null){e.blockedOn=n,Ed(e.priority,function(){rm(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function dl(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=rh(e.nativeEvent);if(a===null){a=e.nativeEvent;var c=new a.constructor(a.type,a);oc=c,a.target.dispatchEvent(c),oc=null}else return n=_s(a),n!==null&&am(n),e.blockedOn=a,!1;n.shift()}return!0}function um(e,n,a){dl(e)&&a.delete(n)}function X0(){lh=!1,Bn!==null&&dl(Bn)&&(Bn=null),Pn!==null&&dl(Pn)&&(Pn=null),zn!==null&&dl(zn)&&(zn=null),mr.forEach(um),yr.forEach(um)}function fl(e,n){e.blockedOn===n&&(e.blockedOn=null,lh||(lh=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,X0)))}var pl=null;function hm(e){pl!==e&&(pl=e,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){pl===e&&(pl=null);for(var n=0;n<e.length;n+=3){var a=e[n],c=e[n+1],f=e[n+2];if(typeof c!="function"){if(oh(c||a)===null)continue;break}var m=_s(a);m!==null&&(e.splice(n,3),n-=3,ru(m,{pending:!0,data:f,method:a.method,action:c},c,f))}}))}function aa(e){function n(M){return fl(M,e)}Bn!==null&&fl(Bn,e),Pn!==null&&fl(Pn,e),zn!==null&&fl(zn,e),mr.forEach(n),yr.forEach(n);for(var a=0;a<jn.length;a++){var c=jn[a];c.blockedOn===e&&(c.blockedOn=null)}for(;0<jn.length&&(a=jn[0],a.blockedOn===null);)cm(a),a.blockedOn===null&&jn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var f=a[c],m=a[c+1],v=f[je]||null;if(typeof m=="function")v||hm(a);else if(v){var _=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[je]||null)_=v.formAction;else if(oh(f)!==null)continue}else _=v.action;typeof _=="function"?a[c+1]=_:(a.splice(c,3),c-=3),hm(a)}}}function dm(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function ch(e){this._internalRoot=e}gl.prototype.render=ch.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,c=si();nm(a,c,e,n,null,null)},gl.prototype.unmount=ch.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;nm(e.current,2,null,e,null,null),Ko(),n[Es]=null}};function gl(e){this._internalRoot=e}gl.prototype.unstable_scheduleHydration=function(e){if(e){var n=Sd();e={blockedOn:null,target:e,priority:n};for(var a=0;a<jn.length&&n!==0&&n<jn[a].priority;a++);jn.splice(a,0,e),a===0&&cm(e)}};var fm=t.version;if(fm!=="19.2.3")throw Error(s(527,fm,"19.2.3"));G.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(n),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var Y0={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ml.isDisabled&&ml.supportsFiber)try{Ca=ml.inject(Y0),We=ml}catch{}}return Ar.createRoot=function(e,n){if(!r(e))throw Error(s(299));var a=!1,c="",f=Ap,m=Sp,v=Ep;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=em(e,1,!1,null,null,a,c,null,f,m,v,dm),e[Es]=n.current,Vu(e),new ch(n)},Ar.hydrateRoot=function(e,n,a){if(!r(e))throw Error(s(299));var c=!1,f="",m=Ap,v=Sp,_=Ep,M=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),n=em(e,1,!0,n,a??null,c,f,M,m,v,_,dm),n.context=im(null),a=n.current,c=si(),c=Jl(c),f=wn(c),f.callback=null,_n(a,f,c),a=c,n.current.lanes=a,Ma(n,a),Ni(n),e[Es]=n.current,Vu(e),new gl(n)},Ar.version="19.2.3",Ar}var Tm;function sA(){if(Tm)return fh.exports;Tm=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),fh.exports=nA(),fh.exports}var aA=sA();var xm="popstate";function rA(h={}){function t(s,r){let{pathname:o,search:l,hash:u}=s.location;return Mh("",{pathname:o,search:l,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function i(s,r){return typeof r=="string"?r:Or(r)}return lA(t,i,null,h)}function ie(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function Ri(h,t){if(!h){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oA(){return Math.random().toString(36).substring(2,10)}function Cm(h,t){return{usr:h.state,key:h.key,idx:t}}function Mh(h,t,i=null,s){return{pathname:typeof h=="string"?h:h.pathname,search:"",hash:"",...typeof t=="string"?Aa(t):t,state:i,key:t&&t.key||s||oA()}}function Or({pathname:h="/",search:t="",hash:i=""}){return t&&t!=="?"&&(h+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(h+=i.charAt(0)==="#"?i:"#"+i),h}function Aa(h){let t={};if(h){let i=h.indexOf("#");i>=0&&(t.hash=h.substring(i),h=h.substring(0,i));let s=h.indexOf("?");s>=0&&(t.search=h.substring(s),h=h.substring(0,s)),h&&(t.pathname=h)}return t}function lA(h,t,i,s={}){let{window:r=document.defaultView,v5Compat:o=!1}=s,l=r.history,u="POP",d=null,p=g();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function g(){return(l.state||{idx:null}).idx}function y(){u="POP";let T=g(),w=T==null?null:T-p;p=T,d&&d({action:u,location:S.location,delta:w})}function b(T,w){u="PUSH";let x=Mh(S.location,T,w);p=g()+1;let C=Cm(x,p),O=S.createHref(x);try{l.pushState(C,"",O)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(O)}o&&d&&d({action:u,location:S.location,delta:1})}function A(T,w){u="REPLACE";let x=Mh(S.location,T,w);p=g();let C=Cm(x,p),O=S.createHref(x);l.replaceState(C,"",O),o&&d&&d({action:u,location:S.location,delta:0})}function E(T){return cA(T)}let S={get action(){return u},get location(){return h(r,l)},listen(T){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(xm,y),d=T,()=>{r.removeEventListener(xm,y),d=null}},createHref(T){return t(r,T)},createURL:E,encodeLocation(T){let w=E(T);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:b,replace:A,go(T){return l.go(T)}};return S}function cA(h,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),ie(i,"No window.location.(origin|href) available to create URL");let s=typeof h=="string"?h:Or(h);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function gy(h,t,i="/"){return uA(h,t,i,!1)}function uA(h,t,i,s){let r=typeof t=="string"?Aa(t):t,o=un(r.pathname||"/",i);if(o==null)return null;let l=my(h);hA(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let p=EA(o);u=AA(l[d],p,s)}return u}function my(h,t=[],i=[],s="",r=!1){let o=(l,u,d=r,p)=>{let g={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&d)return;ie(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let y=cn([s,g.relativePath]),b=i.concat(g);l.children&&l.children.length>0&&(ie(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),my(l.children,t,b,y,d)),!(l.path==null&&!l.index)&&t.push({path:y,score:bA(y,l.index),routesMeta:b})};return h.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of yy(l.path))o(l,u,!0,d)}),t}function yy(h){let t=h.split("/");if(t.length===0)return[];let[i,...s]=t,r=i.endsWith("?"),o=i.replace(/\?$/,"");if(s.length===0)return r?[o,""]:[o];let l=yy(s.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),r&&u.push(...l),u.map(d=>h.startsWith("/")&&d===""?"/":d)}function hA(h){h.sort((t,i)=>t.score!==i.score?i.score-t.score:vA(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var dA=/^:[\w-]+$/,fA=3,pA=2,gA=1,mA=10,yA=-2,Rm=h=>h==="*";function bA(h,t){let i=h.split("/"),s=i.length;return i.some(Rm)&&(s+=yA),t&&(s+=pA),i.filter(r=>!Rm(r)).reduce((r,o)=>r+(dA.test(o)?fA:o===""?gA:mA),s)}function vA(h,t){return h.length===t.length&&h.slice(0,-1).every((s,r)=>s===t[r])?h[h.length-1]-t[t.length-1]:0}function AA(h,t,i=!1){let{routesMeta:s}=h,r={},o="/",l=[];for(let u=0;u<s.length;++u){let d=s[u],p=u===s.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=Ol({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),b=d.route;if(!y&&p&&i&&!s[s.length-1].route.index&&(y=Ol({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(r,y.params),l.push({params:r,pathname:cn([o,y.pathname]),pathnameBase:xA(cn([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=cn([o,y.pathnameBase]))}return l}function Ol(h,t){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[i,s]=SA(h.path,h.caseSensitive,h.end),r=t.match(i);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:s.reduce((p,{paramName:g,isOptional:y},b)=>{if(g==="*"){let E=u[b]||"";l=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const A=u[b];return y&&!A?p[g]=void 0:p[g]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:h}}function SA(h,t=!1,i=!0){Ri(h==="*"||!h.endsWith("*")||h.endsWith("/*"),`Route path "${h}" will be treated as if it were "${h.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${h.replace(/\*$/,"/*")}".`);let s=[],r="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return h.endsWith("*")?(s.push({paramName:"*"}),r+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?r+="\\/*$":h!==""&&h!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function EA(h){try{return h.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ri(!1,`The URL path "${h}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),h}}function un(h,t){if(t==="/")return h;if(!h.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=h.charAt(i);return s&&s!=="/"?null:h.slice(i)||"/"}var by=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wA=h=>by.test(h);function _A(h,t="/"){let{pathname:i,search:s="",hash:r=""}=typeof h=="string"?Aa(h):h,o;if(i)if(wA(i))o=i;else{if(i.includes("//")){let l=i;i=i.replace(/\/\/+/g,"/"),Ri(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${i}`)}i.startsWith("/")?o=Mm(i.substring(1),"/"):o=Mm(i,t)}else o=t;return{pathname:o,search:CA(s),hash:RA(r)}}function Mm(h,t){let i=t.replace(/\/+$/,"").split("/");return h.split("/").forEach(r=>{r===".."?i.length>1&&i.pop():r!=="."&&i.push(r)}),i.length>1?i.join("/"):"/"}function yh(h,t,i,s){return`Cannot include a '${h}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TA(h){return h.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function vy(h){let t=TA(h);return t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase)}function Ay(h,t,i,s=!1){let r;typeof h=="string"?r=Aa(h):(r={...h},ie(!r.pathname||!r.pathname.includes("?"),yh("?","pathname","search",r)),ie(!r.pathname||!r.pathname.includes("#"),yh("#","pathname","hash",r)),ie(!r.search||!r.search.includes("#"),yh("#","search","hash",r)));let o=h===""||r.pathname==="",l=o?"/":r.pathname,u;if(l==null)u=i;else{let y=t.length-1;if(!s&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),y-=1;r.pathname=b.join("/")}u=y>=0?t[y]:"/"}let d=_A(r,u),p=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&i.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}var cn=h=>h.join("/").replace(/\/\/+/g,"/"),xA=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/"),CA=h=>!h||h==="?"?"":h.startsWith("?")?h:"?"+h,RA=h=>!h||h==="#"?"":h.startsWith("#")?h:"#"+h,MA=class{constructor(h,t,i,s=!1){this.status=h,this.statusText=t||"",this.internal=s,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function DA(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}function LA(h){return h.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Sy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ey(h,t){let i=h;if(typeof i!="string"||!by.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let s=i,r=!1;if(Sy)try{let o=new URL(window.location.href),l=i.startsWith("//")?new URL(o.protocol+i):new URL(i),u=un(l.pathname,t);l.origin===o.origin&&u!=null?i=u+l.search+l.hash:r=!0}catch{Ri(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:r,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var wy=["POST","PUT","PATCH","DELETE"];new Set(wy);var OA=["GET",...wy];new Set(OA);var Sa=P.createContext(null);Sa.displayName="DataRouter";var jl=P.createContext(null);jl.displayName="DataRouterState";var NA=P.createContext(!1),_y=P.createContext({isTransitioning:!1});_y.displayName="ViewTransition";var kA=P.createContext(new Map);kA.displayName="Fetchers";var BA=P.createContext(null);BA.displayName="Await";var Ei=P.createContext(null);Ei.displayName="Navigation";var Fr=P.createContext(null);Fr.displayName="Location";var fn=P.createContext({outlet:null,matches:[],isDataRoute:!1});fn.displayName="Route";var Vh=P.createContext(null);Vh.displayName="RouteError";var Ty="REACT_ROUTER_ERROR",PA="REDIRECT",zA="ROUTE_ERROR_RESPONSE";function jA(h){if(h.startsWith(`${Ty}:${PA}:{`))try{let t=JSON.parse(h.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function FA(h){if(h.startsWith(`${Ty}:${zA}:{`))try{let t=JSON.parse(h.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new MA(t.status,t.statusText,t.data)}catch{}}function UA(h,{relative:t}={}){ie(Ur(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=P.useContext(Ei),{hash:r,pathname:o,search:l}=Hr(h,{relative:t}),u=o;return i!=="/"&&(u=o==="/"?i:cn([i,o])),s.createHref({pathname:u,search:l,hash:r})}function Ur(){return P.useContext(Fr)!=null}function Gn(){return ie(Ur(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Fr).location}var xy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Cy(h){P.useContext(Ei).static||P.useLayoutEffect(h)}function HA(){let{isDataRoute:h}=P.useContext(fn);return h?tS():IA()}function IA(){ie(Ur(),"useNavigate() may be used only in the context of a <Router> component.");let h=P.useContext(Sa),{basename:t,navigator:i}=P.useContext(Ei),{matches:s}=P.useContext(fn),{pathname:r}=Gn(),o=JSON.stringify(vy(s)),l=P.useRef(!1);return Cy(()=>{l.current=!0}),P.useCallback((d,p={})=>{if(Ri(l.current,xy),!l.current)return;if(typeof d=="number"){i.go(d);return}let g=Ay(d,JSON.parse(o),r,p.relative==="path");h==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:cn([t,g.pathname])),(p.replace?i.replace:i.push)(g,p.state,p)},[t,i,o,r,h])}P.createContext(null);function Hr(h,{relative:t}={}){let{matches:i}=P.useContext(fn),{pathname:s}=Gn(),r=JSON.stringify(vy(i));return P.useMemo(()=>Ay(h,JSON.parse(r),s,t==="path"),[h,r,s,t])}function GA(h,t){return Ry(h,t)}function Ry(h,t,i,s,r){ie(Ur(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=P.useContext(Ei),{matches:l}=P.useContext(fn),u=l[l.length-1],d=u?u.params:{},p=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let x=y&&y.path||"";Dy(p,!y||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let b=Gn(),A;if(t){let x=typeof t=="string"?Aa(t):t;ie(g==="/"||x.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${x.pathname}" was given in the \`location\` prop.`),A=x}else A=b;let E=A.pathname||"/",S=E;if(g!=="/"){let x=g.replace(/^\//,"").split("/");S="/"+E.replace(/^\//,"").split("/").slice(x.length).join("/")}let T=gy(h,{pathname:S});Ri(y||T!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Ri(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=$A(T&&T.map(x=>Object.assign({},x,{params:Object.assign({},d,x.params),pathname:cn([g,o.encodeLocation?o.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?g:cn([g,o.encodeLocation?o.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),l,i,s,r);return t&&w?P.createElement(Fr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},w):w}function VA(){let h=JA(),t=DA(h)?`${h.status} ${h.statusText}`:h instanceof Error?h.message:JSON.stringify(h),i=h instanceof Error?h.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",h),l=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),i?P.createElement("pre",{style:r},i):null,l)}var qA=P.createElement(VA,null),My=class extends P.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,t){return t.location!==h.location||t.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:t.error,location:t.location,revalidation:h.revalidation||t.revalidation}}componentDidCatch(h,t){this.props.onError?this.props.onError(h,t):console.error("React Router caught the following error during render",h)}render(){let h=this.state.error;if(this.context&&typeof h=="object"&&h&&"digest"in h&&typeof h.digest=="string"){const i=FA(h.digest);i&&(h=i)}let t=h!==void 0?P.createElement(fn.Provider,{value:this.props.routeContext},P.createElement(Vh.Provider,{value:h,children:this.props.component})):this.props.children;return this.context?P.createElement(XA,{error:h},t):t}};My.contextType=NA;var bh=new WeakMap;function XA({children:h,error:t}){let{basename:i}=P.useContext(Ei);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=jA(t.digest);if(s){let r=bh.get(t);if(r)throw r;let o=Ey(s.location,i);if(Sy&&!bh.get(t))if(o.isExternal||s.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:s.replace}));throw bh.set(t,l),l}return P.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return h}function YA({routeContext:h,match:t,children:i}){let s=P.useContext(Sa);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(fn.Provider,{value:h},i)}function $A(h,t=[],i=null,s=null,r=null){if(h==null){if(!i)return null;if(i.errors)h=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)h=i.matches;else return null}let o=h,l=i?.errors;if(l!=null){let g=o.findIndex(y=>y.route.id&&l?.[y.route.id]!==void 0);ie(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(i)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:b,errors:A}=i,E=y.route.loader&&!b.hasOwnProperty(y.route.id)&&(!A||A[y.route.id]===void 0);if(y.route.lazy||E){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let p=i&&s?(g,y)=>{s(g,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:LA(i.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,b)=>{let A,E=!1,S=null,T=null;i&&(A=l&&y.route.id?l[y.route.id]:void 0,S=y.route.errorElement||qA,u&&(d<0&&b===0?(Dy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,T=null):d===b&&(E=!0,T=y.route.hydrateFallbackElement||null)));let w=t.concat(o.slice(0,b+1)),x=()=>{let C;return A?C=S:E?C=T:y.route.Component?C=P.createElement(y.route.Component,null):y.route.element?C=y.route.element:C=g,P.createElement(YA,{match:y,routeContext:{outlet:g,matches:w,isDataRoute:i!=null},children:C})};return i&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?P.createElement(My,{location:i.location,revalidation:i.revalidation,component:S,error:A,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:p}):x()},null)}function qh(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KA(h){let t=P.useContext(Sa);return ie(t,qh(h)),t}function WA(h){let t=P.useContext(jl);return ie(t,qh(h)),t}function QA(h){let t=P.useContext(fn);return ie(t,qh(h)),t}function Xh(h){let t=QA(h),i=t.matches[t.matches.length-1];return ie(i.route.id,`${h} can only be used on routes that contain a unique "id"`),i.route.id}function ZA(){return Xh("useRouteId")}function JA(){let h=P.useContext(Vh),t=WA("useRouteError"),i=Xh("useRouteError");return h!==void 0?h:t.errors?.[i]}function tS(){let{router:h}=KA("useNavigate"),t=Xh("useNavigate"),i=P.useRef(!1);return Cy(()=>{i.current=!0}),P.useCallback(async(r,o={})=>{Ri(i.current,xy),i.current&&(typeof r=="number"?await h.navigate(r):await h.navigate(r,{fromRouteId:t,...o}))},[h,t])}var Dm={};function Dy(h,t,i){!t&&!Dm[h]&&(Dm[h]=!0,Ri(!1,i))}P.memo(eS);function eS({routes:h,future:t,state:i,onError:s}){return Ry(h,void 0,i,s,t)}function xr(h){ie(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iS({basename:h="/",children:t=null,location:i,navigationType:s="POP",navigator:r,static:o=!1,unstable_useTransitions:l}){ie(!Ur(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=h.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:u,navigator:r,static:o,unstable_useTransitions:l,future:{}}),[u,r,o,l]);typeof i=="string"&&(i=Aa(i));let{pathname:p="/",search:g="",hash:y="",state:b=null,key:A="default"}=i,E=P.useMemo(()=>{let S=un(p,u);return S==null?null:{location:{pathname:S,search:g,hash:y,state:b,key:A},navigationType:s}},[u,p,g,y,b,A,s]);return Ri(E!=null,`<Router basename="${u}"> is not able to match the URL "${p}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:P.createElement(Ei.Provider,{value:d},P.createElement(Fr.Provider,{children:t,value:E}))}function nS({children:h,location:t}){return GA(Dh(h),t)}function Dh(h,t=[]){let i=[];return P.Children.forEach(h,(s,r)=>{if(!P.isValidElement(s))return;let o=[...t,r];if(s.type===P.Fragment){i.push.apply(i,Dh(s.props.children,o));return}ie(s.type===xr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ie(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Dh(s.props.children,o)),i.push(l)}),i}var Rl="get",Ml="application/x-www-form-urlencoded";function Fl(h){return typeof HTMLElement<"u"&&h instanceof HTMLElement}function sS(h){return Fl(h)&&h.tagName.toLowerCase()==="button"}function aS(h){return Fl(h)&&h.tagName.toLowerCase()==="form"}function rS(h){return Fl(h)&&h.tagName.toLowerCase()==="input"}function oS(h){return!!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)}function lS(h,t){return h.button===0&&(!t||t==="_self")&&!oS(h)}var yl=null;function cS(){if(yl===null)try{new FormData(document.createElement("form"),0),yl=!1}catch{yl=!0}return yl}var uS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vh(h){return h!=null&&!uS.has(h)?(Ri(!1,`"${h}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ml}"`),null):h}function hS(h,t){let i,s,r,o,l;if(aS(h)){let u=h.getAttribute("action");s=u?un(u,t):null,i=h.getAttribute("method")||Rl,r=vh(h.getAttribute("enctype"))||Ml,o=new FormData(h)}else if(sS(h)||rS(h)&&(h.type==="submit"||h.type==="image")){let u=h.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=h.getAttribute("formaction")||u.getAttribute("action");if(s=d?un(d,t):null,i=h.getAttribute("formmethod")||u.getAttribute("method")||Rl,r=vh(h.getAttribute("formenctype"))||vh(u.getAttribute("enctype"))||Ml,o=new FormData(u,h),!cS()){let{name:p,type:g,value:y}=h;if(g==="image"){let b=p?`${p}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else p&&o.append(p,y)}}else{if(Fl(h))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Rl,s=null,r=Ml,l=h}return o&&r==="text/plain"&&(l=o,o=void 0),{action:s,method:i.toLowerCase(),encType:r,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Yh(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function dS(h,t,i,s){let r=typeof h=="string"?new URL(h,typeof window>"u"?"server://singlefetch/":window.location.origin):h;return i?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${s}`:r.pathname=`${r.pathname}.${s}`:r.pathname==="/"?r.pathname=`_root.${s}`:t&&un(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function fS(h,t){if(h.id in t)return t[h.id];try{let i=await import(h.module);return t[h.id]=i,i}catch(i){return console.error(`Error loading route module \`${h.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pS(h){return h==null?!1:h.href==null?h.rel==="preload"&&typeof h.imageSrcSet=="string"&&typeof h.imageSizes=="string":typeof h.rel=="string"&&typeof h.href=="string"}async function gS(h,t,i){let s=await Promise.all(h.map(async r=>{let o=t.routes[r.route.id];if(o){let l=await fS(o,i);return l.links?l.links():[]}return[]}));return vS(s.flat(1).filter(pS).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Lm(h,t,i,s,r,o){let l=(d,p)=>i[p]?d.route.id!==i[p].route.id:!0,u=(d,p)=>i[p].pathname!==d.pathname||i[p].route.path?.endsWith("*")&&i[p].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,p)=>l(d,p)||u(d,p)):o==="data"?t.filter((d,p)=>{let g=s.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,p)||u(d,p))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(h,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function mS(h,t,{includeHydrateFallback:i}={}){return yS(h.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),i&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function yS(h){return[...new Set(h)]}function bS(h){let t={},i=Object.keys(h).sort();for(let s of i)t[s]=h[s];return t}function vS(h,t){let i=new Set;return new Set(t),h.reduce((s,r)=>{let o=JSON.stringify(bS(r));return i.has(o)||(i.add(o),s.push({key:o,link:r})),s},[])}function Ly(){let h=P.useContext(Sa);return Yh(h,"You must render this element inside a <DataRouterContext.Provider> element"),h}function AS(){let h=P.useContext(jl);return Yh(h,"You must render this element inside a <DataRouterStateContext.Provider> element"),h}var $h=P.createContext(void 0);$h.displayName="FrameworkContext";function Oy(){let h=P.useContext($h);return Yh(h,"You must render this element inside a <HydratedRouter> element"),h}function SS(h,t){let i=P.useContext($h),[s,r]=P.useState(!1),[o,l]=P.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=t,b=P.useRef(null);P.useEffect(()=>{if(h==="render"&&l(!0),h==="viewport"){let S=w=>{w.forEach(x=>{l(x.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return b.current&&T.observe(b.current),()=>{T.disconnect()}}},[h]),P.useEffect(()=>{if(s){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[s]);let A=()=>{r(!0)},E=()=>{r(!1),l(!1)};return i?h!=="intent"?[o,b,{}]:[o,b,{onFocus:Sr(u,A),onBlur:Sr(d,E),onMouseEnter:Sr(p,A),onMouseLeave:Sr(g,E),onTouchStart:Sr(y,A)}]:[!1,b,{}]}function Sr(h,t){return i=>{h&&h(i),i.defaultPrevented||t(i)}}function ES({page:h,...t}){let{router:i}=Ly(),s=P.useMemo(()=>gy(i.routes,h,i.basename),[i.routes,h,i.basename]);return s?P.createElement(_S,{page:h,matches:s,...t}):null}function wS(h){let{manifest:t,routeModules:i}=Oy(),[s,r]=P.useState([]);return P.useEffect(()=>{let o=!1;return gS(h,t,i).then(l=>{o||r(l)}),()=>{o=!0}},[h,t,i]),s}function _S({page:h,matches:t,...i}){let s=Gn(),{future:r,manifest:o,routeModules:l}=Oy(),{basename:u}=Ly(),{loaderData:d,matches:p}=AS(),g=P.useMemo(()=>Lm(h,t,p,o,s,"data"),[h,t,p,o,s]),y=P.useMemo(()=>Lm(h,t,p,o,s,"assets"),[h,t,p,o,s]),b=P.useMemo(()=>{if(h===s.pathname+s.search+s.hash)return[];let S=new Set,T=!1;if(t.forEach(x=>{let C=o.routes[x.route.id];!C||!C.hasLoader||(!g.some(O=>O.route.id===x.route.id)&&x.route.id in d&&l[x.route.id]?.shouldRevalidate||C.hasClientLoader?T=!0:S.add(x.route.id))}),S.size===0)return[];let w=dS(h,u,r.unstable_trailingSlashAwareDataRequests,"data");return T&&S.size>0&&w.searchParams.set("_routes",t.filter(x=>S.has(x.route.id)).map(x=>x.route.id).join(",")),[w.pathname+w.search]},[u,r.unstable_trailingSlashAwareDataRequests,d,s,o,g,t,h,l]),A=P.useMemo(()=>mS(y,o),[y,o]),E=wS(y);return P.createElement(P.Fragment,null,b.map(S=>P.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...i})),A.map(S=>P.createElement("link",{key:S,rel:"modulepreload",href:S,...i})),E.map(({key:S,link:T})=>P.createElement("link",{key:S,nonce:i.nonce,...T})))}function TS(...h){return t=>{h.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var xS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xS&&(window.__reactRouterVersion="7.12.0")}catch{}function CS({basename:h,children:t,unstable_useTransitions:i,window:s}){let r=P.useRef();r.current==null&&(r.current=rA({window:s,v5Compat:!0}));let o=r.current,[l,u]=P.useState({action:o.action,location:o.location}),d=P.useCallback(p=>{i===!1?u(p):P.startTransition(()=>u(p))},[i]);return P.useLayoutEffect(()=>o.listen(d),[o,d]),P.createElement(iS,{basename:h,children:t,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:i})}var Ny=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hs=P.forwardRef(function({onClick:t,discover:i="render",prefetch:s="none",relative:r,reloadDocument:o,replace:l,state:u,target:d,to:p,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b,...A},E){let{basename:S,unstable_useTransitions:T}=P.useContext(Ei),w=typeof p=="string"&&Ny.test(p),x=Ey(p,S);p=x.to;let C=UA(p,{relative:r}),[O,N,j]=SS(s,A),B=LS(p,{replace:l,state:u,target:d,preventScrollReset:g,relative:r,viewTransition:y,unstable_defaultShouldRevalidate:b,unstable_useTransitions:T});function V(Q){t&&t(Q),Q.defaultPrevented||B(Q)}let Y=P.createElement("a",{...A,...j,href:x.absoluteURL||C,onClick:x.isExternal||o?t:V,ref:TS(E,N),target:d,"data-discover":!w&&i==="render"?"true":void 0});return O&&!w?P.createElement(P.Fragment,null,Y,P.createElement(ES,{page:C})):Y});hs.displayName="Link";var RS=P.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:s="",end:r=!1,style:o,to:l,viewTransition:u,children:d,...p},g){let y=Hr(l,{relative:p.relative}),b=Gn(),A=P.useContext(jl),{navigator:E,basename:S}=P.useContext(Ei),T=A!=null&&PS(y)&&u===!0,w=E.encodeLocation?E.encodeLocation(y).pathname:y.pathname,x=b.pathname,C=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(x=x.toLowerCase(),C=C?C.toLowerCase():null,w=w.toLowerCase()),C&&S&&(C=un(C,S)||C);const O=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let N=x===w||!r&&x.startsWith(w)&&x.charAt(O)==="/",j=C!=null&&(C===w||!r&&C.startsWith(w)&&C.charAt(w.length)==="/"),B={isActive:N,isPending:j,isTransitioning:T},V=N?t:void 0,Y;typeof s=="function"?Y=s(B):Y=[s,N?"active":null,j?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let Q=typeof o=="function"?o(B):o;return P.createElement(hs,{...p,"aria-current":V,className:Y,ref:g,style:Q,to:l,viewTransition:u},typeof d=="function"?d(B):d)});RS.displayName="NavLink";var MS=P.forwardRef(({discover:h="render",fetcherKey:t,navigate:i,reloadDocument:s,replace:r,state:o,method:l=Rl,action:u,onSubmit:d,relative:p,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b,...A},E)=>{let{unstable_useTransitions:S}=P.useContext(Ei),T=kS(),w=BS(u,{relative:p}),x=l.toLowerCase()==="get"?"get":"post",C=typeof u=="string"&&Ny.test(u),O=N=>{if(d&&d(N),N.defaultPrevented)return;N.preventDefault();let j=N.nativeEvent.submitter,B=j?.getAttribute("formmethod")||l,V=()=>T(j||N.currentTarget,{fetcherKey:t,method:B,navigate:i,replace:r,state:o,relative:p,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b});S&&i!==!1?P.startTransition(()=>V()):V()};return P.createElement("form",{ref:E,method:x,action:w,onSubmit:s?d:O,...A,"data-discover":!C&&h==="render"?"true":void 0})});MS.displayName="Form";function DS(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ky(h){let t=P.useContext(Sa);return ie(t,DS(h)),t}function LS(h,{target:t,replace:i,state:s,preventScrollReset:r,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let p=HA(),g=Gn(),y=Hr(h,{relative:o});return P.useCallback(b=>{if(lS(b,t)){b.preventDefault();let A=i!==void 0?i:Or(g)===Or(y),E=()=>p(h,{replace:A,state:s,preventScrollReset:r,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u});d?P.startTransition(()=>E()):E()}},[g,p,y,i,s,t,h,r,o,l,u,d])}var OS=0,NS=()=>`__${String(++OS)}__`;function kS(){let{router:h}=ky("useSubmit"),{basename:t}=P.useContext(Ei),i=ZA(),s=h.fetch,r=h.navigate;return P.useCallback(async(o,l={})=>{let{action:u,method:d,encType:p,formData:g,body:y}=hS(o,t);if(l.navigate===!1){let b=l.fetcherKey||NS();await s(b,i,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:y,formMethod:l.method||d,formEncType:l.encType||p,flushSync:l.flushSync})}else await r(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:y,formMethod:l.method||d,formEncType:l.encType||p,replace:l.replace,state:l.state,fromRouteId:i,flushSync:l.flushSync,viewTransition:l.viewTransition})},[s,r,t,i])}function BS(h,{relative:t}={}){let{basename:i}=P.useContext(Ei),s=P.useContext(fn);ie(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),o={...Hr(h||".",{relative:t})},l=Gn();if(h==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!h||h===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(o.pathname=o.pathname==="/"?i:cn([i,o.pathname])),Or(o)}function PS(h,{relative:t}={}){let i=P.useContext(_y);ie(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=ky("useViewTransitionState"),r=Hr(h,{relative:t});if(!i.isTransitioning)return!1;let o=un(i.currentLocation.pathname,s)||i.currentLocation.pathname,l=un(i.nextLocation.pathname,s)||i.nextLocation.pathname;return Ol(r.pathname,l)!=null||Ol(r.pathname,o)!=null}function zS({lightMode:h,toggleTheme:t}){const s=Gn().pathname;return R.jsxs("header",{children:[R.jsx("img",{src:h?"/portfolio.github.io/logo/logolightmode2.png":"/portfolio.github.io/logo/plogo2.png",alt:"Logo",id:"plogo"}),R.jsxs("ul",{children:[R.jsx("li",{children:R.jsx(hs,{to:"/",id:s==="/"?"Home":"",children:"Home"})}),R.jsx("li",{children:R.jsx(hs,{to:"/work",id:s==="/work"?"Home":"",children:"Work"})}),R.jsx("li",{children:R.jsx(hs,{to:"/resume",id:s==="/resume"?"Home":"",children:"Resume"})}),R.jsx("li",{children:R.jsx(hs,{to:"/contact",id:s==="/contact"?"Home":"",children:"Contact"})}),R.jsx("li",{children:R.jsx("img",{src:h?"/portfolio.github.io/logo/moon.png":"/portfolio.github.io/logo/sun.png",alt:"Theme Toggle",id:"icon",onClick:t})})]})]})}function jS(){return R.jsxs("div",{children:[R.jsxs("div",{className:"name",children:[R.jsx("p",{children:"About"}),R.jsx("p",{children:"Dilshad Ali"})]}),R.jsxs("div",{className:"myprofile",children:[R.jsx("div",{className:"myprofilemyimg",children:R.jsx("img",{src:"/portfolio.github.io/myimage/myimg1.png",alt:""})}),R.jsxs("div",{className:"myprofileabout",children:[R.jsxs("div",{className:"desination",children:[R.jsx("h2",{children:"Associate Consultant at"}),R.jsx("img",{id:"cglogo",src:"/portfolio.github.io/project_image/capgemini.png",alt:""})]}),R.jsxs("p",{children:["Dedicated ",R.jsx("b",{children:"Guidewire Developer"})," with",R.jsx("b",{children:"3.3 years of experience"}),", specializing in",R.jsx("b",{children:"Guidewire PolicyCenter"}),", including ",R.jsx("b",{children:"PolicyCenter Rating"}),", and ",R.jsx("b",{children:"Guidewire 9.04"})," for",R.jsx("b",{children:"Configuration, Implementation, and Development"}),". Proficient in the ",R.jsx("b",{children:"Financial Services"})," and ",R.jsx("b",{children:"Insurance domain"}),", delivering robust and scalable solutions to enhance functionality and streamline operations."]}),R.jsx("p",{children:"Skills:"}),R.jsxs("ul",{children:[R.jsx("li",{children:"Guidewire Policy Center"}),R.jsx("li",{children:"Guidewire PC Rating"}),R.jsx("li",{children:"Guidewire PC Configuration"}),R.jsx("li",{children:"Html / Css"}),R.jsx("li",{children:"Python"}),R.jsx("li",{children:"Guidewire Policy Center"}),R.jsx("li",{children:"Gosu"}),R.jsx("li",{children:"Machine Learning"}),R.jsx("li",{children:"Deep Learning"}),R.jsx("li",{children:"Html / Css"}),R.jsx("li",{children:"Javascrypt / Php / Sql"}),R.jsx("li",{children:"Data Structures"}),R.jsx("li",{children:"Microsoft Excel"}),R.jsx("li",{children:"Pandas"}),R.jsx("li",{children:"Microsoft Excel"}),R.jsx("li",{children:"Blueprism"})]}),R.jsxs("div",{className:"myprofileaboutchild",children:[R.jsx(hs,{to:"/work",children:"Projects"}),R.jsx("a",{href:"https://docs.google.com/document/d/1OFkB3d3SXz-nod_0xjSlYeIgnwhYAyPC/edit?usp=sharing&ouid=112976319464163235155&rtpof=true&sd=true",target:"_blank",rel:"noreferrer",children:"Resume"})]}),R.jsx("div",{className:"sociallinks",children:R.jsxs("ul",{children:[R.jsx("li",{children:R.jsx("a",{href:"https://github.com/Dilshad24",target:"_blank",rel:"noreferrer",children:R.jsx("img",{src:"/portfolio.github.io/logo/github.svg",alt:""})})}),R.jsx("li",{children:R.jsx("a",{href:"https://www.linkedin.com/in/dilshad-ali24",target:"_blank",rel:"noreferrer",children:R.jsx("img",{src:"/portfolio.github.io/logo/linkedin.svg",alt:""})})}),R.jsx("li",{children:R.jsx("a",{href:"mailto:mddilshadali2410@gmail.com",children:R.jsx("img",{src:"/portfolio.github.io/logo/gmail.svg",alt:""})})})]})})]})]})]})}function FS(){return R.jsxs("div",{className:"workcontainer",children:[R.jsx("p",{children:"My Projects"}),R.jsxs("div",{className:"projectcard1",children:[R.jsx("div",{className:"projectdetail1",children:R.jsxs("div",{className:"projectdetailchild1",children:[R.jsx("p",{children:"Easy Shopping.com"}),R.jsx("p",{children:"E-commerce website (easy Shopping.com): it is a e-commerce website with all the functionality requested to qualified the current standard the project is developed using Html ,Css, Javascript ,PHP , SQL"}),R.jsxs("div",{className:"projectlink1",children:[R.jsx("a",{href:"https://github.com/Dilshad24/ecommerce-website",target:"_blank",rel:"noreferrer",children:"Github"}),R.jsx("a",{href:"https://easyshopping122.000webhostapp.com/",target:"_blank",rel:"noreferrer",children:"website"})]})]})}),R.jsx("div",{className:"projectimage1",children:R.jsx("a",{href:"https://easyshopping122.000webhostapp.com/",target:"_blank",rel:"noreferrer",children:R.jsx("img",{src:"/portfolio.github.io/project_image/easyshopping.com.jpg",alt:""})})})]}),R.jsxs("div",{className:"projectcard2",children:[R.jsx("div",{className:"projectimage2",children:R.jsx("a",{href:"https://github.com/Dilshad24/Amazon-Product-Review-Analysis-Using-Deep-Learning",target:"_blank",rel:"noreferrer",children:R.jsx("img",{src:"/portfolio.github.io/project_image/amazon.jpg",alt:""})})}),R.jsx("div",{className:"projectdetail2",children:R.jsxs("div",{className:"projectdetailchild2",children:[R.jsx("p",{children:"Amazon Product Review Analysis Using NLP"}),R.jsx("p",{children:"Amazon Product Review Analysis is Deeplearning based website created with django. It takes the all review page link of a product and gave us how much people like that product. It tell us how positive the product is among the reviewer or consumer by learning about the sentiment of all reviews given by the consumers. this approach best because 3 star review of one person for a perticular product may not be same to 3 star review of other person for same product."}),R.jsx("div",{className:"projectlink2",children:R.jsx("a",{href:"https://github.com/Dilshad24/Amazon-Product-Review-Analysis-Using-Deep-Learning",target:"_blank",rel:"noreferrer",children:"Github"})})]})})]}),R.jsxs("div",{className:"projectcard1",children:[R.jsx("div",{className:"projectdetail1",children:R.jsxs("div",{className:"projectdetailchild1",children:[R.jsx("p",{children:"Student Attendance Management System Using Face Recognition"}),R.jsx("p",{children:"The aim of this project is to make attendance management easy . With the help of camera feed of secuarity camera or seprate camera for ths purpose(prefered) will automatiaclly detect face of employees or students mark there attendance with enter and leaving time in a form of table for a perticular day"}),R.jsx("div",{className:"projectlink1",children:R.jsx("a",{href:"https://github.com/Dilshad24/Student-Attendance-Management-System-Using-Face-Recognition",target:"_blank",rel:"noreferrer",children:"Github"})})]})}),R.jsx("div",{className:"projectimage1",children:R.jsx("a",{href:"https://github.com/Dilshad24/Student-Attendance-Management-System-Using-Face-Recognition",target:"_blank",rel:"noreferrer",children:R.jsx("img",{src:"/portfolio.github.io/project_image/Face.jpg",alt:""})})})]}),R.jsxs("div",{className:"projectcard2",children:[R.jsx("div",{className:"projectimage2",children:R.jsx("a",{href:"https://github.com/Dilshad24/GChat-GroupChatSystem-",target:"_blank",rel:"noreferrer",children:R.jsx("img",{src:"/portfolio.github.io/project_image/chatbot1.jpg",alt:"",id:"imgsdsh"})})}),R.jsx("div",{className:"projectdetail2",children:R.jsxs("div",{className:"projectdetailchild2",children:[R.jsx("p",{children:"GChat Group Chat System"}),R.jsx("p",{children:"GChat is a group chatting Room which enables people to get connected with each other. The project is created using Python using socket programming"}),R.jsx("div",{className:"projectlink2",children:R.jsx("a",{href:"https://github.com/Dilshad24/GChat-GroupChatSystem-",target:"_blank",rel:"noreferrer",children:"Github"})})]})})]}),R.jsxs("div",{className:"projectcard1",children:[R.jsx("div",{className:"projectdetail1",children:R.jsxs("div",{className:"projectdetailchild1",children:[R.jsx("p",{children:"Cars.com"}),R.jsx("p",{children:"cars.com is a web site that focuses on various ways we can create a website. It showcases cars from different companies with different models in a creative and eye-catching way."}),R.jsx("div",{className:"projectlink1",children:R.jsx("a",{href:"https://github.com/Dilshad24/cars.com.github.io",target:"_blank",rel:"noreferrer",children:"Github"})})]})}),R.jsx("div",{className:"projectimage1",children:R.jsx("a",{href:"https://dilshad24.github.io/cars.com.github.io/",target:"_blank",rel:"noreferrer",children:R.jsx("img",{src:"/portfolio.github.io/project_image/cars.com.png",alt:""})})})]}),R.jsxs("div",{className:"projectcard2",children:[R.jsx("div",{className:"projectimage2",children:R.jsx("a",{href:"https://dilshad24.github.io/Lunch-Box.github.io/",target:"_blank",rel:"noreferrer",children:R.jsx("img",{src:"/portfolio.github.io/project_image/LunchBox.png",alt:"",id:"imgsdsh"})})}),R.jsx("div",{className:"projectdetail2",children:R.jsxs("div",{className:"projectdetailchild2",children:[R.jsx("p",{children:"Lunch Box.com"}),R.jsx("p",{children:"Lunch Box is an online grocery shop where customers can buy individual ingredients as well as they can search for a recipe and book all the ingredients needed to cook that recipe."}),R.jsx("div",{className:"projectlink2",children:R.jsx("a",{href:"https://github.com/Dilshad24/Lunch-Box.github.io/settings/pages",target:"_blank",rel:"noreferrer",children:"Github"})})]})})]}),R.jsxs("div",{className:"projectcard1",children:[R.jsx("div",{className:"projectdetail1",children:R.jsxs("div",{className:"projectdetailchild1",children:[R.jsx("p",{children:"Sea Shells"}),R.jsx("p",{children:"Sea Shell is Bags Designing and Producing Comapny which is Expert on all kind of bag and with variety of Metarials.."}),R.jsx("div",{className:"projectlink1",children:R.jsx("a",{href:"https://github.com/Dilshad24/Sea-Shell-s.github.io",target:"_blank",rel:"noreferrer",children:"Github"})})]})}),R.jsx("div",{className:"projectimage1",children:R.jsx("a",{href:"https://dilshad24.github.io/Sea-Shell-s.github.io/",target:"_blank",rel:"noreferrer",children:R.jsx("img",{src:"/portfolio.github.io/project_image/seashell.png",alt:""})})})]}),R.jsxs("div",{className:"projectcard2",children:[R.jsx("div",{className:"projectimage2",children:R.jsx("a",{href:"https://dilshad24.github.io/bookfinder/",target:"_blank",rel:"noreferrer",children:R.jsx("img",{src:"/portfolio.github.io/project_image/bookfinder.png",alt:"",id:"imgsdsh"})})}),R.jsx("div",{className:"projectdetail2",children:R.jsxs("div",{className:"projectdetailchild2",children:[R.jsx("p",{children:"Book Finder"}),R.jsx("p",{children:"Book Finder is a web Application which can search books for you with the help of google books api."}),R.jsx("div",{className:"projectlink2",children:R.jsx("a",{href:"https://github.com/Dilshad24/bookfinder",target:"_blank",rel:"noreferrer",children:"Github"})})]})})]}),R.jsxs("div",{className:"projectcard1",children:[R.jsx("div",{className:"projectdetail1",children:R.jsxs("div",{className:"projectdetailchild1",children:[R.jsx("p",{children:"Furniture Hub"}),R.jsx("p",{children:"Furniture hub is a furniture website which shows 3d model of every furniture so that customer can see from all angels"}),R.jsx("div",{className:"projectlink1",children:R.jsx("a",{href:"https://github.com/Dilshad24/Furniture-Hub.github.io",target:"_blank",rel:"noreferrer",children:"Github"})})]})}),R.jsx("div",{className:"projectimage1",children:R.jsx("a",{href:"https://dilshad24.github.io/Furniture-Hub.github.io/",target:"_blank",rel:"noreferrer",children:R.jsx("img",{src:"/portfolio.github.io/project_image/furniturehub.png",alt:""})})})]}),R.jsxs("div",{className:"projectcard2",children:[R.jsx("div",{className:"projectimage2",children:R.jsx("a",{href:"https://dilshad24.github.io/website.github.io/",target:"_blank",rel:"noreferrer",children:R.jsx("img",{src:"/portfolio.github.io/project_image/cognetws.png",alt:"",id:"imgsdsh"})})}),R.jsx("div",{className:"projectdetail2",children:R.jsxs("div",{className:"projectdetailchild2",children:[R.jsx("p",{children:"Demo website"}),R.jsx("p",{children:"BThis is a demo website that was created for website building comapny."}),R.jsx("div",{className:"projectlink2",children:R.jsx("a",{href:"https://github.com/Dilshad24/website.github.io",target:"_blank",rel:"noreferrer",children:"Github"})})]})})]})]})}function US(){return R.jsx("div",{className:"contact-page",children:R.jsxs("div",{className:"contact-card",children:[R.jsx("h1",{className:"contact-title",children:"Get in Touch"}),R.jsx("p",{className:"contact-subtitle",children:"I'm always open to discussing new projects, creative ideas or opportunities to be part of your visions."}),R.jsxs("div",{className:"contact-details",children:[R.jsxs("div",{className:"contact-item",children:[R.jsx("span",{className:"contact-label",children:"Phone"}),R.jsx("span",{className:"contact-value",children:"8334005602"})]}),R.jsxs("div",{className:"contact-item",children:[R.jsx("span",{className:"contact-label",children:"Email"}),R.jsx("a",{href:"mailto:mddilshadali2410@gmail.com",className:"contact-value link",children:"mddilshadali2410@gmail.com"})]})]}),R.jsxs("div",{className:"contact-socials",children:[R.jsx("a",{href:"https://github.com/Dilshad24",target:"_blank",rel:"noreferrer",className:"social-icon",children:R.jsx("img",{src:"/portfolio.github.io/logo/github.svg",alt:"GitHub"})}),R.jsx("a",{href:"https://www.linkedin.com/in/dilshad-ali24",target:"_blank",rel:"noreferrer",className:"social-icon",children:R.jsx("img",{src:"/portfolio.github.io/logo/linkedin.svg",alt:"LinkedIn"})}),R.jsx("a",{href:"mailto:mddilshadali2410@gmail.com",className:"social-icon",children:R.jsx("img",{src:"/portfolio.github.io/logo/gmail.svg",alt:"Email"})})]}),R.jsx("div",{className:"contact-footer",children:R.jsx("p",{children:"Thank you for visiting!"})})]})})}const Pe=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Lh=[.001,0,0,.001,0,0],Ah=1.35,ai={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Hi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Nr="pdfjs_internal_editor_",bt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Rt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},By={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Re={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Dr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},le={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},oa={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ir={ERRORS:0,WARNINGS:1,INFOS:5},ya={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},bl={moveTo:0,lineTo:1,curveTo:2,closePath:3},Py={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ul=Ir.WARNINGS;function HS(h){Number.isInteger(h)&&(Ul=h)}function IS(){return Ul}function Hl(h){Ul>=Ir.INFOS&&console.info(`Info: ${h}`)}function vt(h){Ul>=Ir.WARNINGS&&console.warn(`Warning: ${h}`)}function Yt(h){throw new Error(h)}function Dt(h,t){h||Yt(t)}function GS(h){switch(h?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Kh(h,t=null,i=null){if(!h)return null;if(i&&typeof h=="string"&&(i.addDefaultProtocol&&h.startsWith("www.")&&h.match(/\./g)?.length>=2&&(h=`http://${h}`),i.tryConvertEncoding))try{h=$S(h)}catch{}const s=t?URL.parse(h,t):URL.parse(h);return GS(s)?s:null}function Wh(h,t,i=!1){const s=URL.parse(h);return s?(s.hash=t,s.href):i&&Kh(h,"http://example.com")?h.split("#",1)[0]+`${t?`#${t}`:""}`:""}function wt(h,t,i,s=!1){return Object.defineProperty(h,t,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const vs=(function(){function t(i,s){this.message=i,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class Om extends vs{constructor(t,i){super(t,"PasswordException"),this.code=i}}class Sh extends vs{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class Nl extends vs{constructor(t){super(t,"InvalidPDFException")}}class kr extends vs{constructor(t,i,s){super(t,"ResponseException"),this.status=i,this.missing=s}}class VS extends vs{constructor(t){super(t,"FormatError")}}class hn extends vs{constructor(t){super(t,"AbortException")}}function zy(h){(typeof h!="object"||h?.length===void 0)&&Yt("Invalid argument for bytesToString");const t=h.length,i=8192;if(t<i)return String.fromCharCode.apply(null,h);const s=[];for(let r=0;r<t;r+=i){const o=Math.min(r+i,t),l=h.subarray(r,o);s.push(String.fromCharCode.apply(null,l))}return s.join("")}function Gr(h){typeof h!="string"&&Yt("Invalid argument for stringToBytes");const t=h.length,i=new Uint8Array(t);for(let s=0;s<t;++s)i[s]=h.charCodeAt(s)&255;return i}function qS(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function XS(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function YS(){try{return new Function(""),!0}catch{return!1}}class Ee{static get isLittleEndian(){return wt(this,"isLittleEndian",XS())}static get isEvalSupported(){return wt(this,"isEvalSupported",YS())}static get isOffscreenCanvasSupported(){return wt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return wt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:i}=navigator;return wt(this,"platform",{isAndroid:i.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:i.includes("Firefox")})}static get isCSSRoundSupported(){return wt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Eh=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));class it{static makeHexColor(t,i,s){return`#${Eh[t]}${Eh[i]}${Eh[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,i){let s;t[0]?(t[0]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[3],i[3]*=t[3]):(s=i[0],i[0]=i[1],i[1]=s,s=i[2],i[2]=i[3],i[3]=s,t[1]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static multiplyByDOMMatrix(t,i){return[t[0]*i.a+t[2]*i.b,t[1]*i.a+t[3]*i.b,t[0]*i.c+t[2]*i.d,t[1]*i.c+t[3]*i.d,t[0]*i.e+t[2]*i.f+t[4],t[1]*i.e+t[3]*i.f+t[5]]}static applyTransform(t,i,s=0){const r=t[s],o=t[s+1];t[s]=r*i[0]+o*i[2]+i[4],t[s+1]=r*i[1]+o*i[3]+i[5]}static applyTransformToBezier(t,i,s=0){const r=i[0],o=i[1],l=i[2],u=i[3],d=i[4],p=i[5];for(let g=0;g<6;g+=2){const y=t[s+g],b=t[s+g+1];t[s+g]=y*r+b*l+d,t[s+g+1]=y*o+b*u+p}}static applyInverseTransform(t,i){const s=t[0],r=t[1],o=i[0]*i[3]-i[1]*i[2];t[0]=(s*i[3]-r*i[2]+i[2]*i[5]-i[4]*i[3])/o,t[1]=(-s*i[1]+r*i[0]+i[4]*i[1]-i[5]*i[0])/o}static axialAlignedBoundingBox(t,i,s){const r=i[0],o=i[1],l=i[2],u=i[3],d=i[4],p=i[5],g=t[0],y=t[1],b=t[2],A=t[3];let E=r*g+d,S=E,T=r*b+d,w=T,x=u*y+p,C=x,O=u*A+p,N=O;if(o!==0||l!==0){const j=o*g,B=o*b,V=l*y,Y=l*A;E+=V,w+=V,T+=Y,S+=Y,x+=j,N+=j,O+=B,C+=B}s[0]=Math.min(s[0],E,T,S,w),s[1]=Math.min(s[1],x,O,C,N),s[2]=Math.max(s[2],E,T,S,w),s[3]=Math.max(s[3],x,O,C,N)}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t,i){const s=t[0],r=t[1],o=t[2],l=t[3],u=s**2+r**2,d=s*o+r*l,p=o**2+l**2,g=(u+p)/2,y=Math.sqrt(g**2-(u*p-d**2));i[0]=Math.sqrt(g+y||1),i[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const s=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(s>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return o>l?null:[s,o,r,l]}static pointBoundingBox(t,i,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],i),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],i)}static rectBoundingBox(t,i,s,r,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],i,r),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],i,r)}static#t(t,i,s,r,o,l,u,d,p,g){if(p<=0||p>=1)return;const y=1-p,b=p*p,A=b*p,E=y*(y*(y*t+3*p*i)+3*b*s)+A*r,S=y*(y*(y*o+3*p*l)+3*b*u)+A*d;g[0]=Math.min(g[0],E),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],E),g[3]=Math.max(g[3],S)}static#e(t,i,s,r,o,l,u,d,p,g,y,b){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,i,s,r,o,l,u,d,-y/g,b);return}const A=g**2-4*y*p;if(A<0)return;const E=Math.sqrt(A),S=2*p;this.#t(t,i,s,r,o,l,u,d,(-g+E)/S,b),this.#t(t,i,s,r,o,l,u,d,(-g-E)/S,b)}static bezierBoundingBox(t,i,s,r,o,l,u,d,p){p[0]=Math.min(p[0],t,u),p[1]=Math.min(p[1],i,d),p[2]=Math.max(p[2],t,u),p[3]=Math.max(p[3],i,d),this.#e(t,s,o,u,i,r,l,d,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),p),this.#e(t,s,o,u,i,r,l,d,3*(-i+3*(r-l)+d),6*(i-2*r+l),3*(r-i),p)}}function $S(h){return decodeURIComponent(escape(h))}let wh=null,Nm=null;function jy(h){return wh||(wh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Nm=new Map([["","t"]])),h.replaceAll(wh,(t,i,s)=>i?i.normalize("NFKC"):Nm.get(s))}function Qh(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),zy(h)}const Zh="pdfjs_internal_id_";function KS(h,t,i){if(!Array.isArray(i)||i.length<2)return!1;const[s,r,...o]=i;if(!h(s)&&!Number.isInteger(s)||!t(r))return!1;const l=o.length;let u=!0;switch(r.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function Le(h,t,i){return Math.min(Math.max(h,t),i)}function Fy(h){return Uint8Array.prototype.toBase64?h.toBase64():btoa(zy(h))}function WS(h){return Uint8Array.fromBase64?Uint8Array.fromBase64(h):Gr(atob(h))}typeof Promise.try!="function"&&(Promise.try=function(h,...t){return new Promise(i=>{i(h(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(h){return h.reduce((t,i)=>t+i,0)});class Br{static textContent(t){const i=[],s={items:i,styles:Object.create(null)};function r(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(Br.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&i.push({str:l}),!!o.children)for(const d of o.children)r(d)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class Jh{static setupStorage(t,i,s,r,o){const l=r.getValue(i,{value:null});switch(s.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(l.value===s.attributes.xfaOn?t.setAttribute("checked",!0):l.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(i,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of s.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(i,{value:p})});break}}static setAttributes({html:t,element:i,storage:s=null,intent:r,linkService:o}){const{attributes:l}=i,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[d,p]of Object.entries(l))if(p!=null)switch(d){case"class":p.length&&t.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,p)}u&&o.addLinkAttributes(t,l.href,l.newWindow),s&&l.dataId&&this.setupStorage(t,l.dataId,i,s)}static render(t){const i=t.annotationStorage,s=t.linkService,r=t.xfaHtml,o=t.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:o,linkService:s});const u=o!=="richText",d=t.div;if(d.append(l),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}u&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);l.append(y),u&&Br.shouldBuildText(r.name)&&p.push(y)}return{textDivs:p}}const g=[[r,-1,l]];for(;g.length>0;){const[y,b,A]=g.at(-1);if(b+1===y.children.length){g.pop();continue}const E=y.children[++g.at(-1)[1]];if(E===null)continue;const{name:S}=E;if(S==="#text"){const w=document.createTextNode(E.value);p.push(w),A.append(w);continue}const T=E?.attributes?.xmlns?document.createElementNS(E.attributes.xmlns,S):document.createElement(S);if(A.append(T),E.attributes&&this.setAttributes({html:T,element:E,storage:i,intent:o,linkService:s}),E.children?.length>0)g.push([E,-1,T]);else if(E.value){const w=document.createTextNode(E.value);u&&Br.shouldBuildText(S)&&p.push(w),T.append(w)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const on="http://www.w3.org/2000/svg";class ms{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Ea(h,t="text"){if(Cr(h,document.baseURI)){const i=await fetch(h);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,s)=>{const r=new XMLHttpRequest;r.open("GET",h,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Vr{constructor({viewBox:t,userUnit:i,scale:s,rotation:r,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=i,this.scale=s,this.rotation=r,this.offsetX=o,this.offsetY=l,s*=i;const d=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let g,y,b,A;switch(r%=360,r<0&&(r+=360),r){case 180:g=-1,y=0,b=0,A=1;break;case 90:g=0,y=1,b=1,A=0;break;case 270:g=0,y=-1,b=-1,A=0;break;case 0:g=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,A=-A);let E,S,T,w;g===0?(E=Math.abs(p-t[1])*s+o,S=Math.abs(d-t[0])*s+l,T=(t[3]-t[1])*s,w=(t[2]-t[0])*s):(E=Math.abs(d-t[0])*s+o,S=Math.abs(p-t[1])*s+l,T=(t[2]-t[0])*s,w=(t[3]-t[1])*s),this.transform=[g*s,y*s,b*s,A*s,E-g*s*d-b*s*p,S-y*s*d-A*s*p],this.width=T,this.height=w}get rawDims(){const t=this.viewBox;return wt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Vr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:o})}convertToViewportPoint(t,i){const s=[t,i];return it.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const i=[t[0],t[1]];it.applyTransform(i,this.transform);const s=[t[2],t[3]];return it.applyTransform(s,this.transform),[i[0],i[1],s[0],s[1]]}convertToPdfPoint(t,i){const s=[t,i];return it.applyInverseTransform(s,this.transform),s}}class Il extends vs{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function qr(h){const t=h.length;let i=0;for(;i<t&&h[i].trim()==="";)i++;return h.substring(i,i+5).toLowerCase()==="data:"}function Gl(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function Uy(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function Hy(h,t="document.pdf"){if(typeof h!="string")return t;if(qr(h))return vt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(h);if(!s)return t;const r=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,l=s.pathname.split("/").at(-1);if(o.test(l))return r(l);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const p of u)if(o.test(p))return r(p);const d=Array.from(s.searchParams.keys()).reverse();for(const p of d)if(o.test(p))return r(p)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return r(d[0])}return t}class km{started=Object.create(null);times=[];time(t){t in this.started&&vt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||vt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:s}of this.times)i=Math.max(s.length,i);for(const{name:s,start:r,end:o}of this.times)t.push(`${s.padEnd(i)} ${o-r}ms
`);return t.join("")}}function Cr(h,t){const i=t?URL.parse(h,t):URL.parse(h);return i?.protocol==="http:"||i?.protocol==="https:"}function li(h){h.preventDefault()}function ee(h){h.preventDefault(),h.stopPropagation()}function QS(h){console.log("Deprecated API usage: "+h)}class kl{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const i=this.#t.exec(t);if(!i)return null;const s=parseInt(i[1],10);let r=parseInt(i[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(i[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(i[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(i[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(i[6],10);d=d>=0&&d<=59?d:0;const p=i[7]||"Z";let g=parseInt(i[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(i[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(l+=g,u+=y):p==="+"&&(l-=g,u-=y),new Date(Date.UTC(s,r,o,l,u,d))}}function Iy(h,{scale:t=1,rotation:i=0}){const{width:s,height:r}=h.attributes.style,o=[0,0,parseInt(s),parseInt(r)];return new Vr({viewBox:o,userUnit:1,scale:t,rotation:i})}function wa(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(vt(`Not a valid color format: "${h}"`),[0,0,0])}function ZS(h){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const i of h.keys()){t.style.color=i;const s=window.getComputedStyle(t).color;h.set(i,wa(s))}t.remove()}function te(h){const{a:t,b:i,c:s,d:r,e:o,f:l}=h.getTransform();return[t,i,s,r,o,l]}function Pi(h){const{a:t,b:i,c:s,d:r,e:o,f:l}=h.getTransform().invertSelf();return[t,i,s,r,o,l]}function In(h,t,i=!1,s=!0){if(t instanceof Vr){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:l}=h,u=Ee.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,p=`var(--total-scale-factor) * ${o}px`,g=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=u?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!i||t.rotation%180===0?(l.width=g,l.height=y):(l.width=y,l.height=g)}s&&h.setAttribute("data-main-rotation",t.rotation)}class Mi{constructor(){const{pixelRatio:t}=Mi;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,i,s,r,o=-1){let l=1/0,u=1/0,d=1/0;s=Mi.capPixels(s,o),s>0&&(l=Math.sqrt(s/(t*i))),r!==-1&&(u=r/t,d=r/i);const p=Math.min(l,u,d);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,i){if(i>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+i/100));return t>0?Math.min(t,s):s}return t}}const Bl=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class JS{static get isDarkMode(){return wt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Gy{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:i}=t;i.width=i.height="0",i.display="none",i.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),wt(this,"commentForegroundColor",wa(s))}}function Vy(h,t,i,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return h=Math.round(h*s+r),t=Math.round(t*s+r),i=Math.round(i*s+r),[h,t,i]}function Bm(h,t){const i=h[0]/255,s=h[1]/255,r=h[2]/255,o=Math.max(i,s,r),l=Math.min(i,s,r),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=u<.5?d/(o+l):d/(2-o-l),o){case i:t[0]=((s-r)/d+(s<r?6:0))*60;break;case s:t[0]=((r-i)/d+2)*60;break;case r:t[0]=((i-s)/d+4)*60;break}}t[2]=u}function Oh(h,t){const i=h[0],s=h[1],r=h[2],o=(1-Math.abs(2*r-1))*s,l=o*(1-Math.abs(i/60%2-1)),u=r-o/2;switch(Math.floor(i/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function Pm(h){return h<=.03928?h/12.92:((h+.055)/1.055)**2.4}function zm(h,t,i){Oh(h,i),i.map(Pm);const s=.2126*i[0]+.7152*i[1]+.0722*i[2];Oh(t,i),i.map(Pm);const r=.2126*i[0]+.7152*i[1]+.0722*i[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const jm=new Map;function qy(h,t){const i=h[0]+h[1]*256+h[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=jm.get(i);if(s)return s;const r=new Float32Array(9),o=r.subarray(0,3),l=r.subarray(3,6);Bm(h,l);const u=r.subarray(6,9);Bm(t,u);const d=u[2]<.5,p=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),zm(l,u,o)<p){let g,y;d?(g=l[2],y=1):(g=0,y=l[2]);const b=.005;for(;y-g>b;){const A=l[2]=(g+y)/2;d===zm(l,u,o)<p?g=A:y=A}l[2]=d?y:g}return Oh(l,o),s=it.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),jm.set(i,s),s}function td({html:h,dir:t,className:i},s){const r=document.createDocumentFragment();if(typeof h=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=h.split(/(?:\r\n?|\n)/);for(let u=0,d=l.length;u<d;++u){const p=l[u];o.append(document.createTextNode(p)),u<d-1&&o.append(document.createElement("br"))}r.append(o)}else Jh.render({xfaHtml:h,div:r,intent:"richText"});r.firstChild.classList.add("richText",i),s.append(r)}class Lr{#t=null;#e=null;#n;#i=null;#r=null;#s=null;#a=null;#o=null;static#c=null;constructor(t){this.#n=t,Lr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=this.#n._uiManager._signal;i instanceof AbortSignal&&!i.aborted&&(t.addEventListener("contextmenu",li,{signal:i}),t.addEventListener("pointerdown",Lr.#l,{signal:i}));const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const r=this.#n.toolbarPosition;if(r){const{style:o}=t,l=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,ee(t)}#h(t){this.#n._focusEventsAllowed=!0,ee(t)}#f(t){const i=this.#n._uiManager._signal;return!(i instanceof AbortSignal)||i.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",li,{signal:i}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:i}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",Lr.#c[t]),this.#f(s)&&s.addEventListener("click",r=>{i.delete()},{signal:i._signal}),this.#i.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const i=await t.render();this.#f(i),this.#i.append(i,this.#m),this.#r=t}addComment(t,i=null){if(this.#s)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const r=this.#a=this.#m;i?(this.#i.insertBefore(s,i),this.#i.insertBefore(r,i)):this.#i.append(s,r),this.#s=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const i=t.renderButton();this.#f(i),this.#i.append(i,this.#m)}async addEditSignatureButton(t){const i=this.#o=await t.renderEditButton(this.#n);this.#f(i),this.#i.append(i,this.#m)}removeButton(t){t==="comment"&&(this.#s?.removeToolbarCommentButton(),this.#s=null,this.#a?.remove(),this.#a=null)}async addButton(t,i){switch(t){case"colorPicker":this.addColorPicker(i);break;case"altText":await this.addAltText(i);break;case"editSignature":await this.addEditSignatureButton(i);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(i);break}}async addButtonBefore(t,i,s){const r=this.#i.querySelector(s);r&&t==="comment"&&this.addComment(i,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class tE{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const i=this.#n._signal;i instanceof AbortSignal&&!i.aborted&&t.addEventListener("contextmenu",li,{signal:i});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#n.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#r(t,i){let s=0,r=0;for(const o of t){const l=o.y+o.height;if(l<s)continue;const u=o.x+(i?o.width:0);if(l>s){r=u,s=l;continue}i?u>r&&(r=u):u<r&&(r=u)}return[i?1-r:r,s]}show(t,i,s){const[r,o]=this.#r(i,s),{style:l}=this.#e||=this.#i();t.append(this.#e),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(t,i,s,r){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",i);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",s);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",li,{signal:u}),o.addEventListener("click",r,{signal:u})),this.#t.append(o)}}function Xy(h,t,i){for(const s of i)t.addEventListener(s,h[s].bind(h))}class eE{#t=0;get id(){return`${Nr}${this.#t++}`}}class ed{#t=Qh();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return wt(this,"_isSVGFittingCanvas",o)}async#i(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof i=="string"?(s.url=i,r=await Ea(i,"blob")):i instanceof File?r=s.file=i:i instanceof Blob&&(r=i),r.type==="image/svg+xml"){const o=ed._isSVGFittingCanvas,l=new FileReader,u=new Image,d=new Promise((p,g)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,p()},l.onload=async()=>{const y=s.svgUrl=l.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=l.onerror=g});l.readAsDataURL(r),await d}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){vt(r),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:i,name:s,size:r,type:o}=t;return this.#i(`${i}_${s}_${r}_${o}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,i){const s=await i;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:s}=i;return delete i.blobPromise,this.getFromBlob(i.id,s)}return this.getFromUrl(i.url)}getFromCanvas(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(i.width,i.height);return r.getContext("2d").drawImage(i,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const i=this.#n.get(t);return i?.isSvg?i.svgUrl:null}deleteId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:s}=i;if(!i.url&&!i.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),i.blobPromise=r.convertToBlob()}s.close?.(),i.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class iE{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:i,post:s,mustExec:r,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const d={cmd:t,undo:i,post:s,type:o};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(d);return}if(l&&this.#t[this.#i].type===o){u&&(d.undo=this.#t[this.#i].undo),this.#t[this.#i]=d;return}const p=this.#i+1;p===this.#n?this.#t.splice(0,1):(this.#i=p,p<this.#t.length&&this.#t.splice(p)),this.#t.push(d)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let i=this.#i;i>=0;i--)if(this.#t[i].type!==t){this.#t.splice(i+1,this.#i-i),this.#i=i;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Xr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=Ee.platform;for(const[s,r,o={}]of t)for(const l of s){const u=l.startsWith("mac+");i&&u?(this.callbacks.set(l.slice(4),{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1))):!i&&!u&&(this.callbacks.set(l,{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i}exec(t,i){if(!this.allKeys.has(i.key))return;const s=this.callbacks.get(this.#t(i));if(!s)return;const{callback:r,options:{bubbles:o=!1,args:l=[],checker:u=null}}=s;u&&!u(t,i)||(r.bind(t,...l,i)(),o||ee(i))}}class id{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return ZS(t),wt(this,"_colors",t)}convert(t){const i=wa(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[s,r]of this._colors)if(r.every((o,l)=>o===i[l]))return id._colorsMapping.get(s);return i}getHexCode(t){const i=this._colors.get(t);return i?it.makeHexColor(...i):t}}class dn{#t=new AbortController;#e=null;#n=null;#i=new Map;#r=new Map;#s=null;#a=null;#o=null;#c=new iE;#l=null;#d=null;#h=null;#f=0;#m=new Set;#p=null;#u=null;#g=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#T=null;#w=null;#A=null;#C=null;#E=!1;#_=null;#D=new eE;#R=!1;#M=!1;#z=!1;#O=null;#k=null;#j=null;#B=null;#V=null;#x=bt.NONE;#S=new Set;#N=null;#F=null;#H=null;#Y=null;#X=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#I=[0,0];#P=null;#q=null;#Z=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=dn.prototype,i=l=>l.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),s=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return wt(this,"_keyboardManager",new Xr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#q.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:i}]]))}constructor(t,i,s,r,o,l,u,d,p,g,y,b,A,E,S,T){const w=this._signal=this.#t.signal;this.#q=t,this.#Z=i,this.#J=s,this.#s=r,this.#l=o,this.#F=l,this.#X=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:w}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),u._on("setpreference",this.onSetPreference.bind(this),{signal:w}),u._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:w}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:w}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:w}),this.#lt(),this.#dt(),this.#et(),this.#a=d.annotationStorage,this.#T=d.filterFactory,this.#H=p,this.#C=g||null,this.#y=y,this.#v=b,this.#b=A,this.#V=E||null,this.viewParameters={realScale:ms.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=T!==!1,o?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#i.clear(),this.#g.clear(),this.#B?.clear(),this.#e=null,this.#S.clear(),this.#c.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#F?.destroy(),this.#_?.hide(),this.#_=null,this.#j?.destroy(),this.#j=null,this.#n=null,this.#w&&(clearTimeout(this.#w),this.#w=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return wt(this,"hcmFilter",this.#H?this.#T.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return wt(this,"direction",getComputedStyle(this.#q).direction)}get _highlightColors(){return wt(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(i=>i.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return wt(this,"highlightColors",null);const i=new Map,s=!!this.#H;for(const[r,o]of t){const l=r.endsWith("_HCM");if(s&&l){i.set(r.replace("_HCM",""),o);continue}!s&&!l&&i.set(r,o)}return wt(this,"highlightColors",i)}get highlightColorNames(){return wt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const i=this.highlightColorNames.get(t);return this._highlightColors.get(i)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#j=t}editAltText(t,i=!1){this.#s?.editAltText(this,t,i)}hasCommentManager(){return!!this.#l}editComment(t,i,s,r){this.#l?.showDialog(this,t,i,s,r)}selectComment(t,i){this.#r.get(t)?.getEditorByUID(i)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,i,s=void 0){this.#l?.toggleCommentPopup(t,i,s)}makeCommentColor(t,i){return t&&this.#l?.makeCommentColor(t,i)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:i,promise:s}=Promise.withResolvers(),r=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",r),i())};this._eventBus.on("editorsrendered",r),await s}getSignature(t){this.#F?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#F}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){t==="enableNewAltTextWhenAddingImage"&&(this.#b=i)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#q.focus()}findParent(t,i){for(const s of this.#r.values()){const{x:r,y:o,width:l,height:u}=s.div.getBoundingClientRect();if(t>=r&&t<=r+l&&i>=o&&i<=o+u)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ms.PDF_TO_CSS_UNITS;for(const i of this.#g)i.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",i=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u}=s,d=s.toString(),g=this.#Q(s).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;s.empty();const b=this.#tt(g),A=this.#x===bt.NONE,E=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u,text:d});A&&this.showAllEditors("highlight",!0,!0),i&&S?.editComment()};if(A){this.switchToMode(bt.HIGHLIGHT,E);return}E()}commentSelection(t=""){this.highlightSelection(t,!0)}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Q(t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#_||=new tE(this),this.#_.show(s,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const i=`${Nr}${t}`,s=this.#a.getRawValue(i);return s&&this.#a.remove(i),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,i=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),i?s.setAttribute("data-l10n-args",JSON.stringify(i)):s.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#N&&(this.#_?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===this.#N)return;const r=this.#Q(t).closest(".textLayer");if(!r){this.#N&&(this.#_?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#N=i,this.#L({hasSelectedText:!0}),!(this.#x!==bt.HIGHLIGHT&&this.#x!==bt.NONE)&&(this.#x===bt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#x===bt.HIGHLIGHT?this.#tt(r):null;if(o?.toggleDrawing(),this.#M){const l=new AbortController,u=this.combinedSignal(l),d=p=>{p.type==="pointerup"&&p.button!==0||(l.abort(),o?.toggleDrawing(!0),p.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#x===bt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#rt()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#S)if(i.div.contains(t)){this.#k=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,i]=this.#k;this.#k=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#O?.abort(),this.#O=null}#it(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#nt(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#it()}removeEditListeners(){this.#ht(),this.#nt()}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const s of this.#S){const r=s.serialize(!0);r&&i.push(r)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const o of i.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){vt(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of s){const p=await r.deserialize(d);if(!p)return;o.push(p)}const l=()=>{for(const d of o)this.#st(d);this.#at(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){vt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#x!==bt.NONE&&!this.isEditorHandlingKeyboard&&dn._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#L(t){Object.entries(t).some(([s,r])=>this.#$[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#x===bt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Rt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#it(),this.#L({isEditing:this.#x!==bt.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#nt(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const i of this.#u)this.#G(i.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,i=null,s=!1,r=!1,o=!1){if(this.#x!==t&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#x===bt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#x=t,t===bt.NONE){this.setEditingState(!1),this.#pt();for(const l of this.#i.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const l of this.#i.values())l.addStandaloneCommentButton();t===bt.SIGNATURE&&await this.#F?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const l of this.#r.values())l.updateMode(t);if(t===bt.POPUP){this.#n||=await this.#X.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const l=new Set,u=[];for(const d of this.#i.values()){const{annotationElementId:p,hasComment:g,deleted:y}=d;p&&l.add(p),g&&!y&&u.push(d.getData())}for(const d of this.#n){const{id:p,popupRef:g,contentsObj:y}=d;g&&y?.str&&!l.has(p)&&!this.#m.has(p)&&u.push(d)}this.#l?.showSidebar(u)}if(!i){s&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const l of this.#i.values())l.uid===i?(this.setSelected(l),o?l.editComment():r?l.enterInEditMode():l.focus()):l.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#x&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,i){if(this.#u){switch(t){case Rt.CREATE:this.currentLayer.addNewEditor(i);return;case Rt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,i),this.showAllEditors("highlight",i);break}if(this.hasSelection)for(const s of this.#S)s.updateParams(t,i);else for(const s of this.#u)s.updateDefaultParams(t,i)}}showAllEditors(t,i,s=!1){for(const o of this.#i.values())o.editorType===t&&o.show(i);(this.#Y?.get(Rt.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#G([[Rt.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#z!==t){this.#z=t;for(const i of this.#r.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const i of this.#r.values())t.push(i.enable());await Promise.all(t);for(const i of this.#i.values())i.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#r.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const i of this.#i.values())i.pageIndex===t&&(yield i)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.focusMainContainer(),this.#w=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#st(t){const i=this.#r.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#S);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const i of this.#S)i!==t&&i.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#L({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...this.#S],s=()=>{this._editorUndoBar?.show(r,i.length===1?i[0].editorType:i.length);for(const o of i)o.remove()},r=()=>{for(const o of i)this.#st(o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const i of this.#S)i.unselect();this.#S.clear();for(const i of t)i.isEmpty()||(this.#S.add(i),i.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#S)t.commit();this.#at(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#x!==bt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#S)t.unselect();this.#S.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#I[0]+=t,this.#I[1]+=i;const[r,o]=this.#I,l=[...this.#S],u=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#I[0]=this.#I[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#i.has(d.id)&&(d.translateInPage(r,o),d.translationDone())},undo:()=>{for(const d of l)this.#i.has(d.id)&&(d.translateInPage(-r,-o),d.translationDone())},mustExec:!1})},u);for(const d of l)d.translateInPage(t,i),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#S)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let i=!1;for(const[{x:r,y:o,pageIndex:l},u]of t)u.newX=r,u.newY=o,u.newPageIndex=l,i||=r!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!i)return!1;const s=(r,o,l,u)=>{if(this.#i.has(r.id)){const d=this.#r.get(u);d?r._setParentAndPosition(d,o,l):(r.pageIndex=u,r.x=o,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:l,newPageIndex:u}]of t)s(r,o,l,u)},undo:()=>{for(const[r,{savedX:o,savedY:l,savedPageIndex:u}]of t)s(r,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#p)for(const s of this.#p.keys())s.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#x}isEditingMode(){return this.#x!==bt.NONE}get imageManager(){return wt(this,"imageManager",new ed)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let p=0,g=i.rangeCount;p<g;p++)if(!t.contains(i.getRangeAt(p).commonAncestorContainer))return null;const{x:s,y:r,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(p,g,y,b)=>({x:(g-r)/l,y:1-(p+y-s)/o,width:b/l,height:y/o});break;case"180":u=(p,g,y,b)=>({x:1-(p+y-s)/o,y:1-(g+b-r)/l,width:y/o,height:b/l});break;case"270":u=(p,g,y,b)=>({x:1-(g+b-r)/l,y:(p-s)/o,width:b/l,height:y/o});break;default:u=(p,g,y,b)=>({x:(p-s)/o,y:(g-r)/l,width:y/o,height:b/l});break}const d=[];for(let p=0,g=i.rangeCount;p<g;p++){const y=i.getRangeAt(p);if(!y.collapsed)for(const{x:b,y:A,width:E,height:S}of y.getClientRects())E===0||S===0||d.push(u(b,A,E,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#o||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const i=this.#o?.get(t.data.id);if(!i)return;const s=this.#a.getRawValue(i);s&&(this.#x===bt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,i,s){const r=this.#B?.get(t);r&&(r.setCanvas(i,s),this.#B.delete(t))}addMissingCanvas(t,i){(this.#B||=new Map).set(t,i)}}class Fi{#t=null;#e=!1;#n=null;#i=null;#r=null;#s=null;#a=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Fi.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Fi._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const i=this.#i=document.createElement("span");t.append(i),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Fi.#f.missing),i.setAttribute("data-l10n-id",Fi.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",li,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#a=!0,r(o))},{signal:s}),await this.#p(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Fi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const i=this.#o=document.createElement("div");i.className="noAltTextBadge",this.#c.div.append(i)}this.#o.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#l===i&&(i=this.#d),{altText:i,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:s,textWithDisclaimer:r,cancel:o=!1}){s&&(this.#l=s,this.#d=r),!(this.#t===t&&this.#e===i)&&(o||(this.#t=t,this.#e=i),this.#p())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Fi.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",Fi.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#r;if(!i){this.#r=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#c.id}`;const r=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#c.getElementForAltText()?.setAttribute("aria-describedby",i.id)}}class vl{#t=null;#e=null;#n=!1;#i=null;#r=null;#s=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const i=this.#i.commentButtonPosition;if(i){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-i[0]:i[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*i[1]}% - var(--comment-button-dim))`;const r=this.#i.commentButtonColor;r&&(s.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:i,height:s}=this.#t.getBoundingClientRect(),{x:r,y:o,width:l,height:u}=this.#i.parent.boundingClientRect;return[(t-r)/l,(i+s-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:i}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=i)}#d(t,i){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",i?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=this.#i._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",li,{signal:s}),i&&(t.addEventListener("focusin",o=>{this.#i._focusEventsAllowed=!1,ee(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#i._focusEventsAllowed=!0,ee(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#n=!0,r(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:s}),t}edit(t){const i=this.commentPopupPositionInLayer;let s,r;if(i)[s,r]=i;else{[s,r]=this.#i.commentButtonPosition;const{width:g,height:y,x:b,y:A}=this.#i;s=b+s*g,r=A+r*y}const o=this.#i.parent.boundingClientRect,{x:l,y:u,width:d,height:p}=o;this.#i._uiManager.editComment(this.#i,l+s*d,u+r*p,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#s,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#s=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}setInitialText(t,i=null){this.#r=t,this.data=t,this.#o=null,this.#s=i}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#s=null,this.#o=null,this.#i=null,this.#n=!1,this.#c=!1}}class Yr{#t;#e=!1;#n=null;#i;#r;#s;#a;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#t=t,this.#n=s,this.#i=i,this.#r=r,this.#s=o,this.#a=l,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Mi.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,o=AbortSignal.any([this.#c,r.signal]),l=this.#t,u={capture:!0,signal:o,passive:!1},d=p=>{p.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(ee(p),d(p))},u),l.addEventListener("pointerup",d,u),l.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),l);const u=this.#p.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",ee,l),o.addEventListener("pointermove",ee,l),o.addEventListener("pointercancel",ee,l),o.addEventListener("pointerup",ee,l),this.#r?.()}if(ee(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]),this.#l={touch0X:i.screenX,touch0Y:i.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;ee(t);let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]);const{screenX:r,screenY:o}=i,{screenX:l,screenY:u}=s,d=this.#l,{touch0X:p,touch0Y:g,touch1X:y,touch1Y:b}=d,A=y-p,E=b-g,S=l-r,T=u-o,w=Math.hypot(S,T)||1,x=Math.hypot(A,E)||1;if(!this.#e&&Math.abs(x-w)<=Yr.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=o,d.touch1X=l,d.touch1Y=u,!this.#e){this.#e=!0;return}const C=[(r+l)/2,(o+u)/2];this.#s?.(C,x,w)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(ee(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ut{#t=null;#e=null;#n=null;#i=null;#r=null;#s=!1;#a=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#p=!1;#u=null;#g=!1;#y=!1;#v=!1;#b=null;#T=0;#w=0;#A=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#E=!1;#_=ut._zIndex++;static _borderLineWidth=-1;static _colorManager=new id;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ut.prototype._resizeWithKeyboard,i=dn.TRANSLATE_SMALL,s=dn.TRANSLATE_BIG;return wt(this,"_resizerKeyboardManager",new Xr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],ut.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:i,rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[o,l];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return wt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new nE({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(ut._l10n??=t,ut._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ut._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ut._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){Yt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#E}set _isDraggable(t){this.#E=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,s,r){const[o,l]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/o,this.y=(i+r)/l,this.fixAndSetPosition()}_moveAfterPaste(t,i){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r),this._onTranslated()}#D([t,i],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,i){this.#D(this.parentDimensions,t,i)}translateInPage(t,i){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,i){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=i/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[d,p]=this.getBaseTranslation();l+=d,u+=p;const{style:g}=s;g.left=`${(100*l).toFixed(2)}%`,g.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:s}=ut,r=s/t,o=s/i;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[s,r]}=this;let{x:o,y:l,width:u,height:d}=this;if(u*=s,d*=r,o*=s,l*=r,this._mustFixPosition)switch(t){case 0:o=Le(o,0,s-u),l=Le(l,0,r-d);break;case 90:o=Le(o,0,s-d),l=Le(l,u,r);break;case 180:o=Le(o,u,s),l=Le(l,d,r);break;case 270:o=Le(o,d,s),l=Le(l,0,r-u);break}this.x=o/=s,this.y=l/=r;const[p,g]=this.getBaseTranslation();o+=p,l+=g,i.left=`${(100*o).toFixed(2)}%`,i.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#R(t,i,s){switch(s){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}}screenToPageTranslation(t,i){return ut.#R(t,i,this.parentRotation)}pageTranslationToScreen(t,i){return ut.#R(t,i,360-this.parentRotation)}#M(t){switch(t){case 90:{const[i,s]=this.pageDimensions;return[0,-i/s,s/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,s]=this.pageDimensions;return[0,i/s,-s/i,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,s]}=this;return[i*t,s*t]}setDims(){const{div:{style:t},width:i,height:s}=this;t.width=`${(100*i).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#z(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const s of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#O.bind(this,s),{signal:i}),r.addEventListener("contextmenu",li,{signal:i}),r.tabIndex=-1}this.div.prepend(this.#c)}#O(t,i){i.preventDefault();const{isMac:s}=Ee.platform;if(i.button!==0||i.ctrlKey&&s)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[i.screenX,i.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",ee,{passive:!1,signal:l}),window.addEventListener("contextmenu",li,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const p=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#j()};window.addEventListener("pointerup",p,{signal:l}),window.addEventListener("blur",p,{signal:l})}#k(t,i,s,r){this.width=s,this.height=r,this.x=t,this.y=i,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#j(){if(!this.#d)return;const{savedX:t,savedY:i,savedWidth:s,savedHeight:r}=this.#d;this.#d=null;const o=this.x,l=this.y,u=this.width,d=this.height;o===t&&l===i&&u===s&&d===r||this.addCommands({cmd:this.#k.bind(this,o,l,u,d),undo:this.#k.bind(this,t,i,s,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,i){const[s,r]=this.parentDimensions,o=this.x,l=this.y,u=this.width,d=this.height,p=ut.MIN_SIZE/s,g=ut.MIN_SIZE/r,y=this.#M(this.rotation),b=(k,G)=>[y[0]*k+y[2]*G,y[1]*k+y[3]*G],A=this.#M(360-this.rotation),E=(k,G)=>[A[0]*k+A[2]*G,A[1]*k+A[3]*G];let S,T,w=!1,x=!1;switch(t){case"topLeft":w=!0,S=(k,G)=>[0,0],T=(k,G)=>[k,G];break;case"topMiddle":S=(k,G)=>[k/2,0],T=(k,G)=>[k/2,G];break;case"topRight":w=!0,S=(k,G)=>[k,0],T=(k,G)=>[0,G];break;case"middleRight":x=!0,S=(k,G)=>[k,G/2],T=(k,G)=>[0,G/2];break;case"bottomRight":w=!0,S=(k,G)=>[k,G],T=(k,G)=>[0,0];break;case"bottomMiddle":S=(k,G)=>[k/2,G],T=(k,G)=>[k/2,0];break;case"bottomLeft":w=!0,S=(k,G)=>[0,G],T=(k,G)=>[k,0];break;case"middleLeft":x=!0,S=(k,G)=>[0,G/2],T=(k,G)=>[k,G/2];break}const C=S(u,d),O=T(u,d);let N=b(...O);const j=ut._round(o+N[0]),B=ut._round(l+N[1]);let V=1,Y=1,Q,J;if(i.fromKeyboard)({deltaX:Q,deltaY:J}=i);else{const{screenX:k,screenY:G}=i,[Z,ht]=this.#l;[Q,J]=this.screenToPageTranslation(k-Z,G-ht),this.#l[0]=k,this.#l[1]=G}if([Q,J]=E(Q/s,J/r),w){const k=Math.hypot(u,d);V=Y=Math.max(Math.min(Math.hypot(O[0]-C[0]-Q,O[1]-C[1]-J)/k,1/u,1/d),p/u,g/d)}else x?V=Le(Math.abs(O[0]-C[0]-Q),p,1)/u:Y=Le(Math.abs(O[1]-C[1]-J),g,1)/d;const ot=ut._round(u*V),ft=ut._round(d*Y);N=b(...T(ot,ft));const st=j-N[0],mt=B-N[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ot,this.height=ft,this.x=st,this.y=mt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Lr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[i,s]of t)await this._editToolbar.addButton(i,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const i=this._editToolbar?.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Fi.initialize(ut._l10n),this.#n=new Fi(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.#i||=new vl(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#i.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:i,date:s,deleted:r}}=this.#i;return{text:i,richText:t,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new vl(this),this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:i,richText:s}){if(!i||(this.#i||=new vl(this),this.#i.setInitialText(t,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new vl(this),this.#i.edit(t)}toggleComment(t,i=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,i)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,d=r-100,p=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,p,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:i}}){this.#i.data=i?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#s?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[i,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/i).toFixed(2)}%`,t.style.maxHeight=`${(100*i/s).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),Xy(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new Yr({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#x.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#x(t,i,s){let o=.7*(s/i)+1-.7;if(o===1)return;const l=this.#M(this.rotation),u=(j,B)=>[l[0]*j+l[2]*B,l[1]*j+l[3]*B],[d,p]=this.parentDimensions,g=this.x,y=this.y,b=this.width,A=this.height,E=ut.MIN_SIZE/d,S=ut.MIN_SIZE/p;o=Math.max(Math.min(o,1/b,1/A),E/b,S/A);const T=ut._round(b*o),w=ut._round(A*o);if(T===b&&w===A)return;this.#u||=[g,y,b,A];const x=u(b/2,A/2),C=ut._round(g+x[0]),O=ut._round(y+x[1]),N=u(T/2,w/2);this.x=C-N[0],this.y=O-N[1],this.width=T,this.height=w,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#j()}pointerdown(t){const{isMac:i}=Ee.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#F(t);return}this.#N(t)}#N(t){const{isMac:i}=Ee.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}#F(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),l={capture:!0,passive:!1,signal:o},u=p=>{r.abort(),this.#a=null,this.#p=!1,this._uiManager.endDragSession()||this.#N(p),s&&this._onStopDragging()};i&&(this.#T=t.clientX,this.#w=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",p=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=p;if(b!==this.#a){ee(p);return}const[A,E]=this.screenToPageTranslation(g-this.#T,y-this.#w);this.#T=g,this.#w=y,this._uiManager.dragSelectedEditors(A,E)},l),window.addEventListener("touchmove",ee,l),window.addEventListener("pointerdown",p=>{p.pointerType===this.#o&&(this.#C||p.isPrimary)&&u(p),ee(p)},l));const d=p=>{if(!this.#a||this.#a===p.pointerId){u(p);return}ee(p)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,i,s){t.changeParent(this),this.x=i,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,s=this.rotation){const r=this.parentScale,[o,l]=this.pageDimensions,[u,d]=this.pageTranslation,p=t/r,g=i/r,y=this.x*o,b=this.y*l,A=this.width*o,E=this.height*l;switch(s){case 0:return[y+p+u,l-b-g-E+d,y+p+A+u,l-b-g+d];case 90:return[y+g+u,l-b+p+d,y+g+E+u,l-b+p+A+d];case 180:return[y-p-A+u,l-b+g+d,y-p+u,l-b+g+E+d];case 270:return[y-g-E+u,l-b-p-A+d,y-g+u,l-b-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[s,r,o,l]=t,u=o-s,d=l-r;switch(this.rotation){case 0:return[s,i-l,u,d];case 90:return[s,i-r,d,u];case 180:return[o,i-r,u,d];case 270:return[o,i-l,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ut._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:i,date:s,opacity:r,deleted:o,richText:l},uid:u,pageIndex:d,creationDate:p,modificationDate:g}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:p,modificationDate:s||g,popupRef:!o,color:i,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return i<l&&r>0&&t<o&&s>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,i=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,i,s){const r=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[o,l]=r.pageDimensions,[u,d,p,g]=r.getRectInCurrentCoords(t.rect,l);return r.x=u/o,r.y=d/l,r.width=p/o,r.height=g/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#P(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#C?.destroy(),this.#C=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#z(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,i]}=this,[s,r,o,l]=this.getPDFRect();return[ut._round(s+(o-s)*t),ut._round(r+(l-r)*(1-i))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const i=this.#c.children;if(!this.#e){this.#e=Array.from(i);const l=this.#Y.bind(this),u=this.#X.bind(this),d=this._uiManager._signal;for(const p of this.#e){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",l,{signal:d}),p.addEventListener("blur",u,{signal:d}),p.addEventListener("focus",this.#$.bind(this,g),{signal:d}),p.setAttribute("data-l10n-id",ut._l10nResizer[g])}}const s=this.#e[0];let r=0;for(const l of i){if(l===s)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)this.#c.append(this.#c.firstChild);else if(o>r)for(let u=0;u<o-r;u++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const u of i){const p=this.#e[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",ut._l10nResizer[p])}}this.#I(0),this.#v=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){ut._resizerKeyboardManager.exec(this,t)}#X(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#$(t){this.#m=this.#v?t:""}#I(t){if(this.#e)for(const i of this.#e)i.tabIndex=t}_resizeWithKeyboard(t,i){this.#v&&this.#B(this.#m,{deltaX:t,deltaY:i,fromKeyboard:!0})}#P(){this.#v=!1,this.#I(-1),this.#j()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,i){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){this.#A||=new Map;const{action:s}=t;let r=this.#A.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(s),this.#A.size===0&&(this.#A=null)},ut._telemetryTimeout),this.#A.set(s,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const s=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),s.before(i)}return i}resetAnnotationElement(t){const{firstChild:i}=t.container;i?.nodeName==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}}class nE extends ut{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Fm=3285377520,vi=4294901760,zi=65535;class Yy{constructor(t){this.h1=t?t&4294967295:Fm,this.h2=t?t&4294967295:Fm}update(t){let i,s;if(typeof t=="string"){i=new Uint8Array(t.length*2),s=0;for(let S=0,T=t.length;S<T;S++){const w=t.charCodeAt(S);w<=255?i[s++]=w:(i[s++]=w>>>8,i[s++]=w&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),s=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,o=s-r*4,l=new Uint32Array(i.buffer,0,r);let u=0,d=0,p=this.h1,g=this.h2;const y=3432918353,b=461845907,A=y&zi,E=b&zi;for(let S=0;S<r;S++)S&1?(u=l[S],u=u*y&vi|u*A&zi,u=u<<15|u>>>17,u=u*b&vi|u*E&zi,p^=u,p=p<<13|p>>>19,p=p*5+3864292196):(d=l[S],d=d*y&vi|d*A&zi,d=d<<15|d>>>17,d=d*b&vi|d*E&zi,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=i[r*4+2]<<16;case 2:u^=i[r*4+1]<<8;case 1:u^=i[r*4],u=u*y&vi|u*A&zi,u=u<<15|u>>>17,u=u*b&vi|u*E&zi,r&1?p^=u:g^=u}this.h1=p,this.h2=g}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&vi|t*36045&zi,i=i*4283543511&vi|((i<<16|t>>>16)*2950163797&vi)>>>16,t^=i>>>1,t=t*444984403&vi|t*60499&zi,i=i*3301882366&vi|((i<<16|t>>>16)*3120437893&vi)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const Nh=Object.freeze({map:null,hash:"",transfer:void 0});class nd{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const s=this.#i.get(t);return s===void 0?i:Object.assign(i,s)}getRawValue(t){return this.#i.get(t)}remove(t){const i=this.#i.get(t);if(i!==void 0&&(i instanceof ut&&this.#n.delete(i.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#i.values())if(s instanceof ut)return;this.onAnnotationEditor(null)}}setValue(t,i){const s=this.#i.get(t);let r=!1;if(s!==void 0)for(const[o,l]of Object.entries(i))s[o]!==l&&(r=!0,s[o]=l);else r=!0,this.#i.set(t,i);r&&this.#r(),i instanceof ut&&((this.#n||=new Map).set(i.annotationElementId,i),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new $y(this)}get serializable(){if(this.#i.size===0)return Nh;const t=new Map,i=new Yy,s=[],r=Object.create(null);let o=!1;for(const[l,u]of this.#i){const d=u instanceof ut?u.serialize(!1,r):u;d&&(t.set(l,d),i.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&s.push(l.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:s}:Nh}get editorStats(){let t=null;const i=new Map;let s=0,r=0;for(const o of this.#i.values()){if(!(o instanceof ut)){o.popup&&(o.popup.deleted?r+=1:s+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(s+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;i.has(u)||i.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[p,g]of Object.entries(l)){if(p==="type")continue;let y=d.get(p);y||(y=new Map,d.set(p,y));const b=y.get(g)??0;y.set(g,b+1)}}if((r>0||s>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:s}),!t)return null;for(const[o,l]of i)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,i){const s=this.#n?.get(t);return s?(s.updateFromAnnotationLayer(i),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const i of this.#n.values())i.serialize()&&t.push(i.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class $y extends nd{#t;constructor(t){super();const{map:i,hash:s,transfer:r}=t.serializable,o=structuredClone(i,r?{transfer:r}:null);this.#t={map:o,hash:s,transfer:r}}get print(){Yt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return wt(this,"modifiedIds",{ids:new Set,hash:""})}}class sE{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:i,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Dt(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:l}=t,u=new FontFace(r,o,l);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),s?.(t)}catch{vt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Yt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw vt(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return wt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return wt(this,"isSyncFontLoadingSupported",Pe||Ee.platform.isFirefox)}_queueLoadingCallback(t){function i(){for(Dt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:i,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return wt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function s(O,N){return O.charCodeAt(N)<<24|O.charCodeAt(N+1)<<16|O.charCodeAt(N+2)<<8|O.charCodeAt(N+3)&255}function r(O,N,j,B){const V=O.substring(0,N),Y=O.substring(N+j);return V+B+Y}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let p=0;function g(O,N){if(++p>30){vt("Load test font never loaded."),N();return}if(d.font="30px "+O,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(g.bind(null,O,N))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,y.length,y);const E=16,S=1482184792;let T=s(b,E);for(o=0,l=y.length-3;o<l;o+=4)T=T-S+s(y,o)|0;o<y.length&&(T=T-S+s(y+"XXX",o)|0),b=r(b,E,4,qS(T));const w=`url(data:font/opentype;base64,${btoa(b)});`,x=`@font-face {font-family:"${y}";src:${w}}`;this.insertRule(x);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const O of[t.loadedName,y]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=O,C.append(N)}this._document.body.append(C),g(y,()=>{C.remove(),i.complete()})}}class aE{#t;constructor(t,i=null,s,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=i,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Fy(this.data)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const s=this.loadedName+"_path_"+i;let r;try{r=t.get(s)}catch(l){vt(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(r||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[i]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function rE(h){if(h instanceof URL)return h.href;if(typeof h=="string"){if(Pe)return h;const t=URL.parse(h,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function oE(h){if(Pe&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return Gr(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h?.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Al(h){if(typeof h!="string")return null;if(h.endsWith("/"))return h;throw new Error(`Invalid factory url: "${h}" must include trailing slash.`)}const kh=h=>typeof h=="object"&&Number.isInteger(h?.num)&&h.num>=0&&Number.isInteger(h?.gen)&&h.gen>=0,lE=h=>typeof h=="object"&&typeof h?.name=="string",Ky=KS.bind(null,kh,lE);class cE{#t=new Map;#e=Promise.resolve();postMessage(t,i){const s={data:structuredClone(t,i?{transfer:i}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,s)})}addEventListener(t,i,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){vt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,i);r=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(i,r)}removeEventListener(t,i){this.#t.get(i)?.(),this.#t.delete(i)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Sl={DATA:1,ERROR:2},ge={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Um(){}function Xe(h){if(h instanceof hn||h instanceof Nl||h instanceof Om||h instanceof kr||h instanceof Sh)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||Yt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new hn(h.message);case"InvalidPDFException":return new Nl(h.message);case"PasswordException":return new Om(h.message,h.code);case"ResponseException":return new kr(h.message,h.status,h.missing);case"UnknownErrorException":return new Sh(h.message,h.details)}return new Sh(h.message,h.toString())}class Rr{#t=new AbortController;constructor(t,i,s){this.sourceName=t,this.targetName=i,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Sl.DATA)r.resolve(t.data);else if(t.callback===Sl.ERROR)r.reject(Xe(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(i,t.data).then(function(l){o.postMessage({sourceName:s,targetName:r,callback:Sl.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:s,targetName:r,callback:Sl.ERROR,callbackId:t.callbackId,reason:Xe(l)})});return}if(t.streamId){this.#n(t);return}i(t.data)}on(t,i){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=i}send(t,i,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},s)}sendWithPromise(t,i,s){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:i},s)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,i,s,r){const o=this.streamId++,l=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:i,desiredSize:p.desiredSize},r),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:l,targetName:u,stream:ge.PULL,streamId:o,desiredSize:p.desiredSize}),g.promise},cancel:p=>{Dt(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:u,stream:ge.CANCEL,streamId:o,reason:Xe(p)}),g.promise}},s)}#n(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],d={enqueue(p,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:r,stream:ge.ENQUEUE,streamId:i,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:ge.CLOSE,streamId:i}),delete l.streamSinks[i])},error(p){Dt(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:ge.ERROR,streamId:i,reason:Xe(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[i]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ge.START_COMPLETE,streamId:i,success:!0})},function(p){o.postMessage({sourceName:s,targetName:r,stream:ge.START_COMPLETE,streamId:i,reason:Xe(p)})})}#i(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,l=this.streamControllers[i],u=this.streamSinks[i];switch(t.stream){case ge.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(Xe(t.reason));break;case ge.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(Xe(t.reason));break;case ge.PULL:if(!u){o.postMessage({sourceName:s,targetName:r,stream:ge.PULL_COMPLETE,streamId:i,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Um).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ge.PULL_COMPLETE,streamId:i,success:!0})},function(p){o.postMessage({sourceName:s,targetName:r,stream:ge.PULL_COMPLETE,streamId:i,reason:Xe(p)})});break;case ge.ENQUEUE:if(Dt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case ge.CLOSE:if(Dt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,i);break;case ge.ERROR:Dt(l,"error should have stream controller"),l.controller.error(Xe(t.reason)),this.#r(l,i);break;case ge.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(Xe(t.reason)),this.#r(l,i);break;case ge.CANCEL:if(!u)break;const d=Xe(t.reason);Promise.try(u.onCancel||Um,d).then(function(){o.postMessage({sourceName:s,targetName:r,stream:ge.CANCEL_COMPLETE,streamId:i,success:!0})},function(p){o.postMessage({sourceName:s,targetName:r,stream:ge.CANCEL_COMPLETE,streamId:i,reason:Xe(p)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#r(t,i){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.#t?.abort(),this.#t=null}}class Wy{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,i);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,i,s){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){Yt("Abstract method `_createCanvas` called.")}}class uE extends Wy{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const s=this._document.createElement("canvas");return s.width=t,s.height=i,s}}class Qy{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){Yt("Abstract method `_fetch` called.")}}class Hm extends Qy{async _fetch(t){const i=await Ea(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):Gr(i)}}class Zy{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,s,r,o){return"none"}destroy(t=!1){}}class hE extends Zy{#t;#e;#n;#i;#r;#s;#a=0;constructor({docId:t,ownerDocument:i=globalThis.document}){super(),this.#i=t,this.#r=i}get#o(){return this.#e||=new Map}get#c(){return this.#s||=new Map}get#l(){if(!this.#n){const t=this.#r.createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=this.#r.createElementNS(on,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#r.createElementNS(on,"defs"),t.append(s),s.append(this.#n),this.#r.body.append(t)}return this.#n}#d(t){if(t.length===1){const d=t[0],p=new Array(256);for(let y=0;y<256;y++)p[y]=d[y]/255;const g=p.join(",");return[g,g,g]}const[i,s,r]=t,o=new Array(256),l=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=i[d]/255,l[d]=s[d]/255,u[d]=r[d]/255;return[o.join(","),l.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const i=this.#r.URL;i!==this.#r.baseURI&&(qr(i)?vt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Wh(i,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let i=this.#o.get(t);if(i)return i;const[s,r,o]=this.#d(t),l=t.length===1?s:`${s}${r}${o}`;if(i=this.#o.get(l),i)return this.#o.set(t,i),i;const u=`g_${this.#i}_transfer_map_${this.#a++}`,d=this.#h(u);this.#o.set(t,d),this.#o.set(l,d);const p=this.#p(u);return this.#g(s,r,o,p),d}addHCMFilter(t,i){const s=`${t}-${i}`,r="base";let o=this.#c.get(r);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(r,o)),!t||!i))return o.url;const l=this.#v(t);t=it.makeHexColor(...l);const u=this.#v(i);if(i=it.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const d=new Array(256);for(let A=0;A<=255;A++){const E=A/255;d[A]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const p=d.join(","),g=`g_${this.#i}_hcm_filter`,y=o.filter=this.#p(g);this.#g(p,p,p,y),this.#m(y);const b=(A,E)=>{const S=l[A]/255,T=u[A]/255,w=new Array(E+1);for(let x=0;x<=E;x++)w[x]=S+x/E*(T-S);return w.join(",")};return this.#g(b(0,5),b(1,5),b(2,5),y),o.url=this.#h(g),o.url}addAlphaFilter(t){let i=this.#o.get(t);if(i)return i;const[s]=this.#d([t]),r=`alpha_${s}`;if(i=this.#o.get(r),i)return this.#o.set(t,i),i;const o=`g_${this.#i}_alpha_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(r,l);const u=this.#p(o);return this.#y(s,u),l}addLuminosityFilter(t){let i=this.#o.get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=this.#d([t]),r=`luminosity_${s}`):r="luminosity",i=this.#o.get(r),i)return this.#o.set(t,i),i;const o=`g_${this.#i}_luminosity_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(r,l);const u=this.#p(o);return this.#f(u),t&&this.#y(s,u),l}addHighlightHCMFilter(t,i,s,r,o){const l=`${i}-${s}-${r}-${o}`;let u=this.#c.get(t);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#c.set(t,u)),!i||!s))return u.url;const[d,p]=[i,s].map(this.#v.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[b,A]=[r,o].map(this.#v.bind(this));y<g&&([g,y,b,A]=[y,g,A,b]),this.#l.style.color="";const E=(w,x,C)=>{const O=new Array(256),N=(y-g)/C,j=w/255,B=(x-w)/(255*C);let V=0;for(let Y=0;Y<=C;Y++){const Q=Math.round(g+Y*N),J=j+Y*B;for(let ot=V;ot<=Q;ot++)O[ot]=J;V=Q+1}for(let Y=V;Y<256;Y++)O[Y]=O[V-1];return O.join(",")},S=`g_${this.#i}_hcm_${t}_filter`,T=u.filter=this.#p(S);return this.#m(T),this.#g(E(b[0],A[0],5),E(b[1],A[1],5),E(b[2],A[2],5),T),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#a=0)}#f(t){const i=this.#r.createElementNS(on,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)}#m(t){const i=this.#r.createElementNS(on,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)}#p(t){const i=this.#r.createElementNS(on,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),this.#l.append(i),i}#u(t,i,s){const r=this.#r.createElementNS(on,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)}#g(t,i,s,r){const o=this.#r.createElementNS(on,"feComponentTransfer");r.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",i),this.#u(o,"feFuncB",s)}#y(t,i){const s=this.#r.createElementNS(on,"feComponentTransfer");i.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,wa(getComputedStyle(this.#l).getPropertyValue("color"))}}class Jy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){Yt("Abstract method `_fetch` called.")}}class Im extends Jy{async _fetch(t){const i=await Ea(t,"arraybuffer");return new Uint8Array(i)}}class tb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load wasm data at: ${i}`)})}async _fetch(t){Yt("Abstract method `_fetch` called.")}}class Gm extends tb{async _fetch(t){const i=await Ea(t,"arraybuffer");return new Uint8Array(i)}}Pe&&vt("Please use the `legacy` build in Node.js environments.");async function sd(h){const i=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(i)}class dE extends Zy{}class fE extends Wy{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class pE extends Qy{async _fetch(t){return sd(t)}}class gE extends Jy{async _fetch(t){return sd(t)}}class mE extends tb{async _fetch(t){return sd(t)}}const ra="__forcedDependency",{floor:Vm,ceil:qm}=Math;function El(h,t,i,s,r,o){h[t*4+0]=Math.min(h[t*4+0],i),h[t*4+1]=Math.min(h[t*4+1],s),h[t*4+2]=Math.max(h[t*4+2],r),h[t*4+3]=Math.max(h[t*4+3],o)}const Bh=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class yE{#t;#e;constructor(t,i){this.#t=t,this.#e=i}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Bh}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const wl=(h,t)=>{if(!h)return;let i=h.get(t);return i||(i={dependencies:new Set,isRenderingOperation:!1},h.set(t,i)),i};class bE{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[ra]:[]};#n=new Map;#i=[];#r=[];#s=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#p;#u;#g;constructor(t,i,s=!1){this.#f=t.width,this.#m=t.height,this.#y(i),s&&(this.#g=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,i){const s=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),i&&i.length>0?(this.#u.set(i),this.#u.fill(Bh,i.length)):this.#u.fill(Bh)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[ra]:{__proto__:this.#e[ra]}},this.#a={__proto__:this.#a},this.#i.push(t),this}restore(t){const i=Object.getPrototypeOf(this.#t);if(i===null)return this;this.#t=i,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const s=this.#i.pop();return s!==void 0&&(wl(this.#g,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const i=this.#i.pop();return i!==void 0&&(wl(this.#g,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const i=this.#r.pop();return i!==void 0&&(wl(this.#g,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}pushBaseTransform(t){return this.#s.push(it.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(t,i){return this.#t[t]=i,this}recordIncrementalData(t,i){return this.#e[t].push(i),this}resetIncrementalData(t,i){return this.#e[t].length=0,this}recordNamedData(t,i){return this.#n.set(t,i),this}recordSimpleDataFromNamed(t,i,s){this.#t[t]=this.#n.get(i)??s}recordFutureForcedDependency(t,i){return this.recordIncrementalData(ra,i),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const i of t)i in this.#t&&this.recordFutureForcedDependency(i,this.#t[i]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(ra,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,i,s,r,o,l){const u=it.multiplyByDOMMatrix(this.#s.at(-1),i.getTransform()),d=[1/0,1/0,-1/0,-1/0];it.axialAlignedBoundingBox([s,o,r,l],u,d);const p=it.intersect(this.#a,d);return p?(this.#a[0]=p[0],this.#a[1]=p[1],this.#a[2]=p[2],this.#a[3]=p[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,i,s,r,o,l){const u=this.#a;if(u[0]===1/0)return this;const d=it.multiplyByDOMMatrix(this.#s.at(-1),i.getTransform());if(u[0]===-1/0)return it.axialAlignedBoundingBox([s,o,r,l],d,this.#o),this;const p=[1/0,1/0,-1/0,-1/0];return it.axialAlignedBoundingBox([s,o,r,l],d,p),this.#o[0]=Math.min(this.#o[0],Math.max(p[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(p[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(p[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(p[3],u[3])),this}recordCharacterBBox(t,i,s,r=1,o=0,l=0,u){const d=s.bbox;let p,g;if(d&&(p=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(s),p!==!1&&(g=[0,0,0,0],it.axialAlignedBoundingBox(d,s.fontMatrix,g),(r!==1||o!==0||l!==0)&&it.scaleMinMax([r,0,0,-r,o,l],g),p)))return this.recordBBox(t,i,g[0],g[2],g[1],g[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return d&&g&&p===void 0&&(p=g[0]<=o-y.actualBoundingBoxLeft&&g[2]>=o+y.actualBoundingBoxRight&&g[1]<=l-y.actualBoundingBoxAscent&&g[3]>=l+y.actualBoundingBoxDescent,this.#h.set(s,p),p)?this.recordBBox(t,i,g[0],g[2],g[1],g[3]):this.recordBBox(t,i,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,l-y.actualBoundingBoxAscent,l+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#m,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,i){const s=this.#l,r=this.#t,o=this.#e;for(const l of i)l in this.#t?s.add(r[l]):l in o&&o[l].forEach(s.add,s);return this}recordNamedDependency(t,i){return this.#n.has(i)&&this.#l.add(this.#n.get(i)),this}recordOperation(t,i=!1){if(this.recordDependencies(t,[ra]),this.#g){const s=wl(this.#g,t),{dependencies:r}=s;this.#l.forEach(r.add,r),this.#i.forEach(r.add,r),this.#r.forEach(r.add,r),r.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=Vm(this.#o[0]*256/this.#f),r=Vm(this.#o[1]*256/this.#m),o=qm(this.#o[2]*256/this.#f),l=qm(this.#o[3]*256/this.#m);El(this.#p,t,s,r,o,l);for(const u of this.#l)u!==t&&El(this.#p,u,s,r,o,l);for(const u of this.#i)u!==t&&El(this.#p,u,s,r,o,l);for(const u of this.#r)u!==t&&El(this.#p,u,s,r,o,l);i||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,i=!1){const s=Array.from(this.#l);this.recordOperation(t,i),this.recordIncrementalData("sameLineText",t);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,i=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),i||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const i=this.#d.get(t);return this.#d.delete(t),i}_pushPendingDependencies(t){for(const i of t)this.#l.add(i)}take(){return this.#h.clear(),new yE(this.#u,this.#p)}takeDebugMetadata(){return this.#g}}class Pl{#t;#e;#n;#i=0;#r=0;constructor(t,i,s){if(t instanceof Pl&&t.#n===!!s)return t;this.#t=t,this.#e=i,this.#n=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,i){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,i){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,i){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,i){return this}recordSimpleDataFromNamed(t,i,s){return this.#t.recordSimpleDataFromNamed(t,i,this.#e),this}recordFutureForcedDependency(t,i){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,i,s,r,o,l){return this.#n||this.#t.recordClipBox(this.#e,i,s,r,o,l),this}recordBBox(t,i,s,r,o,l){return this.#n||this.#t.recordBBox(this.#e,i,s,r,o,l),this}recordCharacterBBox(t,i,s,r,o,l,u){return this.#n||this.#t.recordCharacterBBox(this.#e,i,s,r,o,l,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,i){return this.#t.recordDependencies(this.#e,i),this}recordNamedDependency(t,i){return this.#t.recordNamedDependency(this.#e,i),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Ai={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Me={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ph(h,t){if(!t)return;const i=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,s),h.clip(r)}class ad{isModifyingCurrentTransform(){return!1}getPattern(){Yt("Abstract method `getPattern` called.")}}class vE extends ad{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let i;this._type==="axial"?i=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(i=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)i.addColorStop(s[0],s[1]);return i}getPattern(t,i,s,r){let o;if(r===Me.STROKE||r===Me.FILL){const l=i.current.getClippedPathBoundingBox(r,te(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,p=i.cachedCanvases.getCanvas("pattern",u,d),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),s=it.transform(s,[1,0,0,1,l[0],l[1]]),g.transform(...i.baseTransform),this.matrix&&g.transform(...this.matrix),Ph(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(s);o.setTransform(y)}else Ph(t,this._bbox),o=this._createGradient(t);return o}}function _h(h,t,i,s,r,o,l,u){const d=t.coords,p=t.colors,g=h.data,y=h.width*4;let b;d[i+1]>d[s+1]&&(b=i,i=s,s=b,b=o,o=l,l=b),d[s+1]>d[r+1]&&(b=s,s=r,r=b,b=l,l=u,u=b),d[i+1]>d[s+1]&&(b=i,i=s,s=b,b=o,o=l,l=b);const A=(d[i]+t.offsetX)*t.scaleX,E=(d[i+1]+t.offsetY)*t.scaleY,S=(d[s]+t.offsetX)*t.scaleX,T=(d[s+1]+t.offsetY)*t.scaleY,w=(d[r]+t.offsetX)*t.scaleX,x=(d[r+1]+t.offsetY)*t.scaleY;if(E>=x)return;const C=p[o],O=p[o+1],N=p[o+2],j=p[l],B=p[l+1],V=p[l+2],Y=p[u],Q=p[u+1],J=p[u+2],ot=Math.round(E),ft=Math.round(x);let st,mt,k,G,Z,ht,At,D;for(let q=ot;q<=ft;q++){if(q<T){const rt=q<E?0:(E-q)/(E-T);st=A-(A-S)*rt,mt=C-(C-j)*rt,k=O-(O-B)*rt,G=N-(N-V)*rt}else{let rt;q>x?rt=1:T===x?rt=0:rt=(T-q)/(T-x),st=S-(S-w)*rt,mt=j-(j-Y)*rt,k=B-(B-Q)*rt,G=V-(V-J)*rt}let W;q<E?W=0:q>x?W=1:W=(E-q)/(E-x),Z=A-(A-w)*W,ht=C-(C-Y)*W,At=O-(O-Q)*W,D=N-(N-J)*W;const tt=Math.round(Math.min(st,Z)),lt=Math.round(Math.max(st,Z));let dt=y*q+tt*4;for(let rt=tt;rt<=lt;rt++)W=(st-rt)/(st-Z),W<0?W=0:W>1&&(W=1),g[dt++]=mt-(mt-ht)*W|0,g[dt++]=k-(k-At)*W|0,g[dt++]=G-(G-D)*W|0,g[dt++]=255}}function AE(h,t,i){const s=t.coords,r=t.colors;let o,l;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(s.length/u)-1,p=u-1;for(o=0;o<d;o++){let g=o*u;for(let y=0;y<p;y++,g++)_h(h,i,s[g],s[g+1],s[g+u],r[g],r[g+1],r[g+u]),_h(h,i,s[g+u+1],s[g+1],s[g+u],r[g+u+1],r[g+1],r[g+u])}break;case"triangles":for(o=0,l=s.length;o<l;o+=3)_h(h,i,s[o],s[o+1],s[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class SE extends ad{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,i,s){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=p/y,E=g/b,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/A,scaleY:1/E},T=y+4,w=b+4,x=s.getCanvas("mesh",T,w),C=x.context,O=C.createImageData(y,b);if(i){const j=O.data;for(let B=0,V=j.length;B<V;B+=4)j[B]=i[0],j[B+1]=i[1],j[B+2]=i[2],j[B+3]=255}for(const j of this._figures)AE(O,j,S);return C.putImageData(O,2,2),{canvas:x.canvas,offsetX:u-2*A,offsetY:d-2*E,scaleX:A,scaleY:E}}isModifyingCurrentTransform(){return!0}getPattern(t,i,s,r){Ph(t,this._bbox);const o=new Float32Array(2);if(r===Me.SHADING)it.singularValueDecompose2dScale(te(t),o);else if(this.matrix){it.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;it.singularValueDecompose2dScale(i.baseTransform,o),o[0]*=u,o[1]*=d}else it.singularValueDecompose2dScale(i.baseTransform,o);const l=this._createMeshCanvas(o,r===Me.SHADING?null:this._background,i.cachedCanvases);return r!==Me.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class EE extends ad{getPattern(){return"hotpink"}}function wE(h){switch(h[0]){case"RadialAxial":return new vE(h);case"Mesh":return new SE(h);case"Dummy":return new EE}throw new Error(`Unknown IR type: ${h[0]}`)}const Xm={COLORED:1,UNCOLORED:2};class rd{static MAX_PATTERN_SIZE=3e3;constructor(t,i,s,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t,i){const{bbox:s,operatorList:r,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:d}=this;let{xstep:p,ystep:g}=this;p=Math.abs(p),g=Math.abs(g),Hl("TilingType: "+l);const y=s[0],b=s[1],A=s[2],E=s[3],S=A-y,T=E-b,w=new Float32Array(2);it.singularValueDecompose2dScale(this.matrix,w);const[x,C]=w;it.singularValueDecompose2dScale(this.baseTransform,w);const O=x*w[0],N=C*w[1];let j=S,B=T,V=!1,Y=!1;const Q=Math.ceil(p*O),J=Math.ceil(g*N),ot=Math.ceil(S*O),ft=Math.ceil(T*N);Q>=ot?j=p:V=!0,J>=ft?B=g:Y=!0;const st=this.getSizeAndScale(j,this.ctx.canvas.width,O),mt=this.getSizeAndScale(B,this.ctx.canvas.height,N),k=t.cachedCanvases.getCanvas("pattern",st.size,mt.size),G=k.context,Z=d.createCanvasGraphics(G,i);if(Z.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Z,o,u),G.translate(-st.scale*y,-mt.scale*b),Z.transform(0,st.scale,0,0,mt.scale,0,0),G.save(),Z.dependencyTracker?.save(),this.clipBbox(Z,y,b,A,E),Z.baseTransform=te(Z.ctx),Z.executeOperatorList(r),Z.endDrawing(),Z.dependencyTracker?.restore(),G.restore(),V||Y){const ht=k.canvas;V&&(j=p),Y&&(B=g);const At=this.getSizeAndScale(j,this.ctx.canvas.width,O),D=this.getSizeAndScale(B,this.ctx.canvas.height,N),q=At.size,W=D.size,tt=t.cachedCanvases.getCanvas("pattern-workaround",q,W),lt=tt.context,dt=V?Math.floor(S/p):0,rt=Y?Math.floor(T/g):0;for(let Gt=0;Gt<=dt;Gt++)for(let Ot=0;Ot<=rt;Ot++)lt.drawImage(ht,q*Gt,W*Ot,q,W,0,0,q,W);return{canvas:tt.canvas,scaleX:At.scale,scaleY:D.scale,offsetX:y,offsetY:b}}return{canvas:k.canvas,scaleX:st.scale,scaleY:mt.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,i,s){const r=Math.max(rd.MAX_PATTERN_SIZE,i);let o=Math.ceil(t*s);return o>=r?o=r:s=o/t,{scale:s,size:o}}clipBbox(t,i,s,r,o){const l=r-i,u=o-s;t.ctx.rect(i,s,l,u),it.axialAlignedBoundingBox([i,s,r,o],te(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,s){const r=t.ctx,o=t.current;switch(i){case Xm.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;r.fillStyle=o.fillColor=l,r.strokeStyle=o.strokeColor=u;break;case Xm.UNCOLORED:r.fillStyle=r.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new VS(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,i,s,r,o){let l=s;r!==Me.SHADING&&(l=it.transform(l,i.baseTransform),this.matrix&&(l=it.transform(l,this.matrix)));const u=this.createPatternCanvas(i,o);let d=new DOMMatrix(l);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const p=t.createPattern(u.canvas,"repeat");return p.setTransform(d),p}}function _E({src:h,srcPos:t=0,dest:i,width:s,height:r,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=Ee.isLittleEndian?4278190080:255,[d,p]=l?[o,u]:[u,o],g=s>>3,y=s&7,b=h.length;i=new Uint32Array(i.buffer);let A=0;for(let E=0;E<r;E++){for(const T=t+g;t<T;t++){const w=t<b?h[t]:255;i[A++]=w&128?p:d,i[A++]=w&64?p:d,i[A++]=w&32?p:d,i[A++]=w&16?p:d,i[A++]=w&8?p:d,i[A++]=w&4?p:d,i[A++]=w&2?p:d,i[A++]=w&1?p:d}if(y===0)continue;const S=t<b?h[t++]:255;for(let T=0;T<y;T++)i[A++]=S&1<<7-T?p:d}return{srcPos:t,destPos:A}}const Ym=16,$m=100,TE=15,Km=10,Ye=16,Th=new DOMMatrix,oi=new Float32Array(2),ca=new Float32Array([1/0,1/0,-1/0,-1/0]);function xE(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},h.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},h.transform=function(i,s,r,o,l,u){t.transform(i,s,r,o,l,u),this.__originalTransform(i,s,r,o,l,u)},h.setTransform=function(i,s,r,o,l,u){t.setTransform(i,s,r,o,l,u),this.__originalSetTransform(i,s,r,o,l,u)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(i){t.rotate(i),this.__originalRotate(i)},h.clip=function(i){t.clip(i),this.__originalClip(i)},h.moveTo=function(i,s){t.moveTo(i,s),this.__originalMoveTo(i,s)},h.lineTo=function(i,s){t.lineTo(i,s),this.__originalLineTo(i,s)},h.bezierCurveTo=function(i,s,r,o,l,u){t.bezierCurveTo(i,s,r,o,l,u),this.__originalBezierCurveTo(i,s,r,o,l,u)},h.rect=function(i,s,r,o){t.rect(i,s,r,o),this.__originalRect(i,s,r,o)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class CE{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,i,s)):(r=this.canvasFactory.create(i,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function _l(h,t,i,s,r,o,l,u,d,p){const[g,y,b,A,E,S]=te(h);if(y===0&&b===0){const x=l*g+E,C=Math.round(x),O=u*A+S,N=Math.round(O),j=(l+d)*g+E,B=Math.abs(Math.round(j)-C)||1,V=(u+p)*A+S,Y=Math.abs(Math.round(V)-N)||1;return h.setTransform(Math.sign(g),0,0,Math.sign(A),C,N),h.drawImage(t,i,s,r,o,0,0,B,Y),h.setTransform(g,y,b,A,E,S),[B,Y]}if(g===0&&A===0){const x=u*b+E,C=Math.round(x),O=l*y+S,N=Math.round(O),j=(u+p)*b+E,B=Math.abs(Math.round(j)-C)||1,V=(l+d)*y+S,Y=Math.abs(Math.round(V)-N)||1;return h.setTransform(0,Math.sign(y),Math.sign(b),0,C,N),h.drawImage(t,i,s,r,o,0,0,Y,B),h.setTransform(g,y,b,A,E,S),[Y,B]}h.drawImage(t,i,s,r,o,l,u,d,p);const T=Math.hypot(g,y),w=Math.hypot(b,A);return[T*d,w*p]}class Wm{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Lh;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Re.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,i,s){s?.(this),this.clipBox=new Float32Array([0,0,t,i]),this.minMax=ca.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Me.FILL,i=null){const s=this.minMax.slice();if(t===Me.STROKE){i||Yt("Stroke bounding box must include transform."),it.singularValueDecompose2dScale(i,oi);const r=oi[0]*this.lineWidth/2,o=oi[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const t=it.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ca,0)}getClippedPathBoundingBox(t=Me.FILL,i=null){return it.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function Qm(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const i=t.height,s=t.width,r=i%Ye,o=(i-r)/Ye,l=r===0?o:o+1,u=h.createImageData(s,Ye);let d=0,p;const g=t.data,y=u.data;let b,A,E,S;if(t.kind===Dr.GRAYSCALE_1BPP){const T=g.byteLength,w=new Uint32Array(y.buffer,0,y.byteLength>>2),x=w.length,C=s+7>>3,O=4294967295,N=Ee.isLittleEndian?4278190080:255;for(b=0;b<l;b++){for(E=b<o?Ye:r,p=0,A=0;A<E;A++){const j=T-d;let B=0;const V=j>C?s:j*8-7,Y=V&-8;let Q=0,J=0;for(;B<Y;B+=8)J=g[d++],w[p++]=J&128?O:N,w[p++]=J&64?O:N,w[p++]=J&32?O:N,w[p++]=J&16?O:N,w[p++]=J&8?O:N,w[p++]=J&4?O:N,w[p++]=J&2?O:N,w[p++]=J&1?O:N;for(;B<V;B++)Q===0&&(J=g[d++],Q=128),w[p++]=J&Q?O:N,Q>>=1}for(;p<x;)w[p++]=0;h.putImageData(u,0,b*Ye)}}else if(t.kind===Dr.RGBA_32BPP){for(A=0,S=s*Ye*4,b=0;b<o;b++)y.set(g.subarray(d,d+S)),d+=S,h.putImageData(u,0,A),A+=Ye;b<l&&(S=s*r*4,y.set(g.subarray(d,d+S)),h.putImageData(u,0,A))}else if(t.kind===Dr.RGB_24BPP)for(E=Ye,S=s*E,b=0;b<l;b++){for(b>=o&&(E=r,S=s*E),p=0,A=S;A--;)y[p++]=g[d++],y[p++]=g[d++],y[p++]=g[d++],y[p++]=255;h.putImageData(u,0,b*Ye)}else throw new Error(`bad image kind: ${t.kind}`)}function Zm(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const i=t.height,s=t.width,r=i%Ye,o=(i-r)/Ye,l=r===0?o:o+1,u=h.createImageData(s,Ye);let d=0;const p=t.data,g=u.data;for(let y=0;y<l;y++){const b=y<o?Ye:r;({srcPos:d}=_E({src:p,srcPos:d,dest:g,width:s,height:b,nonBlackColor:0})),h.putImageData(u,0,y*Ye)}}function Er(h,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)h[s]!==void 0&&(t[s]=h[s]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function Tl(h){h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0);const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}function Jm(h,t){if(t)return!0;it.singularValueDecompose2dScale(h,oi);const i=Math.fround(Mi.pixelRatio*ms.PDF_TO_CSS_UNITS);return oi[0]<=i&&oi[1]<=i}const RE=["butt","round","square"],ME=["miter","round","bevel"],DE={},ty={};class ha{constructor(t,i,s,r,o,{optionalContentConfig:l,markedContentStack:u=null},d,p,g){this.ctx=t,this.current=new Wm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=s,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new CE(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,i,s=null){return typeof i=="string"?(this.dependencyTracker?.recordNamedDependency(t,i),i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i)):s}beginDrawing({transform:t,viewport:i,transparency:s=!1,background:r=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,s){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...te(this.compositeCtx))}this.ctx.save(),Tl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=te(this.ctx)}executeOperatorList(t,i,s,r,o){const l=t.argsArray,u=t.fnArray;let d=i||0;const p=l.length;if(p===d)return d;const g=p-d>Km&&typeof s=="function",y=g?Date.now()+TE:0;let b=0;const A=this.commonObjs,E=this.objs;let S,T;for(;;){if(r!==void 0&&d===r.nextBreakPoint)return r.breakIt(d,s),d;if(!o||o(d))if(S=u[d],T=l[d]??null,S!==ya.dependency)T===null?this[S](d):this[S](d,...T);else for(const w of T){this.dependencyTracker?.recordNamedData(w,d);const x=w.startsWith("g_")?A:E;if(!x.has(w))return x.get(w,s),d}if(d++,d===p)return d;if(g&&++b>Km){if(Date.now()>y)return s(),d;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}}_scaleImage(t,i){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(i[0],i[1]),1),l=Math.max(Math.hypot(i[2],i[3]),1),u=s,d=r,p="prescale1",g,y;for(;o>2&&u>1||l>2&&d>1;){let b=u,A=d;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),l>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/A),g=this.cachedCanvases.getCanvas(p,b,A),y=g.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,u,d,0,0,b,A),t=g.canvas,u=b,d=A,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,i){const s=this.ctx,{width:r,height:o}=i,l=this.current.fillColor,u=this.current.patternFill,d=te(s);let p,g,y,b;if((i.bitmap||i.data)&&i.count>1){const Q=i.bitmap||i.data.buffer;g=JSON.stringify(u?d:[d.slice(0,4),l]),p=this._cachedBitmapsMap.get(Q),p||(p=new Map,this._cachedBitmapsMap.set(Q,p));const J=p.get(g);if(J&&!u){const ot=Math.round(Math.min(d[0],d[2])+d[4]),ft=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,Ai.transformAndFill),{canvas:J,offsetX:ot,offsetY:ft}}y=J}y||(b=this.cachedCanvases.getCanvas("maskCanvas",r,o),Zm(b.context,i));let A=it.transform(d,[1/r,0,0,-1/o,0,0]);A=it.transform(A,[1,0,0,1,0,-o]);const E=ca.slice();it.axialAlignedBoundingBox([0,0,r,o],A,E);const[S,T,w,x]=E,C=Math.round(w-S)||1,O=Math.round(x-T)||1,N=this.cachedCanvases.getCanvas("fillCanvas",C,O),j=N.context,B=S,V=T;j.translate(-B,-V),j.transform(...A),y||(y=this._scaleImage(b.canvas,Pi(j)),y=y.img,p&&u&&p.set(g,y)),j.imageSmoothingEnabled=Jm(te(j),i.interpolate),_l(j,y,0,0,y.width,y.height,0,0,r,o),j.globalCompositeOperation="source-in";const Y=it.transform(Pi(j),[1,0,0,1,-B,-V]);return j.fillStyle=u?l.getPattern(s,this,Y,Me.FILL,t):l,j.fillRect(0,0,r,o),p&&!u&&(this.cachedCanvases.delete("fillCanvas"),p.set(g,N.canvas)),this.dependencyTracker?.recordDependencies(t,Ai.transformAndFill),{canvas:N.canvas,offsetX:Math.round(B),offsetY:Math.round(V)}}setLineWidth(t,i){this.dependencyTracker?.recordSimpleData("lineWidth",t),i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(t,i){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=RE[i]}setLineJoin(t,i){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=ME[i]}setMiterLimit(t,i){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=i}setDash(t,i,s){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(i),r.lineDashOffset=s)}setRenderingIntent(t,i){}setFlatness(t,i){}setGState(t,i){for(const[s,r]of i)switch(s){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,i,s);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),Er(this.suspendedCtx,l),xE(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Er(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,s,r){const o=r[0],l=r[1],u=r[2]-o,d=r[3]-l;u===0||d===0||(this.genericComposeSMask(i.context,s,u,d,i.subtype,i.backdrop,i.transferMap,o,l,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,i,s,r,o,l,u,d,p,g,y){let b=t.canvas,A=d-g,E=p-y;if(l)if(A<0||E<0||A+s>b.width||E+r>b.height){const T=this.cachedCanvases.getCanvas("maskExtension",s,r),w=T.context;w.drawImage(b,-A,-E),w.globalCompositeOperation="destination-atop",w.fillStyle=l,w.fillRect(0,0,s,r),w.globalCompositeOperation="source-over",b=T.canvas,A=E=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(A,E,s,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(A,E,s,r),t.restore()}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?i.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(d,p,s,r),i.clip(S),i.globalCompositeOperation="destination-in",i.drawImage(b,A,E,s,r,d,p,s,r),i.restore()}save(t){this.inSMaskMode&&Er(this.ctx,this.suspendedCtx),this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Er(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,i,s,r,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(i,s,r,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,s,r){let[o]=s;if(!r){o||=s[0]=new Path2D,this[i](t,o);return}if(this.dependencyTracker!==null){const l=i===ya.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-l,r[2]+l,r[1]-l,r[3]+l).recordDependencies(t,["transform"])}if(!(o instanceof Path2D)){const l=s[0]=new Path2D;for(let u=0,d=o.length;u<d;)switch(o[u++]){case bl.moveTo:l.moveTo(o[u++],o[u++]);break;case bl.lineTo:l.lineTo(o[u++],o[u++]);break;case bl.curveTo:l.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]);break;case bl.closePath:l.closePath();break;default:vt(`Unrecognized drawing path operator: ${o[u-1]}`);break}o=l}it.axialAlignedBoundingBox(r,te(this.ctx),this.current.minMax),this[i](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,i,s=!0){const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,Pi(r),Me.STROKE,t),l){const u=new Path2D;u.addPath(i,r.getTransform().invertSelf().multiplySelf(l)),i=u}this.rescaleAndStroke(i,!1),r.restore()}else this.rescaleAndStroke(i,!0);this.dependencyTracker?.recordDependencies(t,Ai.stroke),s&&this.consumePath(t,i,this.current.getClippedPathBoundingBox(Me.STROKE,te(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,i){this.stroke(t,i)}fill(t,i,s=!0){const r=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const p=o.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=o.getPattern(r,this,Pi(r),Me.FILL,t),p){const g=new Path2D;g.addPath(i,r.getTransform().invertSelf().multiplySelf(p)),i=g}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(r.fill(i,"evenodd"),this.pendingEOFill=!1):r.fill(i)),this.dependencyTracker?.recordDependencies(t,Ai.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,i,d)}eoFill(t,i){this.pendingEOFill=!0,this.fill(t,i)}fillStroke(t,i){this.fill(t,i,!1),this.stroke(t,i,!1),this.consumePath(t,i)}eoFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}closeFillStroke(t,i){this.fillStroke(t,i)}closeEOFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}endPath(t,i){this.consumePath(t,i)}rawFillPath(t,i){this.ctx.fill(i),this.dependencyTracker?.recordDependencies(t,Ai.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=DE}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=ty}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const i=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;i!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(i!==void 0){const r=new Path2D,o=s.getTransform().invertSelf();for(const{transform:l,x:u,y:d,fontSize:p,path:g}of i)g&&r.addPath(g,new DOMMatrix(l).preMultiplySelf(o).translate(u,d).scale(p,-p));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,i){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=i}setWordSpacing(t,i){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=i}setHScale(t,i){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=i/100}setLeading(t,i){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-i}setFont(t,i,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",i,t);const r=this.commonObjs.get(i),o=this.current;if(!r)throw new Error(`Can't find font for ${i}`);if(o.fontMatrix=r.fontMatrix||Lh,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&vt("Invalid font matrix for font "+i),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const l=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${l}", ${r.fallbackName}`;let d="normal";r.black?d="900":r.bold&&(d="bold");const p=r.italic?"italic":"normal";let g=s;s<Ym?g=Ym:s>$m&&(g=$m),this.current.fontSizeScale=s/g,this.ctx.font=`${p} ${d} ${g}px ${u}`}setTextRenderingMode(t,i){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=i}setTextRise(t,i){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=i}moveText(t,i,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,i,s){this.setLeading(t,-s),this.moveText(t,i,s)}setTextMatrix(t,i){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=i,s.textMatrixScale=Math.hypot(i[0],i[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,i,s){const r=new Path2D;return r.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(i)),r}paintChar(t,i,s,r,o,l){const u=this.ctx,d=this.current,p=d.font,g=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,b=g&Re.FILL_STROKE_MASK,A=!!(g&Re.ADD_TO_PATH_FLAG),E=d.patternFill&&!p.missingFile,S=d.patternStroke&&!p.missingFile;let T;if((p.disableFontFace||A||E||S)&&!p.missingFile&&(T=p.getPathGenerator(this.commonObjs,i)),T&&(p.disableFontFace||E||S)){u.save(),u.translate(s,r),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,p);let w;if(b===Re.FILL||b===Re.FILL_STROKE)if(o){w=u.getTransform(),u.setTransform(...o);const x=this.#n(T,w,o);u.fill(x)}else u.fill(T);if(b===Re.STROKE||b===Re.FILL_STROKE)if(l){w||=u.getTransform(),u.setTransform(...l);const{a:x,b:C,c:O,d:N}=w,j=it.inverseTransform(l),B=it.transform([x,C,O,N,0,0],j);it.singularValueDecompose2dScale(B,oi),u.lineWidth*=Math.max(oi[0],oi[1])/y,u.stroke(this.#n(T,w,l))}else u.lineWidth/=y,u.stroke(T);u.restore()}else(b===Re.FILL||b===Re.FILL_STROKE)&&(u.fillText(i,s,r),this.dependencyTracker?.recordCharacterBBox(t,u,p,y,s,r,()=>u.measureText(i))),(b===Re.STROKE||b===Re.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,p,y,s,r,()=>u.measureText(i)).recordDependencies(t,Ai.stroke),u.strokeText(i,s,r));A&&((this.pendingTextPaths||=[]).push({transform:te(u),x:s,y:r,fontSize:y,path:T}),this.dependencyTracker?.recordCharacterBBox(t,u,p,y,s,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<i.length;r+=4)if(i[r]>0&&i[r]<255){s=!0;break}return wt(this,"isFontSubpixelAAEnabled",s)}showText(t,i){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Ai.showText).resetBBox(t),this.current.textRenderingMode&Re.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(t,i),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,u=s.fontSizeScale,d=s.charSpacing,p=s.wordSpacing,g=s.fontDirection,y=s.textHScale*g,b=i.length,A=r.vertical,E=A?1:-1,S=r.defaultVMetrics,T=o*s.fontMatrix[0],w=s.textRenderingMode===Re.FILL&&!r.disableFontFace&&!s.patternFill;l.save(),s.textMatrix&&l.transform(...s.textMatrix),l.translate(s.x,s.y+s.textRise),g>0?l.scale(y,-1):l.scale(y,1);let x,C;if(s.patternFill){l.save();const V=s.fillColor.getPattern(l,this,Pi(l),Me.FILL,t);x=te(l),l.restore(),l.fillStyle=V}if(s.patternStroke){l.save();const V=s.strokeColor.getPattern(l,this,Pi(l),Me.STROKE,t);C=te(l),l.restore(),l.strokeStyle=V}let O=s.lineWidth;const N=s.textMatrixScale;if(N===0||O===0){const V=s.textRenderingMode&Re.FILL_STROKE_MASK;(V===Re.STROKE||V===Re.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=N;if(u!==1&&(l.scale(u,u),O/=u),l.lineWidth=O,r.isInvalidPDFjsFont){const V=[];let Y=0;for(const J of i)V.push(J.unicode),Y+=J.width;const Q=V.join("");if(l.fillText(Q,0,0),this.dependencyTracker!==null){const J=l.measureText(Q);this.dependencyTracker.recordBBox(t,this.ctx,-J.actualBoundingBoxLeft,J.actualBoundingBoxRight,-J.actualBoundingBoxAscent,J.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=Y*T*y,l.restore(),this.compose();return}let j=0,B;for(B=0;B<b;++B){const V=i[B];if(typeof V=="number"){j+=E*V*o/1e3;continue}let Y=!1;const Q=(V.isSpace?p:0)+d,J=V.fontChar,ot=V.accent;let ft,st,mt=V.width;if(A){const Z=V.vmetric||S,ht=-(V.vmetric?Z[1]:mt*.5)*T,At=Z[2]*T;mt=Z?-Z[0]:mt,ft=ht/u,st=(j+At)/u}else ft=j/u,st=0;let k;if(r.remeasure&&mt>0){k=l.measureText(J);const Z=k.width*1e3/o*u;if(mt<Z&&this.isFontSubpixelAAEnabled){const ht=mt/Z;Y=!0,l.save(),l.scale(ht,1),ft/=ht}else mt!==Z&&(ft+=(mt-Z)/2e3*o/u)}if(this.contentVisible&&(V.isInFont||r.missingFile)){if(w&&!ot)l.fillText(J,ft,st),this.dependencyTracker?.recordCharacterBBox(t,l,k?{bbox:null}:r,o/u,ft,st,()=>k??l.measureText(J));else if(this.paintChar(t,J,ft,st,x,C),ot){const Z=ft+o*ot.offset.x/u,ht=st-o*ot.offset.y/u;this.paintChar(t,ot.fontChar,Z,ht,x,C)}}const G=A?mt*T-Q*g:mt*T+Q*g;j+=G,Y&&l.restore()}A?s.y-=j:s.x+=j*y,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,i){const s=this.ctx,r=this.current,o=r.font,l=r.fontSize,u=r.fontDirection,d=o.vertical?1:-1,p=r.charSpacing,g=r.wordSpacing,y=r.textHScale*u,b=r.fontMatrix||Lh,A=i.length,E=r.textRenderingMode===Re.INVISIBLE;let S,T,w,x;if(E||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(y,u);const C=this.dependencyTracker;for(this.dependencyTracker=C?new Pl(C,t):null,S=0;S<A;++S){if(T=i[S],typeof T=="number"){x=d*T*l/1e3,this.ctx.translate(x,0),r.x+=x*y;continue}const O=(T.isSpace?g:0)+p,N=o.charProcOperatorList[T.operatorListId];N?this.contentVisible&&(this.save(),s.scale(l,l),s.transform(...b),this.executeOperatorList(N),this.restore()):vt(`Type3 character "${T.operatorListId}" is not available.`);const j=[T.width,0];it.applyTransform(j,b),w=j[0]*l+O,s.translate(w,0),r.x+=w*y}s.restore(),C&&(this.dependencyTracker=C)}setCharWidth(t,i,s){}setCharWidthAndBounds(t,i,s,r,o,l,u){const d=new Path2D;d.rect(r,o,l-r,u-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,r,l,o,u).recordClipBox(t,this.ctx,r,l,o,u),this.endPath(t)}getColorN_Pattern(t,i){let s;if(i[0]==="TilingPattern"){const r=this.baseTransform||te(this.ctx),o={createCanvasGraphics:(l,u)=>new ha(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Pl(this.dependencyTracker,u,!0):null)};s=new rd(i,this.ctx,o,r)}else s=this._getPattern(t,i[1],i[2]);return s}setStrokeColorN(t,...i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,i),this.current.patternStroke=!0}setFillColorN(t,...i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,i),this.current.patternFill=!0}setStrokeRGBColor(t,i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=i,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=i,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i,s=null){let r;return this.cachedPatterns.has(i)?r=this.cachedPatterns.get(i):(r=wE(this.getObject(t,i)),this.cachedPatterns.set(i,r)),s&&(r.matrix=s),r}shadingFill(t,i){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const r=this._getPattern(t,i);s.fillStyle=r.getPattern(s,this,Pi(s),Me.SHADING,t);const o=Pi(s);if(o){const{width:l,height:u}=s.canvas,d=ca.slice();it.axialAlignedBoundingBox([0,0,l,u],o,d);const[p,g,y,b]=d;this.ctx.fillRect(p,g,y-p,b-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Ai.transform).recordDependencies(t,Ai.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Yt("Should not call beginInlineImage")}beginImageData(){Yt("Should not call beginImageData")}paintFormXObjectBegin(t,i,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),i&&this.transform(t,...i),this.baseTransform=te(this.ctx),s)){it.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[r,o,l,u]=s,d=new Path2D;d.rect(r,o,l-r,u-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,r,l,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,i){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;i.isolated||Hl("TODO: Support non-isolated groups."),i.knockout&&vt("Knockout groups not supported.");const r=te(s);if(i.matrix&&s.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let o=ca.slice();it.axialAlignedBoundingBox(i.bbox,te(s),o);const l=[0,0,s.canvas.width,s.canvas.height];o=it.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),d=Math.floor(o[1]),p=Math.max(Math.ceil(o[2])-u,1),g=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,p,g]);let y="groupAt"+this.groupLevel;i.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,p,g),A=b.context;A.translate(-u,-d),A.transform(...r);let E=new Path2D;const[S,T,w,x]=i.bbox;if(E.rect(S,T,w-S,x-T),i.matrix){const C=new Path2D;C.addPath(E,new DOMMatrix(i.matrix)),E=C}A.clip(E),i.smask&&this.smaskStack.push({canvas:b.canvas,context:A,offsetX:u,offsetY:d,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}),(!i.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,d),s.save()),Er(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,i){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),i.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=te(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=ca.slice();it.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,i,s,r,o,l){if(this.#t(),Tl(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],d=s[3]-s[1];if(l&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=d,it.singularValueDecompose2dScale(te(this.ctx),oi);const{viewportScale:p}=this,g=Math.ceil(u*this.outputScaleX*p),y=Math.ceil(d*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(i,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(oi[0],0,0,-oi[1],0,d*oi[1]),Tl(this.ctx)}else{Tl(this.ctx),this.endPath(t);const p=new Path2D;p.rect(s[0],s[1],u,d),this.ctx.clip(p)}}this.current=new Wm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,i){if(!this.contentVisible)return;const s=i.count;i=this.getObject(t,i.data,i),i.count=s;const r=this.ctx,o=this._createMaskCanvas(t,i),l=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,s,r=0,o=0,l,u){if(!this.contentVisible)return;i=this.getObject(t,i.data,i);const d=this.ctx;d.save();const p=te(d);d.transform(s,r,o,l,0,0);const g=this._createMaskCanvas(t,i);d.setTransform(1,0,0,1,g.offsetX-p[4],g.offsetY-p[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=u.length;y<b;y+=2){const A=it.transform(p,[s,r,o,l,u[y],u[y+1]]);d.drawImage(g.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+g.canvas.width,A[5],A[5]+g.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,i){if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,Ai.transformAndFill);for(const l of i){const{data:u,width:d,height:p,transform:g}=l,y=this.cachedCanvases.getCanvas("maskCanvas",d,p),b=y.context;b.save();const A=this.getObject(t,u,l);Zm(b,A),b.globalCompositeOperation="source-in",b.fillStyle=o?r.getPattern(b,this,Pi(s),Me.FILL,t):r,b.fillRect(0,0,d,p),b.restore(),s.save(),s.transform(...g),s.scale(1,-1),_l(s,y.canvas,0,0,d,p,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,d,0,p),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,i){if(!this.contentVisible)return;const s=this.getObject(t,i);if(!s){vt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,i,s,r,o){if(!this.contentVisible)return;const l=this.getObject(t,i);if(!l){vt("Dependent image isn't ready yet");return}const u=l.width,d=l.height,p=[];for(let g=0,y=o.length;g<y;g+=2)p.push({transform:[s,0,0,r,o[g],o[g+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,l,p)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:s,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,r),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(i,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,i){if(!this.contentVisible)return;const s=i.width,r=i.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/s,-1/r);let u;if(i.bitmap)u=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)u=i;else{const g=this.cachedCanvases.getCanvas("inlineImage",s,r).context;Qm(g,i),u=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(u,Pi(o));o.imageSmoothingEnabled=Jm(te(o),i.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-r,0).recordDependencies(t,Ai.imageXObject).recordOperation(t),_l(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-r,s,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,i,s){if(!this.contentVisible)return;const r=this.ctx;let o;if(i.bitmap)o=i.bitmap;else{const l=i.width,u=i.height,p=this.cachedCanvases.getCanvas("inlineImage",l,u).context;Qm(p,i),o=this.applyTransferMapsToCanvas(p)}this.dependencyTracker?.resetBBox(t);for(const l of s)r.save(),r.transform(...l.transform),r.scale(1,-1),_l(r,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Ai.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,i){}markPointProps(t,i,s){}beginMarkedContent(t,i){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i,s){this.dependencyTracker?.beginMarkedContent(t),i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,i,s){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===ty?o.clip(i,"evenodd"):o.clip(i)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=te(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:s,c:r,d:o}=this.ctx.getTransform();let l,u;if(s===0&&r===0){const d=Math.abs(i),p=Math.abs(o);if(d===p)if(t===0)l=u=1/d;else{const g=d*t;l=u=g<1?1/g:1}else if(t===0)l=1/d,u=1/p;else{const g=d*t,y=p*t;l=g<1?1/g:1,u=y<1?1/y:1}}else{const d=Math.abs(i*o-s*r),p=Math.hypot(i,s),g=Math.hypot(r,o);if(t===0)l=g/d,u=p/d;else{const y=t*d;l=g>y?g/y:1,u=p>y?p/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,i){const{ctx:s,current:{lineWidth:r}}=this,[o,l]=this.getScaleForStroking();if(o===l){s.lineWidth=(r||1)*o,s.stroke(t);return}const u=s.getLineDash();i&&s.save(),s.scale(o,l),Th.a=1/o,Th.d=1/l;const d=new Path2D;if(d.addPath(t,Th),u.length>0){const p=Math.max(o,l);s.setLineDash(u.map(g=>g/p)),s.lineDashOffset/=p}s.lineWidth=r||1,s.stroke(d),i&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const h in ya)ha.prototype[h]!==void 0&&(ha.prototype[ya[h]]=ha.prototype[h]);class da{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const i=new TextEncoder,s={};let r=0;for(const p of da.strings){const g=i.encode(t[p]);s[p]=g,r+=4+g.length}const o=new ArrayBuffer(r),l=new Uint8Array(o),u=new DataView(o);let d=0;for(const p of da.strings){const g=s[p],y=g.length;u.setUint32(d,y),l.set(g,d+4),d+=4+y}return Dt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){Dt(t<da.strings.length,"Invalid string index");let i=0;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class fa{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const i=new TextEncoder,s={};let r=0;for(const b of fa.strings){const A=i.encode(t[b]);s[b]=A,r+=4+A.length}r+=4;let o,l,u=1+r;t.style&&(o=i.encode(t.style.style),l=i.encode(t.style.weight),u+=4+o.length+4+l.length);const d=new ArrayBuffer(u),p=new Uint8Array(d),g=new DataView(d);let y=0;g.setUint8(y++,t.guessFallback?1:0),g.setUint32(y,0),y+=4,r=0;for(const b of fa.strings){const A=s[b],E=A.length;r+=4+E,g.setUint32(y,E),p.set(A,y+4),y+=4+E}return g.setUint32(y-r-4,r),t.style&&(g.setUint32(y,o.length),p.set(o,y+4),y+=4+o.length,g.setUint32(y,l.length),p.set(l,y+4),y+=4+l.length),Dt(y<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){Dt(t<fa.strings.length,"Invalid string index");let i=5;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const i=this.#e.getUint32(t),s=this.#n.decode(new Uint8Array(this.#t,t+4,i));t+=4+i;const r=this.#e.getUint32(t),o=this.#n.decode(new Uint8Array(this.#t,t+4,r));return{style:s,weight:o}}}class It{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#r=this.#i+1+6;#s;#a;#o;constructor({data:t,extra:i}){this.#s=t,this.#a=new TextDecoder,this.#o=new DataView(this.#s),i&&Object.assign(this,i)}#c(t){Dt(t<It.bools.length,"Invalid boolean index");const i=Math.floor(t/4),s=t*2%8,r=this.#o.getUint8(i)>>s&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Dt(t<It.numbers.length,"Invalid number index"),this.#o.getFloat64(It.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=It.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<4;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=It.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<6;r++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=It.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<3;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){Dt(t<It.strings.length,"Invalid string index");let i=It.#r+4;for(let o=0;o<t;o++)i+=this.#o.getUint32(i)+4;const s=this.#o.getUint32(i),r=new Uint8Array(s);return r.set(new Uint8Array(this.#s,i+4,s)),this.#a.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=It.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#s,t+4,o)}clearData(){let t=It.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);new Uint8Array(this.#s,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=It.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(this.#s,t+4,r)),new da(o.buffer)}get systemFontInfo(){let t=It.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(this.#s,t+4,s)),new fa(r.buffer)}static write(t){const i=t.systemFontInfo?fa.write(t.systemFontInfo):null,s=t.cssFontInfo?da.write(t.cssFontInfo):null,r=new TextEncoder,o={};let l=0;for(const S of It.strings)o[S]=r.encode(t[S]),l+=4+o[S].length;const u=It.#r+4+l+4+(i?i.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),p=new Uint8Array(d),g=new DataView(d);let y=0;const b=It.bools.length;let A=0,E=0;for(let S=0;S<b;S++){const T=t[It.bools[S]];A|=(T===void 0?0:T?2:1)<<E,E+=2,(E===8||S===b-1)&&(g.setUint8(y++,A),A=0,E=0)}Dt(y===It.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of It.numbers)g.setFloat64(y,t[S]),y+=8;if(Dt(y===It.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(y++,4);for(const S of t.bbox)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=8;if(Dt(y===It.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(y++,6);for(const S of t.fontMatrix)g.setFloat64(y,S,!0),y+=8}else g.setUint8(y++,0),y+=48;if(Dt(y===It.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(y++,1);for(const S of t.defaultVMetrics)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=6;Dt(y===It.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(It.#r,0),y+=4;for(const S of It.strings){const T=o[S],w=T.length;g.setUint32(y,w),p.set(T,y+4),y+=4+w}if(g.setUint32(It.#r,y-It.#r-4),!i)g.setUint32(y,0),y+=4;else{const S=i.byteLength;g.setUint32(y,S),Dt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),p.set(new Uint8Array(i),y+4),y+=4+S}if(!s)g.setUint32(y,0),y+=4;else{const S=s.byteLength;g.setUint32(y,S),Dt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),p.set(new Uint8Array(s),y+4),y+=4+S}return t.data===void 0?(g.setUint32(y,0),y+=4):(g.setUint32(y,t.data.length),p.set(t.data,y+4),y+=4+t.data.length),Dt(y<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(y)}}class Hn{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class LE{#t;#e;constructor({parsedData:t,rawData:i}){this.#t=t,this.#e=i}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const la=Symbol("INTERNAL");class OE{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:i,intent:s,usage:r,rbGroups:o}){this.#t=!!(t&ai.DISPLAY),this.#e=!!(t&ai.PRINT),this.name=i,this.intent=s,this.usage=r,this.rbGroups=o}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:i}=this.usage;return this.#t?i?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,i,s=!1){t!==la&&Yt("Internal method `_setVisible` called."),this.#n=s,this.#i=i}}class NE{#t=null;#e=new Map;#n=null;#i=null;constructor(t,i=ai.DISPLAY){if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new OE(i,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(la,!1);for(const s of t.on)this.#e.get(s)._setVisible(la,!0);for(const s of t.off)this.#e.get(s)._setVisible(la,!1);this.#n=this.getHash()}}#r(t){const i=t.length;if(i<2)return!0;const s=t[0];for(let r=1;r<i;r++){const o=t[r];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return vt(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Hl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(vt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!this.#e.has(i))return vt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!this.#e.has(i))return vt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!this.#e.has(i))return vt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!this.#e.has(i))return vt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!1}return!0}return vt(`Unknown optional content policy ${t.policy}.`),!0}return vt(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,s=!0){const r=this.#e.get(t);if(!r){vt(`Optional content group not found: ${t}`);return}if(s&&i&&r.rbGroups.length)for(const o of r.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(la,!1,!0);r._setVisible(la,!!i,!0),this.#t=null}setOCGState({state:t,preserveRB:i}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const o=this.#e.get(r);if(o)switch(s){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!o.visible,i);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Yy;for(const[i,s]of this.#e)t.update(`${i}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class kE{constructor(t,{disableRange:i=!1,disableStream:s=!1}){Dt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!i,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),t.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:i}){const s=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});Dt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const i=this._rangeReaders.indexOf(t);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){Dt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new BE(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new PE(this,t,i);return this._pdfDataRangeTransport.requestDataRange(t,i),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class BE{constructor(t,i,s=!1,r=null){this._stream=t,this._done=s||!1,this._filename=Gl(r)?r:null,this._queuedChunks=i||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PE{constructor(t,i,s){this._stream=t,this._begin=i,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function zE(h){let t=!0,i=s("filename\\*","i").exec(h);if(i){i=i[1];let g=u(i);return g=unescape(g),g=d(g),g=p(g),o(g)}if(i=l(h),i){const g=p(i);return o(g)}if(i=s("filename","i").exec(h),i){i=i[1];let g=u(i);return g=p(g),o(g)}function s(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),A=Gr(y);y=b.decode(A),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),t&&(g=r("iso-8859-1",g))),g}function l(g){const y=[];let b;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(g))!==null;){let[,S,T,w]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[T,w]}const E=[];for(let S=0;S<y.length&&S in y;++S){let[T,w]=y[S];w=u(w),T&&(w=unescape(w),S===0&&(w=d(w))),E.push(w)}return E.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),E=g.slice(y+1).replace(/^[^']*'/,"");return r(b,E)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,E){if(A==="q"||A==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,T){return String.fromCharCode(parseInt(T,16))}),r(b,E);try{E=atob(E)}catch{}return r(b,E)})}return""}function eb(h,t){const i=new Headers;if(!h||!t||typeof t!="object")return i;for(const s in t){const r=t[s];r!==void 0&&i.append(s,r)}return i}function Vl(h){return URL.parse(h)?.origin??null}function ib({responseHeaders:h,isHttp:t,rangeChunkSize:i,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(h.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*i)||s||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function nb(h){const t=h.get("Content-Disposition");if(t){let i=zE(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(Gl(i))return i}return null}function $r(h,t){return new kr(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h,h===404||h===0&&t.startsWith("file:"))}function sb(h){return h===200||h===206}function ab(h,t,i){return{method:"GET",headers:h,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function rb(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(vt(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class jE{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=eb(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new FE(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new UE(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class FE{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const i=t.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange;const s=new Headers(t.headers),r=i.url;fetch(r,ab(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Vl(o.url),!sb(o.status))throw $r(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:u,suggestedLength:d}=ib({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=nb(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new hn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:rb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class UE{constructor(t,i,s){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${i}-${s-1}`);const l=r.url;fetch(l,ab(o,this._withCredentials,this._abortController)).then(u=>{const d=Vl(u.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!sb(u.status))throw $r(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:rb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const xh=200,Ch=206;function HE(h){const t=h.response;return typeof t!="string"?t:Gr(t).buffer}class IE{_responseOrigin=null;constructor({url:t,httpHeaders:i,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=eb(this.isHttp,i),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const i=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const[o,l]of this.headers)i.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Ch):r.expectedStatus=xh,i.responseType="arraybuffer",Dt(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>{t.onError(i.status)},i.onreadystatechange=this.onStateChange.bind(this,s),i.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,i.send(null),s}onProgress(t,i){const s=this.pendingRequests[t];s&&s.onProgress?.(i)}onStateChange(t,i){const s=this.pendingRequests[t];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){s.onError(r.status);return}const o=r.status||xh;if(!(o===xh&&s.expectedStatus===Ch)&&o!==s.expectedStatus){s.onError(r.status);return}const u=HE(r);if(o===Ch){const d=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);p?s.onDone({begin:parseInt(p[1],10),chunk:u}):(vt('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const i=this.pendingRequests[t].xhr;delete this.pendingRequests[t],i.abort()}}class GE{constructor(t){this._source=t,this._manager=new IE(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const i=this._rangeRequestReaders.indexOf(t);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return Dt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new VE(this._manager,this._source),this._fullRequestReader}getRangeReader(t,i){const s=new qE(this._manager,t,i);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class VE{constructor(t,i){this._manager=t,this._url=i.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,i=this._manager.getRequestXhr(t);this._manager._responseOrigin=Vl(i.responseURL);const s=i.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...p]=u.split(": ");return[d,p.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=ib({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=nb(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=$r(t,this._url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class qE{constructor(t,i,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:i,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Vl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const i=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=$r(t,this._url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const XE=/^[a-z][a-z0-9\-+.]+:/i;function YE(h){if(XE.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}class $E{constructor(t){this.source=t,this.url=YE(t.url),Dt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Dt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new KE(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new WE(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class KE{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=t.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=$r(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new hn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class WE{constructor(t,i,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:i,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const wr=Symbol("INITIAL_DATA");class ob{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:wr}}get(t,i=null){if(i){const r=this.#e(t);return r.promise.then(()=>i(r.data)),null}const s=this.#t[t];if(!s||s.data===wr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const i=this.#t[t];return!!i&&i.data!==wr}delete(t){const i=this.#t[t];return!i||i.data===wr?!1:(delete this.#t[t],!0)}resolve(t,i=null){const s=this.#e(t);s.data=i,s.resolve()}clear(){for(const t in this.#t){const{data:i}=this.#t[t];i?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:i}=this.#t[t];i!==wr&&(yield[t,i])}}}const QE=1e5,ey=30;let Pr=class Si{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#p=null;#u=[];#g=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#T=new WeakMap;static#w=null;static#A=new Set;constructor({textContentSource:t,container:i,viewport:s}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=i,this.#h=s.scale*Mi.pixelRatio,this.#d=s.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:l,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-l,u+o],this.#o=r,this.#a=o,Si.#M(),In(i,s),this.#t.promise.finally(()=>{Si.#A.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=Ee.platform;return wt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:i,done:s})=>{if(s){this.#t.resolve();return}this.#r??=i.lang,Object.assign(this.#f,i.styles),this.#C(i.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),Si.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:i=null}){const s=t.scale*Mi.pixelRatio,r=t.rotation;if(r!==this.#d&&(i?.(),this.#d=r,In(this.#l,{rotation:r})),s!==this.#h){i?.(),this.#h=s;const o={div:null,properties:null,ctx:Si.#D(this.#r)};for(const l of this.#u)o.properties=this.#g.get(l),o.div=l,this.#_(o)}}cancel(){const t=new hn("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#C(t){if(this.#n)return;this.#s.ctx??=Si.#D(this.#r);const i=this.#u,s=this.#m;for(const r of t){if(i.length>QE){vt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(r.str),this.#E(r)}}#E(t){const i=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(i);const r=it.transform(this.#y,t.transform);let o=Math.atan2(r[1],r[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#i&&l.fontSubstitution||l.fontFamily;u=Si.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),p=d*Si.#z(u,l,this.#r);let g,y;o===0?(g=r[4],y=r[5]-p):(g=r[4]+p*Math.sin(o),y=r[5]-p*Math.cos(o));const b="calc(var(--total-scale-factor) *",A=i.style;this.#e===this.#l?(A.left=`${(100*g/this.#o).toFixed(2)}%`,A.top=`${(100*y/this.#a).toFixed(2)}%`):(A.left=`${b}${g.toFixed(2)}px)`,A.top=`${b}${y.toFixed(2)}px)`),A.fontSize=`${b}${(Si.#w*d).toFixed(2)}px)`,A.fontFamily=u,s.fontSize=d,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,this.#i&&(i.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);S!==T&&Math.max(S,T)/Math.min(S,T)>1.5&&(E=!0)}if(E&&(s.canvasWidth=l.vertical?t.height:t.width),this.#g.set(i,s),this.#s.div=i,this.#s.properties=s,this.#_(this.#s),s.hasText&&this.#e.append(i),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#_(t){const{div:i,properties:s,ctx:r}=t,{style:o}=i;let l="";if(Si.#w>1&&(l=`scale(${1/Si.#w})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=o,{canvasWidth:d,fontSize:p}=s;Si.#R(r,p*this.#h,u);const{width:g}=r.measureText(i.textContent);g>0&&(l=`scaleX(${d*this.#h/g}) ${l}`)}s.angle!==0&&(l=`rotate(${s.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#A.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#D(t=null){let i=this.#b.get(t||="");if(!i){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),i=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,i),this.#T.set(i,{size:0,family:""})}return i}static#R(t,i,s){const r=this.#T.get(t);i===r.size&&s===r.family||(t.font=`${i}px ${s}`,r.size=i,r.family=s)}static#M(){if(this.#w!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#z(t,i,s){const r=this.#v.get(t);if(r)return r;const o=this.#D(s);o.canvas.width=o.canvas.height=ey,this.#R(o,ey,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let p=.8;return u?p=u/(u+d):(Ee.platform.isFirefox&&vt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),i.ascent?p=i.ascent:i.descent&&(p=1+i.descent)),this.#v.set(t,p),p}};const ZE=100;function od(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new ld,{docId:i}=t,s=h.url?rE(h.url):null,r=h.data?oE(h.data):null,o=h.httpHeaders||null,l=h.withCredentials===!0,u=h.password??null,d=h.range instanceof cd?h.range:null,p=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:2**16;let g=h.worker instanceof ba?h.worker:null;const y=h.verbosity,b=typeof h.docBaseUrl=="string"&&!qr(h.docBaseUrl)?h.docBaseUrl:null,A=Al(h.cMapUrl),E=h.cMapPacked!==!1,S=h.CMapReaderFactory||(Pe?pE:Hm),T=Al(h.iccUrl),w=Al(h.standardFontDataUrl),x=h.StandardFontDataFactory||(Pe?gE:Im),C=Al(h.wasmUrl),O=h.WasmFactory||(Pe?mE:Gm),N=h.stopAtErrors!==!0,j=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,B=h.isEvalSupported!==!1,V=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!Pe,Y=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!Pe&&(Ee.platform.isFirefox||!globalThis.chrome),Q=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,J=typeof h.disableFontFace=="boolean"?h.disableFontFace:Pe,ot=h.fontExtraProperties===!0,ft=h.enableXfa===!0,st=h.ownerDocument||globalThis.document,mt=h.disableRange===!0,k=h.disableStream===!0,G=h.disableAutoFetch===!0,Z=h.pdfBug===!0,ht=h.CanvasFactory||(Pe?fE:uE),At=h.FilterFactory||(Pe?dE:hE),D=h.enableHWA===!0,q=h.useWasm!==!1,W=d?d.length:h.length??NaN,tt=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!Pe&&!J,lt=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:!!(S===Hm&&x===Im&&O===Gm&&A&&w&&C&&Cr(A,document.baseURI)&&Cr(w,document.baseURI)&&Cr(C,document.baseURI)),dt=null;HS(y);const rt={canvasFactory:new ht({ownerDocument:st,enableHWA:D}),filterFactory:new At({docId:i,ownerDocument:st}),cMapReaderFactory:lt?null:new S({baseUrl:A,isCompressed:E}),standardFontDataFactory:lt?null:new x({baseUrl:w}),wasmFactory:lt?null:new O({baseUrl:C})};g||(g=ba.create({verbosity:y,port:Hn.workerPort}),t._worker=g);const Gt={docId:i,apiVersion:"5.4.296",data:r,password:u,disableAutoFetch:G,rangeChunkSize:p,length:W,docBaseUrl:b,enableXfa:ft,evaluatorOptions:{maxImageSize:j,disableFontFace:J,ignoreErrors:N,isEvalSupported:B,isOffscreenCanvasSupported:V,isImageDecoderSupported:Y,canvasMaxAreaInBytes:Q,fontExtraProperties:ot,useSystemFonts:tt,useWasm:q,useWorkerFetch:lt,cMapUrl:A,iccUrl:T,standardFontDataUrl:w,wasmUrl:C}},Ot={ownerDocument:st,pdfBug:Z,styleElement:dt,loadingParams:{disableAutoFetch:G,enableXfa:ft}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Ne=g.messageHandler.sendWithPromise("GetDocRequest",Gt,r?[r.buffer]:null);let Pt;if(d)Pt=new kE(d,{disableRange:mt,disableStream:k});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const $e=Cr(s)?jE:Pe?$E:GE;Pt=new $e({url:s,length:W,httpHeaders:o,withCredentials:l,rangeChunkSize:p,disableRange:mt,disableStream:k})}return Ne.then($e=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Vt=new Rr(i,$e,g.port),Lt=new ew(Vt,t,Pt,Ot,rt,D);t._transport=Lt,Vt.send("Ready",null)})}).catch(t._capability.reject),t}class ld{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${ld.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let cd=class{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#r=[];constructor(t,i,s=!1,r=null){this.length=t,this.initialData=i,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,i){for(const s of this.#r)s(t,i)}onDataProgress(t,i){this.#t.promise.then(()=>{for(const s of this.#i)s(t,i)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const i of this.#n)i(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,i){Yt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class JE{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,i){return this._transport.getAnnotationsByType(t,i)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class tw{#t=!1;constructor(t,i,s,r=!1){this._pageIndex=t,this._pageInfo=i,this._transport=s,this._stats=r?new km:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new ob,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}={}){return new Vr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:i=t.canvas,viewport:s,intent:r="display",annotationMode:o=Hi.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:p=null,pageColors:g=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:A=!1,operationsFilter:E=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(r,o,y,b),{renderingIntent:T,cacheKey:w}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(T);let x=this._intentStates.get(w);x||(x=Object.create(null),this._intentStates.set(w,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const C=!!(T&ai.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const O=!!(this._pdfBug&&globalThis.StepperManager?.enabled),N=!this.recordedBBoxes&&(A||O),j=Y=>{if(x.renderTasks.delete(B),N){const Q=B.gfx?.dependencyTracker.take();Q&&(B.stepper&&B.stepper.setOperatorBBoxes(Q,B.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=Q))}C&&(this.#t=!0),this.#e(),Y?(B.capability.reject(Y),this._abortOperatorList({intentState:x,reason:Y instanceof Error?Y:new Error(Y)})):B.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},B=new ua({callback:j,params:{canvas:i,canvasContext:t,dependencyTracker:N?new bE(i,x.operatorList.length,O):null,viewport:s,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:E});(x.renderTasks||=new Set).add(B);const V=B.task;return Promise.all([x.displayReadyCapability.promise,d]).then(([Y,Q])=>{if(this.destroyed){j();return}if(this._stats?.time("Rendering"),!(Q.renderingIntent&T))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");B.initializeGraphics({transparency:Y,optionalContentConfig:Q}),B.operatorListChanged()}).catch(j),V}getOperatorList({intent:t="display",annotationMode:i=Hi.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,i,s,r,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Br.textContent(s));const i=this.streamTextContent(t);return new Promise(function(s,r){function o(){l.read().then(function({value:d,done:p}){if(p){s(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},r)}const l=i.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const s of i.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const i=this.#e();return t&&i&&(this._stats&&=new km),i}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,i){const s=this._intentStates.get(i);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,i){for(let s=0,r=t.length;s<r;s++)i.operatorList.fnArray.push(t.fnArray[s]),i.operatorList.argsArray.push(t.argsArray[s]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const s of i.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:s,modifiedIds:r}){const{map:o,transfer:l}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:o,modifiedIds:r},l).getReader(),p=this._intentStates.get(i);p.streamReader=d;const g=()=>{d.read().then(({value:y,done:b})=>{if(b){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),g())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const b of p.renderTasks)b.operatorListChanged();this.#e()}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:i,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(i instanceof Il){let r=ZE;i.extraDelay>0&&i.extraDelay<1e3&&(r+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},r);return}}if(t.streamReader.cancel(new hn(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Un,Ci,ln,fs,zl,ps,gs,ze,Dl,lb,cb,Mr,ma,Ll;const Jt=class Jt{constructor({name:t=null,port:i=null,verbosity:s=IS()}={}){ki(this,ze);ki(this,Un,Promise.withResolvers());ki(this,Ci,null);ki(this,ln,null);ki(this,fs,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,i){if(Zt(Jt,gs).has(i))throw new Error("Cannot use more than one PDFWorker per port.");Zt(Jt,gs).set(i,this),Bi(this,ze,lb).call(this,i)}else Bi(this,ze,cb).call(this)}get promise(){return Zt(this,Un).promise}get port(){return Zt(this,ln)}get messageHandler(){return Zt(this,Ci)}destroy(){this.destroyed=!0,Zt(this,fs)?.terminate(),qe(this,fs,null),Zt(Jt,gs).delete(Zt(this,ln)),qe(this,ln,null),Zt(this,Ci)?.destroy(),qe(this,Ci,null)}static create(t){const i=Zt(this,gs).get(t?.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new Jt(t)}static get workerSrc(){if(Hn.workerSrc)return Hn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return wt(this,"_setupFakeWorkerGlobal",(async()=>Zt(this,ma,Ll)?Zt(this,ma,Ll):(await import(this.workerSrc)).WorkerMessageHandler)())}};Un=new WeakMap,Ci=new WeakMap,ln=new WeakMap,fs=new WeakMap,zl=new WeakMap,ps=new WeakMap,gs=new WeakMap,ze=new WeakSet,Dl=function(){Zt(this,Un).resolve(),Zt(this,Ci).send("configure",{verbosity:this.verbosity})},lb=function(t){qe(this,ln,t),qe(this,Ci,new Rr("main","worker",t)),Zt(this,Ci).on("ready",()=>{}),Bi(this,ze,Dl).call(this)},cb=function(){if(Zt(Jt,ps)||Zt(Jt,ma,Ll)){Bi(this,ze,Mr).call(this);return}let{workerSrc:t}=Jt;try{Jt._isSameOrigin(window.location,t)||(t=Jt._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),s=new Rr("main","worker",i),r=()=>{o.abort(),s.destroy(),i.terminate(),this.destroyed?Zt(this,Un).reject(new Error("Worker was destroyed")):Bi(this,ze,Mr).call(this)},o=new AbortController;i.addEventListener("error",()=>{Zt(this,fs)||r()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}qe(this,Ci,s),qe(this,ln,i),qe(this,fs,i),Bi(this,ze,Dl).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{l()}catch{Bi(this,ze,Mr).call(this)}});const l=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};l();return}catch{Hl("The worker has been disabled.")}Bi(this,ze,Mr).call(this)},Mr=function(){Zt(Jt,ps)||(vt("Setting up fake worker."),qe(Jt,ps,!0)),Jt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Zt(this,Un).reject(new Error("Worker was destroyed"));return}const i=new cE;qe(this,ln,i);const s=`fake${gm(Jt,zl)._++}`,r=new Rr(s+"_worker",s,i);t.setup(r,i),qe(this,Ci,new Rr(s,s+"_worker",i)),Bi(this,ze,Dl).call(this)}).catch(t=>{Zt(this,Un).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ma=new WeakSet,Ll=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},ki(Jt,ma),ki(Jt,zl,0),ki(Jt,ps,!1),ki(Jt,gs,new WeakMap),Pe&&(qe(Jt,ps,!0),Hn.workerSrc||="./pdf.worker.mjs"),Jt._isSameOrigin=(t,i)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const r=new URL(i,s);return s.origin===r.origin},Jt._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},Jt.fromPort=t=>{if(QS("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Jt.create(t)};let ba=Jt;class ew{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#r=null;constructor(t,i,s,r,o,l){this.messageHandler=t,this.loadingTask=i,this.commonObjs=new ob,this.fontLoader=new sE({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#s(t,i=null){const s=this.#t.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,i);return this.#t.set(t,r),r}get annotationStorage(){return wt(this,"annotationStorage",new nd)}getRenderingIntent(t,i=Hi.ENABLE,s=null,r=!1,o=!1){let l=ai.DISPLAY,u=Nh;switch(t){case"any":l=ai.ANY;break;case"display":break;case"print":l=ai.PRINT;break;default:vt(`getRenderingIntent - invalid intent: ${t}`)}const d=l&ai.PRINT&&s instanceof $y?s:this.annotationStorage;switch(i){case Hi.DISABLE:l+=ai.ANNOTATIONS_DISABLE;break;case Hi.ENABLE:break;case Hi.ENABLE_FORMS:l+=ai.ANNOTATIONS_FORMS;break;case Hi.ENABLE_STORAGE:l+=ai.ANNOTATIONS_STORAGE,u=d.serializable;break;default:vt(`getRenderingIntent - invalid annotationMode: ${i}`)}r&&(l+=ai.IS_EDITING),o&&(l+=ai.OPLIST);const{ids:p,hash:g}=d.modifiedIds,y=[l,u.hash,g];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:p}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Pr.cleanup(),this._networkStream?.cancelAllRequests(new hn("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(s,r)=>{Dt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){r.close();return}Dt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:l}=this._fullReader;return(!r||!o)&&(this._lastProgress&&i.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{i.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(s,r)=>{Dt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){r.close();return}Dt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{o.cancel(l),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,i._capability.resolve(new JE(s,this))}),t.on("DocException",s=>{i._capability.reject(Xe(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!i.onPassword)throw Xe(s);const r=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};i.onPassword(r,s.code)}catch(r){this.#r.reject(r)}return this.#r.promise}),t.on("DataLoaded",s=>{i.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in o){const g=o.error;vt(`Error during font loading: ${g}`),this.commonObjs.resolve(s,g);break}const l=new It(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(g,y)=>globalThis.FontInspector.fontAdded(g,y):null,d=new aE(l,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:p}=o;Dt(p,"The imageRef must be defined.");for(const g of this.#e.values())for(const[,y]of g.objs)if(y?.ref===p)return y.dataLen?(this.commonObjs.resolve(s,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,o,l])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||i.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&vt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=t-1,s=this.#n.get(i);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#i.set(o.refStr,t);const l=new tw(i,o,this,this._params.pdfBug);return this.#e.set(i,l),l});return this.#n.set(i,r),r}getPageIndex(t){return kh(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:i})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,i){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:i})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(i=>new NE(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=this.#t.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new LE(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#e.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Pr.cleanup()}}cachedPageNumber(t){if(!kh(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(i)??null}}class iw{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:i}=this.#t;return t.form||t.canvas&&i?.size>0}}class ua{#t=null;static#e=new WeakSet;constructor({callback:t,params:i,objs:s,commonObjs:r,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:A=!1,operationsFilter:E=null}){this.callback=t,this.params=i,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new iw(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvas,this._canvasContext=i.canvas?null:i.canvasContext,this._enableHWA=A,this._dependencyTracker=i.dependencyTracker,this._operationsFilter=E}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(ua.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ua.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ha(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ua.#e.delete(this._canvas),t||=new Il(`Rendering cancelled, page ${this._pageIndex+1}`,i),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ua.#e.delete(this._canvas),this.callback())))}}const ud="5.4.296",ub="f56dc8601";class ri{#t=null;#e=null;#n;#i=null;#r=!1;#s=!1;#a=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return wt(this,"_keyboardManager",new Xr([[["Escape","mac+Escape"],ri.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ri.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ri.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ri.prototype._moveToPrevious],[["Home","mac+Home"],ri.prototype._moveToBeginning],[["End","mac+End"],ri.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:i=null}){t?(this.#s=!1,this.#a=t):this.#s=!0,this.#l=t?._uiManager||i,this.#o=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",ri.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const i=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:i}),t.addEventListener("keydown",this.#m.bind(this),{signal:i});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),i=this.#l._signal;t.addEventListener("contextmenu",li,{signal:i}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,r]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=s,o.setAttribute("data-l10n-id",ri.#d[s]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=r,o.ariaSelected=r===this.#n,o.addEventListener("click",this.#f.bind(this,r),{signal:i}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:i}),t}#f(t,i){i.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Rt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const i=t.target.getAttribute("data-color");i&&this.#f(i,t)}_moveToNext(t){if(!this.#g){this.#p(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#g){this.#p(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#g){this.#p(t);return}this.#i.lastChild?.focus()}#m(t){ri._keyboardManager.exec(this,t)}#p(t){if(this.#g){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const i=this.#i=this.#h();this.#t.append(i)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#g){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const i=this.#l.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=i.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class zr{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,zr.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:i,colorValue:s}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",zr.#i[t]),r.addEventListener("input",()=>{this.#n.updateParams(i,r.value)},{signal:this.#n._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function iy(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function _r(h){return Math.max(0,Math.min(255,255*h))}class ny{static CMYK_G([t,i,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*i+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=_r(t),[t,t,t]}static G_HTML([t]){const i=iy(t);return`#${i}${i}${i}`}static RGB_G([t,i,s]){return["G",.3*t+.59*i+.11*s]}static RGB_rgb(t){return t.map(_r)}static RGB_HTML(t){return`#${t.map(iy).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,i+r)]}static CMYK_rgb([t,i,s,r]){return[_r(1-Math.min(1,t+r)),_r(1-Math.min(1,s+r)),_r(1-Math.min(1,i+r))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,s]){const r=1-t,o=1-i,l=1-s,u=Math.min(r,o,l);return["CMYK",r,o,l,u]}}class nw{create(t,i,s=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${i}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${i}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Yt("Abstract method `_createSVG` called.")}}class jr extends nw{_createSVG(t){return document.createElementNS(on,t)}}const sw=9,ys=new WeakSet,aw=new Date().getTimezoneOffset()*60*1e3;class sy{static create(t){switch(t.data.annotationType){case le.LINK:return new hd(t);case le.TEXT:return new ow(t);case le.WIDGET:switch(t.data.fieldType){case"Tx":return new lw(t);case"Btn":return t.data.radioButton?new hb(t):t.data.checkBox?new uw(t):new hw(t);case"Ch":return new dw(t);case"Sig":return new cw(t)}return new As(t);case le.POPUP:return new zh(t);case le.FREETEXT:return new db(t);case le.LINE:return new pw(t);case le.SQUARE:return new gw(t);case le.CIRCLE:return new mw(t);case le.POLYLINE:return new fb(t);case le.CARET:return new bw(t);case le.INK:return new dd(t);case le.POLYGON:return new yw(t);case le.HIGHLIGHT:return new pb(t);case le.UNDERLINE:return new vw(t);case le.SQUIGGLY:return new Aw(t);case le.STRIKEOUT:return new Sw(t);case le.STAMP:return new gb(t);case le.FILEATTACHMENT:return new Ew(t);default:return new ne(t)}}}class ne{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:i=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,i&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:i}){return!!(t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ne._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,i=this.annotationStorage?.getEditor(t.id);return i?i.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:i,inkLists:s,rect:r}=this.data;let o=-1/0,l=-1/0;if(i?.length>=8){for(let u=0;u<i.length;u+=8)i[u+1]>l?(l=i[u+1],o=i[u+2]):i[u+1]===l&&(o=Math.max(o,i[u+2]));return[o,l]}if(s?.length>=1){for(const u of s)for(let d=0,p=u.length;d<p;d+=2)u[d+1]>l?(l=u[d+1],o=u[d]):u[d+1]===l&&(o=Math.max(o,u[d]));if(o!==1/0)return[o,l]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:i},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:l}}}=this.parent;return t[1]=i[3]-t[1]+i[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-l)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Nr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:i}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(i.id,{popup:s})||this.annotationStorage.setValue(`${Nr}${i.id}`,{id:i.id,annotationType:i.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:i.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:i,popup:s}=t;i&&this.#i(i);let r=this.#n?.popup||this.popup;!r&&s?.text&&(this._createPopup(s),r=this.#n.popup),r&&(r.updateEdited(t),s?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:i},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:d}}}}=this;s?.splice(0,4,...t),i.left=`${100*(t[0]-u)/o}%`,i.top=`${100*(l-t[3]+d)/l}%`,r===0?(i.width=`${100*(t[2]-t[0])/o}%`,i.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(r)}_createContainer(t){const{data:i,parent:{page:s,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",i.id),!(this instanceof As)&&!(this instanceof hd)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,i.alternativeText&&(o.title=i.alternativeText),i.noRotate&&o.classList.add("norotate"),!i.rect||this instanceof zh){const{rotation:S}=i;return!i.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:d}=this;if(!t&&i.borderStyle.width>0){l.borderWidth=`${i.borderStyle.width}px`;const S=i.borderStyle.horizontalCornerRadius,T=i.borderStyle.verticalCornerRadius;if(S>0||T>0){const x=`calc(${S}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;l.borderRadius=x}else if(this instanceof hb){const x=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=x}switch(i.borderStyle.style){case oa.SOLID:l.borderStyle="solid";break;case oa.DASHED:l.borderStyle="dashed";break;case oa.BEVELED:vt("Unimplemented border style: beveled");break;case oa.INSET:vt("Unimplemented border style: inset");break;case oa.UNDERLINE:l.borderBottomStyle="solid";break}const w=i.borderColor||null;w?(this.#e=!0,l.borderColor=it.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):l.borderWidth=0}const p=it.normalizeRect([i.rect[0],s.view[3]-i.rect[1]+s.view[1],i.rect[2],s.view[3]-i.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:A}=r.rawDims;l.left=`${100*(p[0]-b)/g}%`,l.top=`${100*(p[1]-A)/y}%`;const{rotation:E}=i;return i.hasOwnCanvas||E===0?(l.width=`${100*u/g}%`,l.height=`${100*d/y}%`):this.setRotation(E,o),o}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),i.style.width=`${100*o/s}%`,i.style.height=`${100*l/r}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,s,r)=>{const o=r.detail[i],l=o[0],u=o.slice(1);r.target.style[s]=ny[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:ny[`${l}_rgb`](u)})};return wt(this,"_commonActions",{display:i=>{const{display:s}=i.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:s}=i.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const s=i.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,i){const s=this._commonActions;for(const r of Object.keys(i.detail))(t[r]||s[r])?.(i)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const s=this._commonActions;for(const[r,o]of Object.entries(i)){const l=s[r];if(l){const u={detail:{[r]:o},target:t};l(u),delete i[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,s,r,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,T,w,x]=t.subarray(2,6);if(r===S&&o===T&&i===w&&s===x)return}const{style:l}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:T}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const d=r-i,p=o-s,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=g.createElement("defs");y.append(b);const A=g.createElement("clipPath"),E=`clippath_${this.data.id}`;A.setAttribute("id",E),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let S=2,T=t.length;S<T;S+=8){const w=t[S],x=t[S+1],C=t[S+2],O=t[S+3],N=g.createElement("rect"),j=(C-i)/d,B=(o-x)/p,V=(w-C)/d,Y=(x-O)/p;N.setAttribute("x",j),N.setAttribute("y",B),N.setAttribute("width",V),N.setAttribute("height",Y),A.append(N),u?.push(`<rect vector-effect="non-scaling-stroke" x="${j}" y="${B}" width="${V}" height="${Y}"/>`)}this.#e&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${E})`}_createPopup(t=null){const{data:i}=this;let s,r;t?(s={str:t.text},r=t.date):(s=i.contentsObj,r=i.modificationDate);const o=this.#n=new zh({data:{color:i.color,titleObj:i.titleObj,modificationDate:r,contentsObj:s,richText:i.richText,parentRect:i.rect,borderStyle:0,id:`popup_${i.id}`,rotation:i.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){Yt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:l,exportValues:u}of r){if(o===-1||l===i)continue;const d=typeof u=="string"?u:null,p=document.querySelector(`[data-element-id="${l}"]`);if(p&&!ys.has(p)){vt(`_getElementsByName - element not allowed: ${l}`);continue}s.push({id:l,exportValue:d,domElement:p})}return s}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,l=r.getAttribute("data-element-id");l!==i&&ys.has(r)&&s.push({id:l,exportValue:o,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class rw extends ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class hd extends ne{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!i?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#n(s,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,i,s=""){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(t.title=s),this.#t()}#e(t,i,s="",r=null){t.href=this.linkService.getAnchorUrl(""),i.description?t.title=i.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(i.content,i.filename,r),!1),this.#t()}#n(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1))}i.overlaidText&&(t.title=i.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){vt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:r,refs:o,include:l}=i,u=[];if(r.length!==0||o.length!==0){const g=new Set(o);for(const y of r){const b=this._fieldObjects[y]||[];for(const{id:A}of b)g.add(A)}for(const y of Object.values(this._fieldObjects))for(const b of y)g.has(b.id)===l&&u.push(b)}else for(const g of Object.values(this._fieldObjects))u.push(...g);const d=this.annotationStorage,p=[];for(const g of u){const{id:y}=g;switch(p.push(y),g.type){case"text":{const A=g.defaultValue||"";d.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;d.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";d.setValue(y,{value:A});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!ys.has(b)){vt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}}),!1}}}class ow extends ne{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class As extends ne{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ee.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,s,r,o){s.includes("mouse")?t.addEventListener(s,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(s,l=>{if(s==="blur"){if(!i.focused||!l.relatedTarget)return;i.focused=!1}else if(s==="focus"){if(i.focused)return;i.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l)}})})}_setEventListeners(t,i,s,r){for(const[o,l]of s)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(i||={focused:!1}),this._setEventListener(t,i,o,l,r),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,i,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":it.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||sw,o=t.style;let l;const u=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(p/(Ah*r))||1,y=p/g;l=Math.min(r,d(y/Ah))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(r,d(p/Ah))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=it.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class lw extends As{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,s,r){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[i]=s),o.setValue(l.id,{[r]:s})}render(){const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(i,{value:this.data.fieldValue});let o=r.value||"";const l=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),ys.add(s),s.setAttribute("data-element-id",i),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:p,datetimeType:g,timeStep:y}=this.data,b=!!g&&this.enableScripting;p&&(s.title=p),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",E=>{t.setValue(i,{value:E.target.value}),this.setPropertyOnSiblings(s,"value",E.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",E=>{const S=this.data.defaultFieldValue??"";s.value=d.userValue=S,d.formattedValue=null});let A=E=>{const{formattedValue:S}=d;S!=null&&(E.target.value=S),E.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(d.focused)return;const{target:T}=S;if(b&&(T.type=g,y&&(T.step=y)),d.userValue){const w=d.userValue;if(b)if(g==="time"){const x=new Date(w),C=[x.getHours(),x.getMinutes(),x.getSeconds()];T.value=C.map(O=>O.toString().padStart(2,"0")).join(":")}else T.value=new Date(w-aw).toISOString().split(g==="date"?"T":".",1)[0];else T.value=w}d.lastCommittedValue=T.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const T={value(w){d.userValue=w.detail.value??"",b||t.setValue(i,{value:d.userValue.toString()}),w.target.value=d.userValue},formattedValue(w){const{formattedValue:x}=w.detail;d.formattedValue=x,x!=null&&w.target!==document.activeElement&&(w.target.value=x);const C={formattedValue:x};b&&(C.value=x),t.setValue(i,C)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{const{charLimit:x}=w.detail,{target:C}=w;if(x===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",x);let O=d.userValue;!O||O.length<=x||(O=O.slice(0,x),C.value=d.userValue=O,t.setValue(i,{value:O}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(T,S)}),s.addEventListener("keydown",S=>{d.commitKey=1;let T=-1;if(S.key==="Escape"?T=0:S.key==="Enter"&&!this.data.multiLine?T=2:S.key==="Tab"&&(d.commitKey=3),T===-1)return;const{value:w}=S.target;d.lastCommittedValue!==w&&(d.lastCommittedValue=w,d.userValue=w,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:w,willCommit:!0,commitKey:T,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const E=A;A=null,s.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:T}=S;let{value:w}=T;if(b){if(w&&g==="time"){const x=w.split(":").map(C=>parseInt(C,10));w=new Date(2e3,0,1,x[0],x[1],x[2]||0).valueOf(),T.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();T.type="text"}d.userValue=w,d.lastCommittedValue!==w&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:w,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),E(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:T,target:w}=S,{value:x,selectionStart:C,selectionEnd:O}=w;let N=C,j=O;switch(S.inputType){case"deleteWordBackward":{const B=x.substring(0,C).match(/\w*[^\w]*$/);B&&(N-=B[0].length);break}case"deleteWordForward":{const B=x.substring(C).match(/^[^\w]*\w*/);B&&(j+=B[0].length);break}case"deleteContentBackward":C===O&&(N-=1);break;case"deleteContentForward":C===O&&(j+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:x,change:T||"",willCommit:!1,selStart:N,selEnd:j}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class cw extends As{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class uw extends As{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.exportValue===i.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return ys.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",i.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const p of this._getElementsByName(u,s)){const g=d&&p.exportValue===i.exportValue;p.domElement&&(p.domElement.checked=g),t.setValue(p.id,{value:g})}t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=i.defaultFieldValue||"Off";l.target.checked=u===i.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class hb extends As{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.fieldValue===i.buttonValue}).value;if(typeof r=="string"&&(r=r!==i.buttonValue,t.setValue(s,{value:r})),r)for(const l of this._getElementsByName(i.fieldName,s))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(ys.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const p of this._getElementsByName(u,s))t.setValue(p.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=i.defaultFieldValue;l.target.checked=u!=null&&u===i.buttonValue}),this.enableScripting&&this.hasJSActions){const l=i.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:p=>{const g=l===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const b=g&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class hw extends hd{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class dw extends As{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,s=t.getValue(i,{value:this.data.fieldValue}),r=document.createElement("select");ys.add(r),r.setAttribute("data-element-id",i),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,s.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),l=()=>{g.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const u=g=>{const y=g?"value":"textContent",{options:b,multiple:A}=r;return A?Array.prototype.filter.call(b,E=>E.selected).map(E=>E[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=u(!1);const p=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const y={value(b){l?.();const A=b.detail.value,E=new Set(Array.isArray(A)?A:[A]);for(const S of r.options)S.selected=E.has(S.value);t.setValue(i,{value:u(!0)}),d=u(!1)},multipleSelection(b){r.multiple=!0},remove(b){const A=r.options,E=b.detail.remove;A[E].selected=!1,r.remove(E),A.length>0&&Array.prototype.findIndex.call(A,T=>T.selected)===-1&&(A[0].selected=!0),t.setValue(i,{value:u(!0),items:p(b)}),d=u(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(i,{value:null,items:[]}),d=u(!1)},insert(b){const{index:A,displayValue:E,exportValue:S}=b.detail.insert,T=r.children[A],w=document.createElement("option");w.textContent=E,w.value=S,T?T.before(w):r.append(w),t.setValue(i,{value:u(!0),items:p(b)}),d=u(!1)},items(b){const{items:A}=b.detail;for(;r.length!==0;)r.remove(0);for(const E of A){const{displayValue:S,exportValue:T}=E,w=document.createElement("option");w.textContent=S,w.value=T,r.append(w)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(i,{value:u(!0),items:p(b)}),d=u(!1)},indices(b){const A=new Set(b.detail.indices);for(const E of b.target.options)E.selected=A.has(E.index);t.setValue(i,{value:u(!0)}),d=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),r.addEventListener("input",g=>{const y=u(!0),b=u(!1);t.setValue(i,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){t.setValue(i,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class zh extends ne{constructor(t){const{data:i,elements:s,parent:r}=t,o=!!r._commentManager;if(super(t,{isRenderable:!o&&ne._hasPopupData(i)}),this.elements=s,o&&ne._hasPopupData(i)){const l=this.popup=this.#t();for(const u of s)u.popup=l}else this.popup=null}#t(){return new fw({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=this.#t(),s=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${Zh}${r}`).join(",")),this.container}}class fw{#t=null;#e=this.#V.bind(this);#n=this.#F.bind(this);#i=this.#N.bind(this);#r=this.#S.bind(this);#s=null;#a=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#p=null;#u=null;#g=null;#y=null;#v=null;#b=null;#T=null;#w=null;#A=null;#C=!1;#E=null;#_=null;constructor({container:t,color:i,elements:s,titleObj:r,modificationDate:o,contentsObj:l,richText:u,parent:d,rect:p,parentRect:g,open:y,commentManager:b=null}){this.#a=t,this.#w=r,this.#o=l,this.#T=u,this.#d=d,this.#s=i,this.#b=p,this.#h=g,this.#l=s,this.#t=b,this.#E=s[0],this.#c=kl.toDateObject(o),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),b?this.renderCommentButton():(this.#D(),this.#a.hidden=!0,y&&this.#S())}#D(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const i of this.trigger)i.addEventListener("click",this.#r,{signal:t}),i.addEventListener("pointerenter",this.#i,{signal:t}),i.addEventListener("pointerleave",this.#n,{signal:t}),i.classList.add("popupTriggerArea");for(const i of this.#l)i.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(i=>i.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#g||(this.#y||this.#R(),!this.#y))return;const{signal:t}=this.#p=new AbortController,i=!!this.#E.extraPopupElement,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!i)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!i)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(i){this.#g=this.#E.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#g=document.createElement("button");l.className="annotationCommentButton";const u=this.#E.container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#z(),this.#M(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}#M(){if(this.#E.extraPopupElement&&!this.#E.editor)return;this.renderCommentButton();const[t,i]=this.#y,{style:s}=this.#g;s.left=`calc(${t}%)`,s.top=`calc(${i}% - var(--comment-button-dim))`}#z(){this.#E.extraPopupElement||(this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:i}=this.#E.commentData;return t?this.#d._commentManager.makeCommentColor(t,i):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:t,color:i,opacity:s,creationDate:r,modificationDate:o}=this.#E.commentData;return{contentsObj:{str:this.comment},richText:t,color:i,opacity:s,creationDate:r,modificationDate:o}}get elementBeforePopup(){return this.#g}get comment(){return this.#_||=this.#E.commentText,this.#_}set comment(t){t!==this.comment&&(this.#E.commentText=this.#_=t)}get parentBoundingClientRect(){return this.#E.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:i}){this.#g&&(this.#g.classList.toggle("selected",t),this.#g.ariaExpanded=i)}setSelectedCommentButton(t){this.#g.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:i,height:s}=this.#g.getBoundingClientRect(),{x:r,y:o,width:l,height:u}=this.#E.layer.getBoundingClientRect();return[(t-r)/l,(i+s-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[i,s]=this.#v||this.commentButtonPosition.map(p=>p/100),r=this.parentBoundingClientRect,{x:o,y:l,width:u,height:d}=r;this.#t.showDialog(null,this,o+i*u,l+s*d,{...t,parentDimensions:r})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#s){const s=t.style.outlineColor=it.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const i=document.createElement("span");if(i.className="header",this.#w?.str){const s=document.createElement("span");s.className="title",i.append(s),{dir:s.dir,str:s.textContent}=this.#w}if(t.append(i),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),i.append(s)}td({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#O(){const t=this.#T,i=this.#o;return t?.str&&(!i?.str||i.str===t.str)&&this.#T.html||null}get#k(){return this.#O?.attributes?.style?.fontSize||0}get#j(){return this.#O?.attributes?.style?.color||null}#B(t){const i=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},r={style:{color:this.#j,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))i.push({name:"span",value:o,attributes:r});return s}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:t,popup:i,deleted:s}){if(this.#t){s?(this.remove(),this.#_=null):i&&(i.deleted?this.remove():(this.#z(),this.#_=i.text)),t&&(this.#y=null,this.#R(),this.#M());return}if(s||i?.deleted){this.remove();return}this.#D(),this.#A||={contentsObj:this.#o,richText:this.#T},t&&(this.#u=null),i&&i.text&&(this.#T=this.#B(i.text),this.#c=kl.toDateObject(i.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#T}=this.#A,this.#A=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#C=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#x(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}}=this.#d;let l=!!this.#h,u=l?this.#h:this.#b;for(const E of this.#l)if(!u||it.intersect(E.data.rect,u)!==null){u=E.data.rect,l=!0;break}const d=it.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=l?u[2]-u[0]+5:0,y=d[0]+g,b=d[1];this.#u=[100*(y-r)/i,100*(b-o)/s];const{style:A}=this.#a;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#S(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#N(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#e)):(this.#F(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#e))}#N(){this.#m||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#x(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#F(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#C&&(this.#m||this.#N(),this.#C=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class db extends ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=bt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const s=document.createElement("span");s.textContent=i,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class pw extends ne{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class gw extends ne{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",i-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class mw extends ne{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",i/2),l.setAttribute("cy",s/2),l.setAttribute("rx",i/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class fb extends ne{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r},width:o,height:l}=this;if(!i)return this.container;const u=this.svgFactory.create(o,l,!0);let d=[];for(let g=0,y=i.length;g<y;g+=2){const b=i[g]-t[0],A=t[3]-i[g+1];d.push(`${b},${A}`)}d=d.join(" ");const p=this.#t=this.svgFactory.createElement(this.svgElementName);return p.setAttribute("points",d),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),u.append(p),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class yw extends fb{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class bw extends ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class dd extends ne{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?bt.HIGHLIGHT:bt.INK}#n(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:l,width:u,height:d}=this.#n(i,t),p=this.svgFactory.create(u,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");p.append(g),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",l);for(let y=0,b=s.length;y<b;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[y].join(",")),g.append(A)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:r}=t,o=this.#t;if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let l=0,u=this.#e.length;l<u;l++)this.#e[l].setAttribute("points",s[l].join(","));if(r){const{transform:l,width:u,height:d}=this.#n(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class pb extends ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=bt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class vw extends ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Aw extends ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Sw extends ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class gb extends ne{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=bt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Ew extends ne{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:r}=Ee.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let fd=class mb{#t=null;#e=null;#n=null;#i=new Map;#r=null;#s=null;constructor({div:t,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:r,page:o,viewport:l,structTreeLayer:u,commentManager:d,linkService:p,annotationStorage:g}){this.div=t,this.#t=i,this.#e=s,this.#r=u||null,this.#s=p||null,this.#n=g||new nd,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=d||null}hasEditableAnnotations(){return this.#i.size>0}async#a(t,i,s){const r=t.firstChild||t,o=r.id=`${Zh}${i}`,l=await this.#r?.getAriaAttributes(o);if(l)for(const[u,d]of l)r.setAttribute(u,d);s?s.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,r,!1))}async render(t){const{annotations:i}=t,s=this.div;In(s,this.viewport);const r=new Map,o={data:null,layer:s,linkService:this.#s,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new jr,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of i){if(l.noHTML)continue;const u=l.annotationType===le.POPUP;if(u){const g=r.get(l.id);if(!g)continue;o.elements=g}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const d=sy.create(o);if(!d.isRenderable)continue;if(!u&&l.popupRef){const g=r.get(l.popupRef);g?g.push(d):r.set(l.popupRef,[d])}const p=d.render();l.hidden&&(p.style.visibility="hidden"),await this.#a(p,l.id,o.elements),d.extraPopupElement?.popup?.renderCommentButton(),d._isEditable&&(this.#i.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#o()}async addLinkAnnotations(t){const i={data:null,layer:this.div,linkService:this.#s,svgFactory:new jr,parent:this};for(const s of t){s.borderStyle||=mb._defaultBorderStyle,i.data=s;const r=sy.create(i);if(!r.isRenderable)continue;const o=r.render();await this.#a(o,s.id,null)}}update({viewport:t}){const i=this.div;this.viewport=t,In(i,{rotation:t.rotation}),this.#o(),i.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[i,s]of this.#e){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const l=this.#i.get(i);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(i,r.id,s),l._hasNoCanvas=!1):l.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:i}=this,{id:s,rotation:r}=t,o=new rw({data:{id:s,rect:t.getPDFRect(),rotation:r},editor:t,layer:i,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#n}),l=o.render();return i.append(l),this.#t?.moveElementInDOM(i,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return wt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:oa.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const xl=/\r\n?|\n/g;class Ae extends ut{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Ae.prototype,i=o=>o.isEmpty(),s=dn.TRANSLATE_SMALL,r=dn.TRANSLATE_BIG;return wt(this,"_keyboardManager",new Xr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static _type="freetext";static _editorType=bt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Ae._defaultColor||ut._defaultLineColor,this.#i=t.fontSize||Ae._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,i){ut.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Rt.FREETEXT_SIZE:Ae._defaultFontSize=i;break;case Rt.FREETEXT_COLOR:Ae._defaultColor=i;break}}updateParams(t,i){switch(t){case Rt.FREETEXT_SIZE:this.#r(i);break;case Rt.FREETEXT_COLOR:this.#s(i);break}}static get defaultPropertiesToUpdate(){return[[Rt.FREETEXT_SIZE,Ae._defaultFontSize],[Rt.FREETEXT_COLOR,Ae._defaultColor||ut._defaultLineColor]]}get propertiesToUpdate(){return[[Rt.FREETEXT_SIZE,this.#i],[Rt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new zr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Rt.FREETEXT_COLOR}#r(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#o()},s=this.#i;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(t){const i=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ae._internalPadding*t,-(Ae._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)i?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(Ae.#c(s)),i=s);return t.join(`
`)}#o(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,i=this.#t=this.#a().trimEnd();if(t===i)return;const s=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ae._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[p,g]=this.pageDimensions,[y,b]=this.pageTranslation;let A,E;switch(this.rotation){case 0:A=t+(l[0]-y)/p,E=i+this.height-(l[1]-b)/g;break;case 90:A=t+(l[0]-y)/p,E=i-(l[1]-b)/g,[u,d]=[d,-u];break;case 180:A=t-this.width+(l[0]-y)/p,E=i-(l[1]-b)/g,[u,d]=[-u,-d];break;case 270:A=t+(l[0]-y-this.height*g)/p,E=i+(l[1]-b-this.width*p)/g,[u,d]=[-d,u];break}this.setAt(A*r,E*o,u,d)}else this._moveAfterPaste(t,i);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(xl,"")}editorDivPaste(t){const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=Ae.#h(i.getData("text")||"").replaceAll(xl,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=l,p=[],g=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(g.push(u.nodeValue.slice(d).replaceAll(xl,"")),A!==this.editorDiv){let E=p;for(const S of this.editorDiv.childNodes){if(S===A){E=g;continue}E.push(Ae.#c(S))}}p.push(u.nodeValue.slice(0,d).replaceAll(xl,""))}else if(u===this.editorDiv){let A=p,E=0;for(const S of this.editorDiv.childNodes)E++===d&&(A=g),A.push(Ae.#c(S))}this.#t=`${p.join(`
`)}${r}${g.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(p.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const E=A.nodeValue.length;if(b<=E){y.setStart(A,b),y.setEnd(A,b);break}b-=E}o.removeAllRanges(),o.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ae._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,i,s){let r=null;if(t instanceof db){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:p,id:g,popupRef:y,richText:b,contentsObj:A,creationDate:E,modificationDate:S},textContent:T,textPosition:w,parent:{page:{pageNumber:x}}}=t;if(!T||T.length===0)return null;r=t={annotationType:bt.FREETEXT,color:Array.from(u),fontSize:l,value:T.join(`
`),position:w,pageIndex:x-1,rect:d.slice(0),rotation:p,annotationElementId:g,id:g,deleted:!1,popupRef:y,comment:A?.str||null,richText:b,creationDate:E,modificationDate:S}}const o=await super.deserialize(t,i,s);return o.#i=t.fontSize,o.color=it.makeHexColor(...t.color),o.#t=Ae.#h(t.value),o._initialData=r,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=ut._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:i,fontSize:this.#i,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((l,u)=>l!==r[u])||t.pageIndex!==o}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const r of this.#t.split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),i.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class et{static PRECISION=1e-4;toSVGPath(){Yt("Abstract method `toSVGPath` must be implemented.")}get box(){Yt("Abstract getter `box` must be implemented.")}serialize(t,i){Yt("Abstract method `serialize` must be implemented.")}static _rescale(t,i,s,r,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=i+t[u]*r,l[u+1]=s+t[u+1]*o;return l}static _rescaleAndSwap(t,i,s,r,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=i+t[u+1]*r,l[u+1]=s+t[u]*o;return l}static _translate(t,i,s,r){r||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)r[o]=i+t[o],r[o+1]=s+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,s,r,o){switch(o){case 90:return[1-i/s,t/r];case 180:return[1-t/s,1-i/r];case 270:return[i/s,1-t/r];default:return[t/s,i/r]}}static _normalizePagePoint(t,i,s){switch(s){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,s,r,o,l){return[(t+5*s)/6,(i+5*r)/6,(5*s+o)/6,(5*r+l)/6,(s+o)/2,(r+l)/2]}}class ds{#t;#e=[];#n;#i;#r=[];#s=new Float32Array(18);#a;#o;#c;#l;#d;#h;#f=[];static#m=8;static#p=2;static#u=ds.#m+ds.#p;constructor({x:t,y:i},s,r,o,l,u=0){this.#t=s,this.#h=o*r,this.#i=l,this.#s.set([NaN,NaN,NaN,NaN,t,i],6),this.#n=u,this.#l=ds.#m*r,this.#c=ds.#u*r,this.#d=r,this.#f.push(t,i)}isEmpty(){return isNaN(this.#s[8])}#g(){const t=this.#s.subarray(4,6),i=this.#s.subarray(16,18),[s,r,o,l]=this.#t;return[(this.#a+(t[0]-i[0])/2-s)/o,(this.#o+(t[1]-i[1])/2-r)/l,(this.#a+(i[0]-t[0])/2-s)/o,(this.#o+(i[1]-t[1])/2-r)/l]}add({x:t,y:i}){this.#a=t,this.#o=i;const[s,r,o,l]=this.#t;let[u,d,p,g]=this.#s.subarray(8,12);const y=t-p,b=i-g,A=Math.hypot(y,b);if(A<this.#c)return!1;const E=A-this.#l,S=E/A,T=S*y,w=S*b;let x=u,C=d;u=p,d=g,p+=T,g+=w,this.#f?.push(t,i);const O=-w/E,N=T/E,j=O*this.#h,B=N*this.#h;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([p+j,g+B],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([p-j,g-B],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([u+j,d+B],2),this.#r.push(NaN,NaN,NaN,NaN,(u+j-s)/o,(d+B-r)/l),this.#s.set([u-j,d-B],14),this.#e.push(NaN,NaN,NaN,NaN,(u-j-s)/o,(d-B-r)/l)),this.#s.set([x,C,u,d,p,g],6),!this.isEmpty()):(this.#s.set([x,C,u,d,p,g],6),Math.abs(Math.atan2(C-d,x-u)-Math.atan2(w,T))<Math.PI/2?([u,d,p,g]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+p)/2-s)/o,((d+g)/2-r)/l),[u,d,x,C]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((x+u)/2-s)/o,((C+d)/2-r)/l),!0):([x,C,u,d,p,g]=this.#s.subarray(0,6),this.#r.push(((x+5*u)/6-s)/o,((C+5*d)/6-r)/l,((5*u+p)/6-s)/o,((5*d+g)/6-r)/l,((u+p)/2-s)/o,((d+g)/2-r)/l),[p,g,u,d,x,C]=this.#s.subarray(12,18),this.#e.push(((x+5*u)/6-s)/o,((C+5*d)/6-r)/l,((5*u+p)/6-s)/o,((5*d+g)/6-r)/l,((u+p)/2-s)/o,((d+g)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,i=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#b(s);for(let r=i.length-6;r>=6;r-=6)isNaN(i[r])?s.push(`L${i[r+4]} ${i[r+5]}`):s.push(`C${i[r]} ${i[r+1]} ${i[r+2]} ${i[r+3]} ${i[r+4]} ${i[r+5]}`);return this.#v(s),s.join(" ")}#y(){const[t,i,s,r]=this.#t,[o,l,u,d]=this.#g();return`M${(this.#s[2]-t)/s} ${(this.#s[3]-i)/r} L${(this.#s[4]-t)/s} ${(this.#s[5]-i)/r} L${o} ${l} L${u} ${d} L${(this.#s[16]-t)/s} ${(this.#s[17]-i)/r} L${(this.#s[14]-t)/s} ${(this.#s[15]-i)/r} Z`}#v(t){const i=this.#e;t.push(`L${i[4]} ${i[5]} Z`)}#b(t){const[i,s,r,o]=this.#t,l=this.#s.subarray(4,6),u=this.#s.subarray(16,18),[d,p,g,y]=this.#g();t.push(`L${(l[0]-i)/r} ${(l[1]-s)/o} L${d} ${p} L${g} ${y} L${(u[0]-i)/r} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,i,s,r,o,l){return new yb(t,i,s,r,o,l)}getOutlines(){const t=this.#r,i=this.#e,s=this.#s,[r,o,l,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=d.length-2;y<b;y+=2)d[y]=(this.#f[y]-r)/l,d[y+1]=(this.#f[y+1]-o)/u;if(d[d.length-2]=(this.#a-r)/l,d[d.length-1]=(this.#o-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#T(d);const p=new Float32Array(this.#r.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){p[y]=p[y+1]=NaN;continue}p[y]=t[y],p[y+1]=t[y+1]}g=this.#A(p,g);for(let y=i.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(i[y+b])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=i[y+b],p[g+1]=i[y+b+1],g+=2}return this.#w(p,g),this.newFreeDrawOutline(p,d,this.#t,this.#d,this.#n,this.#i)}#T(t){const i=this.#s,[s,r,o,l]=this.#t,[u,d,p,g]=this.#g(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(i[2]-s)/o,(i[3]-r)/l,NaN,NaN,NaN,NaN,(i[4]-s)/o,(i[5]-r)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(i[16]-s)/o,(i[17]-r)/l,NaN,NaN,NaN,NaN,(i[14]-s)/o,(i[15]-r)/l],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#n,this.#i)}#w(t,i){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],i),i+=6}#A(t,i){const s=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[o,l,u,d]=this.#t,[p,g,y,b]=this.#g();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-l)/d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-l)/d],i),i+=24}}class yb extends et{#t;#e=new Float32Array(4);#n;#i;#r;#s;#a;constructor(t,i,s,r,o,l){super(),this.#a=t,this.#r=i,this.#t=s,this.#s=r,this.#n=o,this.#i=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[u,d,p,g]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-u)/p,t[y+1]=(t[y+1]-d)/g;for(let y=0,b=i.length;y<b;y+=2)i[y]=(i[y]-u)/p,i[y+1]=(i[y+1]-d)/g}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let i=6,s=this.#a.length;i<s;i+=6){if(isNaN(this.#a[i])){t.push(`L${this.#a[i+4]} ${this.#a[i+5]}`);continue}t.push(`C${this.#a[i]} ${this.#a[i+1]} ${this.#a[i+2]} ${this.#a[i+3]} ${this.#a[i+4]} ${this.#a[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],o){const l=s-t,u=r-i;let d,p;switch(o){case 0:d=et._rescale(this.#a,t,r,l,-u),p=et._rescale(this.#r,t,r,l,-u);break;case 90:d=et._rescaleAndSwap(this.#a,t,i,l,u),p=et._rescaleAndSwap(this.#r,t,i,l,u);break;case 180:d=et._rescale(this.#a,s,i,-l,u),p=et._rescale(this.#r,s,i,-l,u);break;case 270:d=et._rescaleAndSwap(this.#a,s,r,-l,-u),p=et._rescaleAndSwap(this.#r,s,r,-l,-u);break}return{outline:Array.from(d),points:[Array.from(p)]}}#o(t){const i=this.#a;let s=i[4],r=i[5];const o=[s,r,s,r];let l=s,u=r,d=s,p=r;const g=t?Math.max:Math.min,y=new Float32Array(4);for(let A=6,E=i.length;A<E;A+=6){const S=i[A+4],T=i[A+5];isNaN(i[A])?(it.pointBoundingBox(S,T,o),u>T?(l=S,u=T):u===T&&(l=g(l,S)),p<T?(d=S,p=T):p===T&&(d=g(d,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,it.bezierBoundingBox(s,r,...i.slice(A,A+6),y),it.rectBoundingBox(y[0],y[1],y[2],y[3],o),u>y[1]?(l=y[0],u=y[1]):u===y[1]&&(l=g(l,y[0])),p<y[3]?(d=y[2],p=y[3]):p===y[3]&&(d=g(d,y[2]))),s=S,r=T}const b=this.#e;b[0]=o[0]-this.#n,b[1]=o[1]-this.#n,b[2]=o[2]-o[0]+2*this.#n,b[3]=o[3]-o[1]+2*this.#n,this.firstPoint=[l,u],this.lastPoint=[d,p]}get box(){return this.#e}newOutliner(t,i,s,r,o,l=0){return new ds(t,i,s,r,o,l)}getNewOutline(t,i){const[s,r,o,l]=this.#e,[u,d,p,g]=this.#t,y=o*p,b=l*g,A=s*p+u,E=r*g+d,S=this.newOutliner({x:this.#r[0]*y+A,y:this.#r[1]*b+E},this.#t,this.#s,t,this.#i,i??this.#n);for(let T=2;T<this.#r.length;T+=2)S.add({x:this.#r[T]*y+A,y:this.#r[T+1]*b+E});return S.getOutlines()}}class jh{#t;#e;#n;#i=[];#r=[];constructor(t,i=0,s=0,r=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:T,width:w,height:x}of t){const C=Math.floor((S-i)/l)*l,O=Math.ceil((S+w+i)/l)*l,N=Math.floor((T-i)/l)*l,j=Math.ceil((T+x+i)/l)*l,B=[C,N,j,!0],V=[O,N,j,!1];this.#i.push(B,V),it.rectBoundingBox(C,N,O,j,o)}const u=o[2]-o[0]+2*s,d=o[3]-o[1]+2*s,p=o[0]-s,g=o[1]-s;let y=r?-1/0:1/0,b=1/0;const A=this.#i.at(r?-1:-2),E=[A[0],A[2]];for(const S of this.#i){const[T,w,x,C]=S;!C&&r?w<b?(b=w,y=T):w===b&&(y=Math.max(y,T)):C&&!r&&(w<b?(b=w,y=T):w===b&&(y=Math.min(y,T))),S[0]=(T-p)/u,S[1]=(w-g)/d,S[2]=(x-g)/d}this.#t=new Float32Array([p,g,u,d]),this.#e=[y,b],this.#n=E}getOutlines(){this.#i.sort((i,s)=>i[0]-s[0]||i[1]-s[1]||i[2]-s[2]);const t=[];for(const i of this.#i)i[3]?(t.push(...this.#l(i)),this.#o(i)):(this.#c(i),t.push(...this.#l(i)));return this.#s(t)}#s(t){const i=[],s=new Set;for(const l of t){const[u,d,p]=l;i.push([u,d,l],[u,p,l])}i.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=i.length;l<u;l+=2){const d=i[l][2],p=i[l+1][2];d.push(p),p.push(d),s.add(d),s.add(p)}const r=[];let o;for(;s.size>0;){const l=s.values().next().value;let[u,d,p,g,y]=l;s.delete(l);let b=u,A=d;for(o=[u,p],r.push(o);;){let E;if(s.has(g))E=g;else if(s.has(y))E=y;else break;s.delete(E),[u,d,p,g,y]=E,b!==u&&(o.push(b,A,u,A===d?d:p),b=u),A=A===d?p:d}o.push(b,A)}return new ww(r,this.#t,this.#e,this.#n)}#a(t){const i=this.#r;let s=0,r=i.length-1;for(;s<=r;){const o=s+r>>1,l=i[o][0];if(l===t)return o;l<t?s=o+1:r=o-1}return r+1}#o([,t,i]){const s=this.#a(t);this.#r.splice(s,0,[t,i])}#c([,t,i]){const s=this.#a(t);for(let r=s;r<this.#r.length;r++){const[o,l]=this.#r[r];if(o!==t)break;if(o===t&&l===i){this.#r.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[o,l]=this.#r[r];if(o!==t)break;if(o===t&&l===i){this.#r.splice(r,1);return}}}#l(t){const[i,s,r]=t,o=[[i,s,r]],l=this.#a(r);for(let u=0;u<l;u++){const[d,p]=this.#r[u];for(let g=0,y=o.length;g<y;g++){const[,b,A]=o[g];if(!(p<=b||A<=d)){if(b>=d){if(A>p)o[g][1]=p;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=d,A>p&&o.push([i,p,A])}}}return o}}class ww extends et{#t;#e;constructor(t,i,s,r){super(),this.#e=t,this.#t=i,this.firstPoint=s,this.lastPoint=r}toSVGPath(){const t=[];for(const i of this.#e){let[s,r]=i;t.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const l=i[o],u=i[o+1];l===s?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],o){const l=[],u=s-t,d=r-i;for(const p of this.#e){const g=new Array(p.length);for(let y=0;y<p.length;y+=2)g[y]=t+p[y]*u,g[y+1]=r-p[y+1]*d;l.push(g)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Fh extends ds{newFreeDrawOutline(t,i,s,r,o,l){return new _w(t,i,s,r,o,l)}}class _w extends yb{newOutliner(t,i,s,r,o,l=0){return new Fh(t,i,s,r,o,l)}}class ce extends ut{#t=null;#e=0;#n;#i=null;#r=null;#s=null;#a=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#p=null;#u="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=bt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ce.prototype;return wt(this,"_keyboardManager",new Xr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ce._defaultColor,this.#g=t.thickness||ce._defaultThickness,this.opacity=t.opacity||ce._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#E()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#E(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new jh(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const i=new jh(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=i.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:r}=this.#s;this.#m=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:i,clipPathId:s}){this.#l=t;const r=1.5;if(this.#s=t.getNewOutline(this.#g/2+r,.0025),i>=0)this.#d=i,this.#i=s,this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ce.#_(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:ce.#_(this.#s.box,y),path:{d:this.#s.toSVGPath()}})}const[o,l,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=d;break;case 90:{const[y,b]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*b/y,this.height=d*y/b;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=d;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*b/y,this.height=d*y/b;break}}const{firstPoint:p}=t;this.#f=[(p[0]-o)/u,(p[1]-l)/d];const{lastPoint:g}=this.#s;this.#m=[(g[0]-o)/u,(g[1]-l)/d]}static initialize(t,i){ut.initialize(t,i),ce._defaultColor||=i.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,i){switch(t){case Rt.HIGHLIGHT_COLOR:ce._defaultColor=i;break;case Rt.HIGHLIGHT_THICKNESS:ce._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,i){switch(t){case Rt.HIGHLIGHT_COLOR:this.#T(i);break;case Rt.HIGHLIGHT_THICKNESS:this.#w(i);break}}static get defaultPropertiesToUpdate(){return[[Rt.HIGHLIGHT_COLOR,ce._defaultColor],[Rt.HIGHLIGHT_THICKNESS,ce._defaultThickness]]}get propertiesToUpdate(){return[[Rt.HIGHLIGHT_COLOR,this.color||ce._defaultColor],[Rt.HIGHLIGHT_THICKNESS,this.#g||ce._defaultThickness],[Rt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#T(t){const i=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:i.bind(this,t,ce._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#w(t){const i=this.#g,s=r=>{this.#g=r,this.#A(r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new ri({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#E(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?this.#C():t&&(this.#E(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),i&&this.select()}#A(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#E(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#_([t,i,s,r],o){switch(o){case 90:return[1-i-r,t,r,s];case 180:return[1-t-s,1-i-r,s,r];case 270:return[i,1-t-s,r,s]}return[t,i,s,r]}rotate(t){const{drawLayer:i}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=ce.#_(this.#l.box,t)):s=ce.#_([this.x,this.y,this.width,this.height],t),i.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(this.#p,{bbox:ce.#_(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const i=this.#c=document.createElement("div");return t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=this.#i,this.setDims(this.width,this.height),Xy(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#D(t){ce._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const i=window.getSelection();t?i.setPosition(this.#t,this.#e):i.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#R(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#z(){if(this.#h)return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=this.#n,l=new Float32Array(o.length*8);let u=0;for(const{x:d,y:p,width:g,height:y}of o){const b=d*t+s,A=(1-p)*i+r;l[u]=l[u+4]=b,l[u+1]=l[u+3]=A,l[u+2]=l[u+6]=b+g*t,l[u+5]=l[u+7]=A-y*i,u+=8}return l}#O(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,i,{target:s,x:r,y:o}){const{x:l,y:u,width:d,height:p}=s.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),b=A=>{g.abort(),this.#j(t,A)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",ee,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",li,{signal:y}),s.addEventListener("pointermove",this.#k.bind(this,t),{signal:y}),this._freeHighlight=new Fh({x:r,y:o},[l,u,d,p],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#j(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,i,s){let r=null;if(t instanceof pb){const{data:{quadPoints:E,rect:S,rotation:T,id:w,color:x,opacity:C,popupRef:O,richText:N,contentsObj:j,creationDate:B,modificationDate:V},parent:{page:{pageNumber:Y}}}=t;r=t={annotationType:bt.HIGHLIGHT,color:Array.from(x),opacity:C,quadPoints:E,boxes:null,pageIndex:Y-1,rect:S.slice(0),rotation:T,annotationElementId:w,id:w,deleted:!1,popupRef:O,richText:N,comment:j?.str||null,creationDate:B,modificationDate:V}}else if(t instanceof dd){const{data:{inkLists:E,rect:S,rotation:T,id:w,color:x,borderStyle:{rawWidth:C},popupRef:O,richText:N,contentsObj:j,creationDate:B,modificationDate:V},parent:{page:{pageNumber:Y}}}=t;r=t={annotationType:bt.HIGHLIGHT,color:Array.from(x),thickness:C,inkLists:E,boxes:null,pageIndex:Y-1,rect:S.slice(0),rotation:T,annotationElementId:w,id:w,deleted:!1,popupRef:O,richText:N,comment:j?.str||null,creationDate:B,modificationDate:V}}const{color:o,quadPoints:l,inkLists:u,opacity:d}=t,p=await super.deserialize(t,i,s);p.color=it.makeHexColor(...o),p.opacity=d||1,u&&(p.#g=t.thickness),p._initialData=r,t.comment&&p.setCommentData(t);const[g,y]=p.pageDimensions,[b,A]=p.pageTranslation;if(l){const E=p.#n=[];for(let S=0;S<l.length;S+=8)E.push({x:(l[S]-b)/g,y:1-(l[S+1]-A)/y,width:(l[S+2]-l[S])/g,height:(l[S+1]-l[S+5])/y});p.#v(),p.#E(),p.rotate(p.rotation)}else if(u){p.#h=!0;const E=u[0],S={x:E[0]-b,y:y-(E[1]-A)},T=new Fh(S,[0,0,g,y],1,p.#g/2,!0,.001);for(let C=0,O=E.length;C<O;C+=2)S.x=E[C]-b,S.y=y-(E[C+1]-A),T.add(S);const{id:w,clipPathId:x}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);p.#b({highlightOutlines:T.getOutlines(),highlightId:w,clipPathId:x}),p.#E(),p.rotate(p.parentRotation)}return p}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=ut._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:i,opacity:this.opacity,thickness:this.#g,quadPoints:this.#z(),outlines:this.#O(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:i}=this._initialData;return this.hasEditedComment||t.color.some((s,r)=>s!==i[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class bb{#t=Object.create(null);updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,s]of Object.entries(t))i.startsWith("_")||this.updateProperty(i,s)}updateSVGProperty(t,i){this.#t[t]=i}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Yt("Not implemented")}}class gt extends ut{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static#s=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:i,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,i){const{id:s}=i.drawLayer.draw(gt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[r,o]of Object.entries(i))s.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){Yt("Not implemented")}static get typesMap(){Yt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(gt.#n.updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,i[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,i[r]]);return t}_updateProperty(t,i,s){const r=this._drawingOptions,o=r[i],l=u=>{r.updateProperty(i,u);const d=this.#t.updateProperty(i,u);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#m([t,i,s,r]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[i,1-t,s*(l/o),r*(o/l)];case 180:return[1-t,1-i,s,r];case 270:return[1-i,t,s*(l/o),r*(o/l)];default:return[t,i,s,r]}}#p(){const{x:t,y:i,width:s,height:r,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-i,t,s*(o/l),r*(l/o)];case 180:return[1-t,1-i,s,r];case 270:return[i,1-t,s*(o/l),r*(l/o)];default:return[t,i,s,r]}}#u(t){[this.x,this.y,this.width,this.height]=this.#m(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#g(){const{x:t,y:i,width:s,height:r,rotation:o,parentRotation:l,parentDimensions:[u,d]}=this;switch((o*4+l)/90){case 1:return[1-i-r,t,r,s];case 2:return[1-t-s,1-i-r,s,r];case 3:return[i,1-t-s,r,s];case 4:return[t,i-s*(u/d),r*(d/u),s*(u/d)];case 5:return[1-i,t,s*(u/d),r*(d/u)];case 6:return[1-t-r*(d/u),1-i,r*(d/u),s*(u/d)];case 7:return[i-s*(u/d),1-t-r*(d/u),s*(u/d),r*(d/u)];case 8:return[t-s,i-r,s,r];case 9:return[1-i,t-s,r,s];case 10:return[1-t,1-i,s,r];case 11:return[i-r,1-t,r,s];case 12:return[t-r*(d/u),i,r*(d/u),s*(u/d)];case 13:return[1-i-s*(u/d),t-r*(d/u),s*(u/d),r*(d/u)];case 14:return[1-t,1-i-s*(u/d),r*(d/u),s*(u/d)];case 15:return[i,1-t,s*(u/d),r*(d/u)];default:return[t,i,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,gt._mergeSVGProperties({bbox:this.#g()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),s}static createDrawerInstance(t,i,s,r,o){Yt("Not implemented")}static startDrawing(t,i,s,r){const{target:o,offsetX:l,offsetY:u,pointerId:d,pointerType:p}=r;if(gt.#a&&gt.#a!==p)return;const{viewport:{rotation:g}}=t,{width:y,height:b}=o.getBoundingClientRect(),A=gt.#i=new AbortController,E=t.combinedSignal(A);if(gt.#s||=d,gt.#a??=p,window.addEventListener("pointerup",S=>{gt.#s===S.pointerId?this._endDraw(S):gt.#o?.delete(S.pointerId)},{signal:E}),window.addEventListener("pointercancel",S=>{gt.#s===S.pointerId?this._currentParent.endDrawingSession():gt.#o?.delete(S.pointerId)},{signal:E}),window.addEventListener("pointerdown",S=>{gt.#a===S.pointerType&&((gt.#o||=new Set).add(S.pointerId),gt.#n.isCancellable()&&(gt.#n.removeLastElement(),gt.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",li,{signal:E}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:E}),o.addEventListener("touchmove",S=>{S.timeStamp===gt.#c&&ee(S)},{signal:E}),t.toggleDrawing(),i._editorUndoBar?.hide(),gt.#n){t.drawLayer.updateProperties(this._currentDrawId,gt.#n.startNew(l,u,y,b,g));return}i.updateUIForDefaultProperties(this),gt.#n=this.createDrawerInstance(l,u,y,b,g),gt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(gt.#r.toSVGProperties(),gt.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(gt.#c=-1,!gt.#n)return;const{offsetX:i,offsetY:s,pointerId:r}=t;if(gt.#s===r){if(gt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,gt.#n.add(i,s)),gt.#c=t.timeStamp,ee(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,gt.#n=null,gt.#r=null,gt.#a=null,gt.#c=NaN),gt.#i&&(gt.#i.abort(),gt.#i=null,gt.#s=NaN,gt.#o=null)}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t?.target===i.div&&i.drawLayer.updateProperties(this._currentDrawId,gt.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=gt.#n,r=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:Rt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Rt.DRAW_STEP),!gt.#n.isEmpty()){const{pageDimensions:[s,r],scale:o}=i,l=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:gt.#n.getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:gt.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,r,o,l){Yt("Not implemented")}static async deserialize(t,i,s){const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:u}}=i.viewport,d=this.deserializeDraw(l,u,r,o,this._INNER_MARGIN,t),p=await super.deserialize(t,i,s);return p.createDrawingOptions(t),p.#l({drawOutlines:d}),p.#f(),p.onScaleChanging(),p.rotate(),p}serializeDraw(t){const[i,s]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#t.serialize([i,s,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class Tw{#t=new Float64Array(6);#e;#n;#i;#r;#s;#a="";#o=0;#c=new Kr;#l;#d;constructor(t,i,s,r,o,l){this.#l=s,this.#d=r,this.#i=o,this.#r=l,[t,i]=this.#h(t,i);const u=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#s=[t,i],this.#n=[{line:u,points:this.#s}],this.#t.set(u,0)}updateProperty(t,i){t==="stroke-width"&&(this.#r=i)}#h(t,i){return et._normalizePoint(t,i,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(t,i){[t,i]=this.#h(t,i);const[s,r,o,l]=this.#t.subarray(2,6),u=t-o,d=i-l;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#s.push(t,i),isNaN(s)?(this.#t.set([o,l,t,i],2),this.#e.push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,r,o,l,t,i],0),this.#e.push(...et.createBezierPoints(s,r,o,l,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const s=this.add(t,i);return s||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,s,r,o){this.#l=s,this.#d=r,this.#i=o,[t,i]=this.#h(t,i);const l=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#s=[t,i];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:l,points:this.#s}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#a="";for(let t=0,i=this.#n.length;t<i;t++){const{line:s,points:r}=this.#n[t];this.#e=s,this.#s=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=et.svgRound(this.#e[4]),i=et.svgRound(this.#e[5]);if(this.#s.length===2)return this.#a=`${this.#a} M ${t} ${i} Z`,this.#a;if(this.#s.length<=6){const r=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,r)} M ${t} ${i}`,this.#o=6}if(this.#s.length===4){const r=et.svgRound(this.#e[10]),o=et.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${r} ${o}`,this.#o=12,this.#a}const s=[];this.#o===0&&(s.push(`M ${t} ${i}`),this.#o=6);for(let r=this.#o,o=this.#e.length;r<o;r+=6){const[l,u,d,p,g,y]=this.#e.slice(r,r+6).map(et.svgRound);s.push(`C${l} ${u} ${d} ${p} ${g} ${y}`)}return this.#a+=s.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,i,s,r){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#n,t,i,s,this.#i,this.#r,r),this.#t=null,this.#e=null,this.#n=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Kr extends et{#t;#e=0;#n;#i;#r;#s;#a;#o;#c;build(t,i,s,r,o,l,u){this.#r=i,this.#s=s,this.#a=r,this.#o=o,this.#c=l,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of this.#i){if(t.push(`M${et.svgRound(i[4])} ${et.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${et.svgRound(i[10])} ${et.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[o,l,u,d,p,g]=i.subarray(s,s+6).map(et.svgRound);t.push(`C${o} ${l} ${u} ${d} ${p} ${g}`)}}return t.join("")}serialize([t,i,s,r],o){const l=[],u=[],[d,p,g,y]=this.#d();let b,A,E,S,T,w,x,C,O;switch(this.#o){case 0:O=et._rescale,b=t,A=i+r,E=s,S=-r,T=t+d*s,w=i+(1-p-y)*r,x=t+(d+g)*s,C=i+(1-p)*r;break;case 90:O=et._rescaleAndSwap,b=t,A=i,E=s,S=r,T=t+p*s,w=i+d*r,x=t+(p+y)*s,C=i+(d+g)*r;break;case 180:O=et._rescale,b=t+s,A=i,E=-s,S=r,T=t+(1-d-g)*s,w=i+p*r,x=t+(1-d)*s,C=i+(p+y)*r;break;case 270:O=et._rescaleAndSwap,b=t+s,A=i+r,E=-s,S=-r,T=t+(1-p-y)*s,w=i+(1-d-g)*r,x=t+(1-p)*s,C=i+(1-d)*r;break}for(const{line:N,points:j}of this.#i)l.push(O(N,b,A,E,S,o?new Array(N.length):null)),u.push(O(j,b,A,E,S,o?new Array(j.length):null));return{lines:l,points:u,rect:[T,w,x,C]}}static deserialize(t,i,s,r,o,{paths:{lines:l,points:u},rotation:d,thickness:p}){const g=[];let y,b,A,E,S;switch(d){case 0:S=et._rescale,y=-t/s,b=i/r+1,A=1/s,E=-1/r;break;case 90:S=et._rescaleAndSwap,y=-i/r,b=-t/s,A=1/r,E=1/s;break;case 180:S=et._rescale,y=t/s+1,b=-i/r,A=-1/s,E=1/r;break;case 270:S=et._rescaleAndSwap,y=i/r+1,b=t/s+1,A=-1/r,E=-1/s;break}if(!l){l=[];for(const w of u){const x=w.length;if(x===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(x===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const C=new Float32Array(3*(x-2));l.push(C);let[O,N,j,B]=w.subarray(0,4);C.set([NaN,NaN,NaN,NaN,O,N],0);for(let V=4;V<x;V+=2){const Y=w[V],Q=w[V+1];C.set(et.createBezierPoints(O,N,j,B,Y,Q),(V-2)*3),[O,N,j,B]=[j,B,Y,Q]}}}for(let w=0,x=l.length;w<x;w++)g.push({line:S(l[w].map(C=>C??NaN),y,b,A,E),points:S(u[w].map(C=>C??NaN),y,b,A,E)});const T=new this.prototype.constructor;return T.build(g,s,r,1,d,p,o),T}#l(t=this.#c){const i=this.#n+t/2*this.#a;return this.#o%180===0?[i/this.#r,i/this.#s]:[i/this.#s,i/this.#r]}#d(){const[t,i,s,r]=this.#t,[o,l]=this.#l(0);return[t+o,i+l,s-2*o,r-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let u=4,d=r.length;u<d;u+=6)it.pointBoundingBox(r[u],r[u+1],t);continue}let o=r[4],l=r[5];for(let u=6,d=r.length;u<d;u+=6){const[p,g,y,b,A,E]=r.subarray(u,u+6);it.bezierBoundingBox(o,l,p,g,y,b,A,E,t),o=A,l=E}}const[i,s]=this.#l();t[0]=Le(t[0]-i,0,1),t[1]=Le(t[1]-s,0,1),t[2]=Le(t[2]+i,0,1),t[3]=Le(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,i){return t==="stroke-width"?this.#f(i):null}#f(t){const[i,s]=this.#l();this.#c=t;const[r,o]=this.#l(),[l,u]=[r-i,o-s],d=this.#t;return d[0]-=l,d[1]-=u,d[2]+=2*l,d[3]+=2*u,d}updateParentDimensions([t,i],s){const[r,o]=this.#l();this.#r=t,this.#s=i,this.#a=s;const[l,u]=this.#l(),d=l-r,p=u-o,g=this.#t;return g[0]-=d,g[1]-=p,g[2]+=2*d,g[3]+=2*p,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(et.svgRound).join(" ")}get defaultProperties(){const[t,i]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=this.#t;let s=0,r=0,o=0,l=0,u=0,d=0;switch(this.#e){case 90:r=i/t,o=-t/i,u=t;break;case 180:s=-1,l=-1,u=t,d=i;break;case 270:r=-i/t,o=t/i,d=i;break;default:return""}return`matrix(${s} ${r} ${o} ${l} ${et.svgRound(u)} ${et.svgRound(d)})`}getPathResizingSVGProperties([t,i,s,r]){const[o,l]=this.#l(),[u,d,p,g]=this.#t;if(Math.abs(p-o)<=et.PRECISION||Math.abs(g-l)<=et.PRECISION){const S=t+s/2-(u+p/2),T=i+r/2-(d+g/2);return{path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${T})`}}}const y=(s-2*o)/(p-2*o),b=(r-2*l)/(g-2*l),A=p/s,E=g/r;return{path:{"transform-origin":`${et.svgRound(u)} ${et.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${E}) translate(${et.svgRound(o)} ${et.svgRound(l)}) scale(${y} ${b}) translate(${et.svgRound(-o)} ${et.svgRound(-l)})`}}}getPathResizedSVGProperties([t,i,s,r]){const[o,l]=this.#l(),u=this.#t,[d,p,g,y]=u;if(u[0]=t,u[1]=i,u[2]=s,u[3]=r,Math.abs(g-o)<=et.PRECISION||Math.abs(y-l)<=et.PRECISION){const T=t+s/2-(d+g/2),w=i+r/2-(p+y/2);for(const{line:x,points:C}of this.#i)et._translate(x,T,w,x),et._translate(C,T,w,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*o)/(g-2*o),A=(r-2*l)/(y-2*l),E=-b*(d+o)+t+o,S=-A*(p+l)+i+l;if(b!==1||A!==1||E!==0||S!==0)for(const{line:T,points:w}of this.#i)et._rescale(T,E,S,b,A,T),et._rescale(w,E,S,b,A,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[r,o]=s,l=this.#t,u=t-l[0],d=i-l[1];if(this.#r===r&&this.#s===o)for(const{line:p,points:g}of this.#i)et._translate(p,u,d,p),et._translate(g,u,d,g);else{const p=this.#r/r,g=this.#s/o;this.#r=r,this.#s=o;for(const{line:y,points:b}of this.#i)et._rescale(y,u,d,p,g,y),et._rescale(b,u,d,p,g,b);l[2]*=p,l[3]*=g}return l[0]=t,l[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t[0])} ${et.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class ql extends bb{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ut._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??=this["stroke-width"],i*=this._viewParameters.realScale),super.updateSVGProperty(t,i)}clone(){const t=new ql(this._viewParameters);return t.updateAll(this),t}}class pd extends gt{static _type="ink";static _editorType=bt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){ut.initialize(t,i),this._defaultDrawingOptions=new ql(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return wt(this,"typesMap",new Map([[Rt.INK_THICKNESS,"stroke-width"],[Rt.INK_COLOR,"stroke"],[Rt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,r,o){return new Tw(t,i,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,r,o,l){return Kr.deserialize(t,i,s,r,o,l)}static async deserialize(t,i,s){let r=null;if(t instanceof dd){const{data:{inkLists:l,rect:u,rotation:d,id:p,color:g,opacity:y,borderStyle:{rawWidth:b},popupRef:A,richText:E,contentsObj:S,creationDate:T,modificationDate:w},parent:{page:{pageNumber:x}}}=t;r=t={annotationType:bt.INK,color:Array.from(g),thickness:b,opacity:y,paths:{points:l},boxes:null,pageIndex:x-1,rect:u.slice(0),rotation:d,annotationElementId:p,id:p,deleted:!1,popupRef:A,richText:E,comment:S?.str||null,creationDate:T,modificationDate:w}}const o=await super.deserialize(t,i,s);return o._initialData=r,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new zr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Rt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=pd.getDefaultDrawingOptions({stroke:it.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,u=Object.assign(super.serialize(t),{color:ut._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:i,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:i,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==i[u])||t.thickness!==s||t.opacity!==r||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}}class Uh extends Kr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Cl=8,Tr=3;class us{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,i,s,r){return s-=t,r-=i,s===0?r>0?0:4:s===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,i,s,r,o,l,u){const d=this.#e(s,r,o,l);for(let p=0;p<8;p++){const g=(-p+d-u+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*i+(r+b)]!==0)return g}return-1}static#r(t,i,s,r,o,l,u){const d=this.#e(s,r,o,l);for(let p=0;p<8;p++){const g=(p+d+u+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*i+(r+b)]!==0)return g}return-1}static#s(t,i,s,r){const o=t.length,l=new Int32Array(o);for(let g=0;g<o;g++)l[g]=t[g]<=r?1:0;for(let g=1;g<s-1;g++)l[g*i]=l[g*i+i-1]=0;for(let g=0;g<i;g++)l[g]=l[i*s-1-g]=0;let u=1,d;const p=[];for(let g=1;g<s-1;g++){d=1;for(let y=1;y<i-1;y++){const b=g*i+y,A=l[b];if(A===0)continue;let E=g,S=y;if(A===1&&l[b-1]===0)u+=1,S-=1;else if(A>=1&&l[b+1]===0)u+=1,S+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const T=[y,g],w=S===y+1,x={isHole:w,points:T,id:u,parent:0};p.push(x);let C;for(const J of p)if(J.id===d){C=J;break}C?C.isHole?x.parent=w?C.parent:d:x.parent=w?d:C.parent:x.parent=w?d:0;const O=this.#i(l,i,g,y,E,S,0);if(O===-1){l[b]=-u,l[b]!==1&&(d=Math.abs(l[b]));continue}let N=this.#n[2*O],j=this.#n[2*O+1];const B=g+N,V=y+j;E=B,S=V;let Y=g,Q=y;for(;;){const J=this.#r(l,i,Y,Q,E,S,1);N=this.#n[2*J],j=this.#n[2*J+1];const ot=Y+N,ft=Q+j;T.push(ft,ot);const st=Y*i+Q;if(l[st+1]===0?l[st]=-u:l[st]===1&&(l[st]=u),ot===g&&ft===y&&Y===B&&Q===V){l[b]!==1&&(d=Math.abs(l[b]));break}else E=Y,S=Q,Y=ot,Q=ft}}}return p}static#a(t,i,s,r){if(s-i<=4){for(let B=i;B<s-2;B+=2)r.push(t[B],t[B+1]);return}const o=t[i],l=t[i+1],u=t[s-4]-o,d=t[s-3]-l,p=Math.hypot(u,d),g=u/p,y=d/p,b=g*l-y*o,A=d/u,E=1/p,S=Math.atan(A),T=Math.cos(S),w=Math.sin(S),x=E*(Math.abs(T)+Math.abs(w)),C=E*(1-x+x**2),O=Math.max(Math.atan(Math.abs(w+T)*C),Math.atan(Math.abs(w-T)*C));let N=0,j=i;for(let B=i+2;B<s-2;B+=2){const V=Math.abs(b-g*t[B+1]+y*t[B]);V>N&&(j=B,N=V)}N>(p*O)**2?(this.#a(t,i,j+2,r),this.#a(t,j,s,r)):r.push(o,l)}static#o(t){const i=[],s=t.length;return this.#a(t,0,s,i),i.push(t[s-2],t[s-1]),i.length<=4?null:i}static#c(t,i,s,r,o,l){const u=new Float32Array(l**2),d=-2*r**2,p=l>>1;for(let S=0;S<l;S++){const T=(S-p)**2;for(let w=0;w<l;w++)u[S*l+w]=Math.exp((T+(w-p)**2)/d)}const g=new Float32Array(256),y=-2*o**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const b=t.length,A=new Uint8Array(b),E=new Uint32Array(256);for(let S=0;S<s;S++)for(let T=0;T<i;T++){const w=S*i+T,x=t[w];let C=0,O=0;for(let j=0;j<l;j++){const B=S+j-p;if(!(B<0||B>=s))for(let V=0;V<l;V++){const Y=T+V-p;if(Y<0||Y>=i)continue;const Q=t[B*i+Y],J=u[j*l+V]*g[Math.abs(Q-x)];C+=Q*J,O+=J}}const N=A[w]=Math.round(C/O);E[N]++}return[A,E]}static#l(t){const i=new Uint32Array(256);for(const s of t)i[s]++;return i}static#d(t){const i=t.length,s=new Uint8ClampedArray(i>>2);let r=-1/0,o=1/0;for(let u=0,d=s.length;u<d;u++){const p=s[u]=t[u<<2];r=Math.max(r,p),o=Math.min(o,p)}const l=255/(r-o);for(let u=0,d=s.length;u<d;u++)s[u]=(s[u]-o)*l;return s}static#h(t){let i,s=-1/0,r=-1/0;const o=t.findIndex(d=>d!==0);let l=o,u=o;for(i=o;i<256;i++){const d=t[i];d>s&&(i-l>r&&(r=i-l,u=i-1),s=d,l=i)}for(i=u-1;i>=0&&!(t[i]>t[i+1]);i--);return i}static#f(t){const i=t,{width:s,height:r}=t,{maxDim:o}=this.#t;let l=s,u=r;if(s>o||r>o){let b=s,A=r,E=Math.log2(Math.max(s,r)/o);const S=Math.floor(E);E=E===S?S-1:S;for(let w=0;w<E;w++){l=Math.ceil(b/2),u=Math.ceil(A/2);const x=new OffscreenCanvas(l,u);x.getContext("2d").drawImage(t,0,0,b,A,0,0,l,u),b=l,A=u,t!==i&&t.close(),t=x.transferToImageBitmap()}const T=Math.min(o/l,o/u);l=Math.round(l*T),u=Math.round(u*T)}const p=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});p.fillStyle="white",p.fillRect(0,0,l,u),p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,l,u);const g=p.getImageData(0,0,l,u).data;return[this.#d(g),l,u]}static extractContoursFromText(t,{fontFamily:i,fontStyle:s,fontWeight:r},o,l,u,d){let p=new OffscreenCanvas(1,1),g=p.getContext("2d",{alpha:!1});const y=200,b=g.font=`${s} ${r} ${y}px ${i}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:E,actualBoundingBoxAscent:S,actualBoundingBoxDescent:T,fontBoundingBoxAscent:w,fontBoundingBoxDescent:x,width:C}=g.measureText(t),O=1.5,N=Math.ceil(Math.max(Math.abs(A)+Math.abs(E)||0,C)*O),j=Math.ceil(Math.max(Math.abs(S)+Math.abs(T)||y,Math.abs(w)+Math.abs(x)||y)*O);p=new OffscreenCanvas(N,j),g=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,N,j),g.fillStyle="black",g.fillText(t,N*(O-1)/2,j*(3-O)/2);const B=this.#d(g.getImageData(0,0,N,j).data),V=this.#l(B),Y=this.#h(V),Q=this.#s(B,N,j,Y);return this.processDrawnLines({lines:{curves:Q,width:N,height:j},pageWidth:o,pageHeight:l,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,i,s,r,o){const[l,u,d]=this.#f(t),[p,g]=this.#c(l,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(g),b=this.#s(p,u,d,y);return this.processDrawnLines({lines:{curves:b,width:u,height:d},pageWidth:i,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:l,areContours:u}){r%180!==0&&([i,s]=[s,i]);const{curves:d,width:p,height:g}=t,y=t.thickness??0,b=[],A=Math.min(i/p,s/g),E=A/i,S=A/s,T=[];for(const{points:x}of d){const C=l?this.#o(x):x;if(!C)continue;T.push(C);const O=C.length,N=new Float32Array(O),j=new Float32Array(3*(O===2?2:O-2));if(b.push({line:j,points:N}),O===2){N[0]=C[0]*E,N[1]=C[1]*S,j.set([NaN,NaN,NaN,NaN,N[0],N[1]],0);continue}let[B,V,Y,Q]=C;B*=E,V*=S,Y*=E,Q*=S,N.set([B,V,Y,Q],0),j.set([NaN,NaN,NaN,NaN,B,V],0);for(let J=4;J<O;J+=2){const ot=N[J]=C[J]*E,ft=N[J+1]=C[J+1]*S;j.set(et.createBezierPoints(B,V,Y,Q,ot,ft),(J-2)*3),[B,V,Y,Q]=[Y,Q,ot,ft]}}if(b.length===0)return null;const w=u?new Uh:new Kr;return w.build(b,i,s,1,r,u?0:y,o),{outline:w,newCurves:T,areContours:u,thickness:y,width:p,height:g}}static async compressSignature({outlines:t,areContours:i,thickness:s,width:r,height:o}){let l=1/0,u=-1/0,d=0;for(const C of t){d+=C.length;for(let O=2,N=C.length;O<N;O++){const j=C[O]-C[O-2];l=Math.min(l,j),u=Math.max(u,j)}}let p;l>=-128&&u<=127?p=Int8Array:l>=-32768&&u<=32767?p=Int16Array:p=Int32Array;const g=t.length,y=Cl+Tr*g,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*p.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=r,b[A++]=o,b[A++]=i?0:1,b[A++]=Math.max(0,Math.floor(s??0)),b[A++]=g,b[A++]=p.BYTES_PER_ELEMENT;for(const C of t)b[A++]=C.length-2,b[A++]=C[0],b[A++]=C[1];const E=new CompressionStream("deflate-raw"),S=E.writable.getWriter();await S.ready,S.write(b);const T=p.prototype.constructor;for(const C of t){const O=new T(C.length-2);for(let N=2,j=C.length;N<j;N++)O[N-2]=C[N]-C[N-2];S.write(O)}S.close();const w=await new Response(E.readable).arrayBuffer(),x=new Uint8Array(w);return Fy(x)}static async decompressSignature(t){try{const i=WS(t),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(i).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const C of s)l||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),l.set(C,u),u+=C.length;const d=new Uint32Array(l.buffer,0,l.length>>2),p=d[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const g=d[2],y=d[3],b=d[4]===0,A=d[5],E=d[6],S=d[7],T=[],w=(Cl+Tr*E)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(S){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(l.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(l.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(l.buffer,w);break}u=0;for(let C=0;C<E;C++){const O=d[Tr*C+Cl],N=new Float32Array(O+2);T.push(N);for(let j=0;j<Tr-1;j++)N[j]=d[Tr*C+Cl+j+1];for(let j=0;j<O;j++)N[j+2]=N[j]+x[u++]}return{areContours:b,thickness:A,outlines:T,width:g,height:y}}catch(i){return vt(`decompressSignature: ${i}`),null}}}class gd extends bb{constructor(){super(),super.updateProperties({fill:ut._defaultLineColor,"stroke-width":0})}clone(){const t=new gd;return t.updateAll(this),t}}class md extends ql{constructor(t){super(t),super.updateProperties({stroke:ut._defaultLineColor,"stroke-width":1})}clone(){const t=new md(this._viewParameters);return t.updateAll(this),t}}class ji extends gt{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=bt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){ut.initialize(t,i),this._defaultDrawingOptions=new gd,this._defaultDrawnSignatureOptions=new md(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return wt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:o,areContours:l,description:u,uuid:d,heightInPage:p}=this.#n,{rawDims:{pageWidth:g,pageHeight:y},rotation:b}=this.parent.viewport,A=us.processDrawnLines({lines:r,pageWidth:g,pageHeight:y,rotation:b,innerMargin:ji._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(A,p,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(i=>{i?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:s,width:r,height:o}=this.#n,l=Math.max(r,o),u=us.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,s,r){const{x:o,y:l}=this,{outline:u}=this.#n=t;this.#t=u instanceof Uh,this.description=s;let d;this.#t?d=ji.getDefaultDrawingOptions():(d=ji._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,p]=this.pageDimensions;let g=i/p;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return us.process(t,i,s,r,ji._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return us.extractContoursFromText(t,i,s,r,o,ji._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return us.processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:ji._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=ji.getDefaultDrawingOptions():(this._drawingOptions=ji._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(o),t?(o.paths={lines:i,points:s},o.uuid=this.#i,o.isCopy=!0):o.lines=i,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,i,s,r,o,l){return l.areContours?Uh.deserialize(t,i,s,r,o,l):Kr.deserialize(t,i,s,r,o,l)}static async deserialize(t,i,s){const r=await super.deserialize(t,i,s);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class xw extends ut{#t=null;#e=null;#n=null;#i=null;#r=null;#s="";#a=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=bt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){ut.initialize(t,i)}static isHandlingMimeForPasting(t){return Bl.includes(t)}static paste(t,i){i.pasteEditor({mode:bt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}#h(t,i=!1){if(!t){this.remove();return}this.#t=t.bitmap,i||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),i&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Bl.join(",");const i=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,r&&(this.#t=r),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},t)}#p(){const{div:t}=this;let{width:i,height:s}=this.#t;const[r,o]=this.pageDimensions,l=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>l*r||s>l*o){const d=Math.min(l*r/i,l*o/s);i*=d,s*=d}this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=i/r,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,i,s=!1){t||(t=224);const{width:r,height:o}=this.#t,l=new Mi;let u=this.#t,d=r,p=o,g=null;if(i){if(r>i||o>i){const j=Math.min(i/r,i/o);d=Math.floor(r*j),p=Math.floor(o*j)}g=document.createElement("canvas");const b=g.width=Math.ceil(d*l.sx),A=g.height=Math.ceil(p*l.sy);this.#l||(u=this.#u(b,A));const E=g.getContext("2d");E.filter=this._uiManager.hcmFilter;let S="white",T="#cfcfd8";this._uiManager.hcmFilter!=="none"?T="black":JS.isDarkMode&&(S="#8f8f9d",T="#42414d");const w=15,x=w*l.sx,C=w*l.sy,O=new OffscreenCanvas(x*2,C*2),N=O.getContext("2d");N.fillStyle=S,N.fillRect(0,0,x*2,C*2),N.fillStyle=T,N.fillRect(0,0,x,C),N.fillRect(x,C,x,C),E.fillStyle=E.createPattern(O,"repeat"),E.fillRect(0,0,b,A),E.drawImage(u,0,0,u.width,u.height,0,0,b,A)}let y=null;if(s){let b,A;if(l.symmetric&&u.width<t&&u.height<t)b=u.width,A=u.height;else if(u=this.#t,r>t||o>t){const T=Math.min(t/r,t/o);b=Math.floor(r*T),A=Math.floor(o*T),this.#l||(u=this.#u(b,A))}const S=new OffscreenCanvas(b,A).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,A),y={width:b,height:A,data:S.getImageData(0,0,b,A).data}}return{canvas:g,width:d,height:p,imageData:y}}#u(t,i){const{width:s,height:r}=this.#t;let o=s,l=r,u=this.#t;for(;o>2*t||l>2*i;){const d=o,p=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*i&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(o,l);g.getContext("2d").drawImage(u,0,0,d,p,0,0,o,l),u=g.transferToImageBitmap()}return u}#g(){const[t,i]=this.parentDimensions,{width:s,height:r}=this,o=new Mi,l=Math.ceil(s*t*o.sx),u=Math.ceil(r*i*o.sy),d=this.#a;if(!d||d.width===l&&d.height===u)return;d.width=l,d.height=u;const p=this.#l?this.#t:this.#u(l,u),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(p,0,0,p.width,p.height,0,0,l,u)}#y(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#t,i.getContext("2d").drawImage(this.#t,0,0),i.toDataURL()}if(this.#l){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*ms.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*ms.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,i,s){let r=null,o=!1;if(t instanceof gb){const{data:{rect:S,rotation:T,id:w,structParent:x,popupRef:C,richText:O,contentsObj:N,creationDate:j,modificationDate:B},container:V,parent:{page:{pageNumber:Y}},canvas:Q}=t;let J,ot;Q?(delete t.canvas,{id:J,bitmap:ot}=s.imageManager.getFromCanvas(V.id,Q),Q.remove()):(o=!0,t._hasNoCanvas=!0);const ft=(await i._structTree.getAriaAttributes(`${Zh}${w}`))?.get("aria-label")||"";r=t={annotationType:bt.STAMP,bitmapId:J,bitmap:ot,pageIndex:Y-1,rect:S.slice(0),rotation:T,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:ft},isSvg:!1,structParent:x,popupRef:C,richText:O,comment:N?.str||null,creationDate:j,modificationDate:B}}const l=await super.deserialize(t,i,s),{rect:u,bitmap:d,bitmapUrl:p,bitmapId:g,isSvg:y,accessibilityData:b}=t;o?(s.addMissingCanvas(t.id,l),l.#o=!0):g&&s.imageManager.isValidId(g)?(l.#e=g,d&&(l.#t=d)):l.#i=p,l.#l=y;const[A,E]=l.pageDimensions;return l.width=(u[2]-u[0])/A,l.height=(u[3]-u[1])/E,b&&(l.altTextData=b),l._initialData=r,t.comment&&l.setCommentData(t),l.#d=!!r,l}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||=new Map;const l=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(this.#e))i.stamps.set(this.#e,{area:l,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const u=i.stamps.get(this.#e);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#v(t){const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===i,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Ui{#t;#e=!1;#n=null;#i=null;#r=null;#s=new Map;#a=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#p=-1;#u;static _initialized=!1;static#g=new Map([Ae,pd,xw,ce,ji].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:s,structTreeLayer:r,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:d,viewport:p,l10n:g}){const y=[...Ui.#g.values()];if(!Ui._initialized){Ui._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=i,this.div=s,this.#t=o,this.#n=l,this.viewport=p,this.#h=d,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===bt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case bt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case bt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case bt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;if(i.toggle("nonEditing",!1),t===bt.POPUP)i.toggle("commentEditing",!0);else{i.toggle("commentEditing",!1);for(const s of Ui.#g.values())i.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}get#y(){return this.#s.size!==0?this.#s.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#y)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const i=this.#n;if(i)for(const s of i.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const s=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",r=>{const{clientX:l,clientY:u,timeStamp:d}=r,p=this.#p;if(d-p>500){this.#p=d;return}this.#p=-1;const{classList:g}=this.div;g.toggle("getElements",!0);const y=document.elementsFromPoint(l,u);if(g.toggle("getElements",!1),!this.div.contains(y[0]))return;let b;const A=new RegExp(`^${Nr}[0-9]+$`);for(const S of y)if(A.test(S.id)){b=S.id;break}if(!b)return;const E=this.#s.get(b);E?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),E.dblclick(r))},{signal:s,capture:!0})}const t=this.#n;if(t){const s=new Map,r=new Map;for(const l of this.#y){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(t);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else r.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=t.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(this.#u.isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let d=r.get(u);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=s.get(u),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of Ui.#g.values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:i}=t;if(i===this.#h.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#h.div.contains(i)){const{isMac:s}=Ee.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),ce.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:i}=t;i&&this.#u.isDeletedAnnotationElement(i)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),ut.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:i,undo:s,mustExec:!1})}getEditorByUID(t){for(const i of this.#s.values())if(i.uid===t)return i;return null}getNextId(){return this.#u.getId()}get#b(){return Ui.#g.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#T(t){const i=this.#b;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,i){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:r}=this.#w(),o=this.getNextId(),l=this.#T({parent:this,id:o,x:s,y:r,uiManager:this.#u,isCentered:!0,...i});l&&this.add(l)}async deserialize(t){return await Ui.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,i,s={}){const r=this.getNextId(),o=this.#T({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:i,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#w(){const{x:t,y:i,width:s,height:r}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,i),u=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,i+r),p=(o+u)/2-t,g=(l+d)/2-i,[y,b]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#w(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:i}=Ee.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div||!this.#a||(this.#a=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===bt.STAMP||s===bt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===bt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:i}=Ee.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#a=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const i=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:i}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&(this.#d=i);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,i,s){const r=this.#u.findParent(i,s);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,In(this.div,t);for(const i of this.#u.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const i=this.viewport.rotation,s=t.rotation;if(this.viewport=t,In(this.div,{rotation:s}),i!==s)for(const r of this.#s.values())r.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#u.viewParameters.realScale}}class Se{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const i of this.#e.values())i.remove(),t.append(i);this.#t=t}}static get _svgFactory(){return wt(this,"_svgFactory",new jr)}static#r(t,[i,s,r,o]){const{style:l}=t;l.top=`${100*s}%`,l.left=`${100*i}%`,l.width=`${100*r}%`,l.height=`${100*o}%`}#s(){const t=Se._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,i){const s=Se._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${i}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Se._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${i}`),o.classList.add("clip"),r}#o(t,i){for(const[s,r]of Object.entries(i))r===null?t.removeAttribute(s):t.setAttribute(s,r)}draw(t,i=!1,s=!1){const r=Se.#i++,o=this.#s(),l=Se._svgFactory.createElement("defs");o.append(l);const u=Se._svgFactory.createElement("path");l.append(u);const d=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),i&&this.#n.set(r,u);const p=s?this.#a(l,d):null,g=Se._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(r,o),{id:r,clipPathId:`url(#${p})`}}drawOutline(t,i){const s=Se.#i++,r=this.#s(),o=Se._svgFactory.createElement("defs");r.append(o);const l=Se._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(i){const y=Se._svgFactory.createElement("mask");o.append(y),d=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const b=Se._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=Se._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const p=Se._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${u}`),d&&p.setAttribute("mask",`url(#${d})`);const g=p.cloneNode();return r.append(g),p.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(s,r),s}finalizeDraw(t,i){this.#n.delete(t),this.updateProperties(t,i)}updateProperties(t,i){if(!i)return;const{root:s,bbox:r,rootClass:o,path:l}=i,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#o(u,s),r&&Se.#r(u,r),o){const{classList:d}=u;for(const[p,g]of Object.entries(o))d.toggle(p,g)}if(l){const p=u.firstChild.firstChild;this.#o(p,l)}}}updateParent(t,i){if(i===this)return;const s=this.#e.get(t);s&&(i.#t.append(s),this.#e.delete(t),i.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:jh};globalThis.pdfjsLib={AbortException:hn,AnnotationEditorLayer:Ui,AnnotationEditorParamsType:Rt,AnnotationEditorType:bt,AnnotationEditorUIManager:dn,AnnotationLayer:fd,AnnotationMode:Hi,AnnotationType:le,applyOpacity:Vy,build:ub,ColorPicker:ri,createValidAbsoluteUrl:Kh,CSSConstants:Gy,DOMSVGFactory:jr,DrawLayer:Se,FeatureTest:Ee,fetchData:Ea,findContrastColor:qy,getDocument:od,getFilenameFromUrl:Uy,getPdfFilenameFromUrl:Hy,getRGB:wa,getUuid:Qh,getXfaPageViewport:Iy,GlobalWorkerOptions:Hn,ImageKind:Dr,InvalidPDFException:Nl,isDataScheme:qr,isPdfFile:Gl,isValidExplicitDest:Ky,MathClamp:Le,noContextMenu:li,normalizeUnicode:jy,OPS:ya,OutputScale:Mi,PasswordResponses:Py,PDFDataRangeTransport:cd,PDFDateString:kl,PDFWorker:ba,PermissionFlag:By,PixelsPerInch:ms,RenderingCancelledException:Il,renderRichText:td,ResponseException:kr,setLayerDimensions:In,shadow:wt,SignatureExtractor:us,stopEvent:ee,SupportedImageMimeTypes:Bl,TextLayer:Pr,TouchManager:Yr,updateUrlHash:Wh,Util:it,VerbosityLevel:Ir,version:ud,XfaLayer:Jh};const Cw=Object.freeze(Object.defineProperty({__proto__:null,AbortException:hn,AnnotationEditorLayer:Ui,AnnotationEditorParamsType:Rt,AnnotationEditorType:bt,AnnotationEditorUIManager:dn,AnnotationLayer:fd,AnnotationMode:Hi,AnnotationType:le,CSSConstants:Gy,ColorPicker:ri,DOMSVGFactory:jr,DrawLayer:Se,FeatureTest:Ee,GlobalWorkerOptions:Hn,ImageKind:Dr,InvalidPDFException:Nl,MathClamp:Le,OPS:ya,OutputScale:Mi,PDFDataRangeTransport:cd,PDFDateString:kl,PDFWorker:ba,PasswordResponses:Py,PermissionFlag:By,PixelsPerInch:ms,RenderingCancelledException:Il,ResponseException:kr,SignatureExtractor:us,SupportedImageMimeTypes:Bl,TextLayer:Pr,TouchManager:Yr,Util:it,VerbosityLevel:Ir,XfaLayer:Jh,applyOpacity:Vy,build:ub,createValidAbsoluteUrl:Kh,fetchData:Ea,findContrastColor:qy,getDocument:od,getFilenameFromUrl:Uy,getPdfFilenameFromUrl:Hy,getRGB:wa,getUuid:Qh,getXfaPageViewport:Iy,isDataScheme:qr,isPdfFile:Gl,isValidExplicitDest:Ky,noContextMenu:li,normalizeUnicode:jy,renderRichText:td,setLayerDimensions:In,shadow:wt,stopEvent:ee,updateUrlHash:Wh,version:ud},Symbol.toStringTag,{value:"Module"}));function vb(h){var t,i,s="";if(typeof h=="string"||typeof h=="number")s+=h;else if(typeof h=="object")if(Array.isArray(h)){var r=h.length;for(t=0;t<r;t++)h[t]&&(i=vb(h[t]))&&(s&&(s+=" "),s+=i)}else for(i in h)h[i]&&(s&&(s+=" "),s+=i);return s}function Xl(){for(var h,t,i=0,s="",r=arguments.length;i<r;i++)(h=arguments[i])&&(t=vb(h))&&(s&&(s+=" "),s+=t);return s}var ay=Object.prototype.hasOwnProperty;function ry(h,t,i){for(i of h.keys())if(pa(i,t))return i}function pa(h,t){var i,s,r;if(h===t)return!0;if(h&&t&&(i=h.constructor)===t.constructor){if(i===Date)return h.getTime()===t.getTime();if(i===RegExp)return h.toString()===t.toString();if(i===Array){if((s=h.length)===t.length)for(;s--&&pa(h[s],t[s]););return s===-1}if(i===Set){if(h.size!==t.size)return!1;for(s of h)if(r=s,r&&typeof r=="object"&&(r=ry(t,r),!r)||!t.has(r))return!1;return!0}if(i===Map){if(h.size!==t.size)return!1;for(s of h)if(r=s[0],r&&typeof r=="object"&&(r=ry(t,r),!r)||!pa(s[1],t.get(r)))return!1;return!0}if(i===ArrayBuffer)h=new Uint8Array(h),t=new Uint8Array(t);else if(i===DataView){if((s=h.byteLength)===t.byteLength)for(;s--&&h.getInt8(s)===t.getInt8(s););return s===-1}if(ArrayBuffer.isView(h)){if((s=h.byteLength)===t.byteLength)for(;s--&&h[s]===t[s];);return s===-1}if(!i||typeof h=="object"){s=0;for(i in h)if(ay.call(h,i)&&++s&&!ay.call(t,i)||!(i in t)||!pa(h[i],t[i]))return!1;return Object.keys(t).length===s}}return h!==h&&t!==t}function Wr(h){let t=!1;return{promise:new Promise((s,r)=>{h.then(o=>!t&&s(o)).catch(o=>!t&&r(o))}),cancel(){t=!0}}}const Rw=["onCopy","onCut","onPaste"],Mw=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Dw=["onFocus","onBlur"],Lw=["onInput","onInvalid","onReset","onSubmit"],Ow=["onLoad","onError"],Nw=["onKeyDown","onKeyPress","onKeyUp"],kw=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],Bw=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Pw=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],zw=["onSelect"],jw=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Fw=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Uw=["onScroll"],Hw=["onWheel"],Iw=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Gw=["onTransitionEnd"],Vw=["onToggle"],qw=["onChange"],Xw=[...Rw,...Mw,...Dw,...Lw,...Ow,...Nw,...kw,...Bw,...Pw,...zw,...jw,...Fw,...Uw,...Hw,...Iw,...Gw,...qw,...Vw];function Ab(h,t){const i={};for(const s of Xw){const r=h[s];r&&(t?i[s]=(o=>r(o,t(s))):i[s]=r)}return i}var Yw="Invariant failed";function Xt(h,t){if(!h)throw new Error(Yw)}var Rh,oy;function $w(){if(oy)return Rh;oy=1;var h=function(){};return Rh=h,Rh}var Kw=$w();const Oe=K0(Kw),Sb=P.createContext(null),Ww="noopener noreferrer nofollow";class Qw{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Xt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Xt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,i,s){t.href=i,t.rel=this.externalLinkRel||Ww,t.target=s?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(i=>{Xt(this.pdfDocument),Xt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(i):Array.isArray(t)?i(t):t.then(i)}).then(i=>{Xt(Array.isArray(i));const s=i[0];new Promise(r=>{Xt(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(o=>{r(o)}).catch(()=>{Xt(!1)}):typeof s=="number"?r(s):Xt(!1)}).then(r=>{const o=r+1;Xt(this.pdfViewer),Xt(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:i,pageIndex:r,pageNumber:o})})})}goToPage(t){const i=t-1;Xt(this.pdfViewer),Xt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:i,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function ga({children:h,type:t}){return R.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:h})}const ly={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function Zw(h,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return h}}function va(){return P.useReducer(Zw,{value:void 0,error:void 0})}const Yl=typeof window<"u",Eb=Yl&&window.location.protocol==="file:";function Jw(h){return typeof h<"u"}function cs(h){return Jw(h)&&h!==null}function t1(h){return typeof h=="string"}function e1(h){return h instanceof ArrayBuffer}function i1(h){return Xt(Yl),h instanceof Blob}function Hh(h){return t1(h)&&/^data:/.test(h)}function cy(h){Xt(Hh(h));const[t="",i=""]=h.split(",");return t.split(";").indexOf("base64")!==-1?atob(i):unescape(i)}function n1(){return Yl&&window.devicePixelRatio||1}const wb="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function uy(){Oe(!Eb,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${wb}`)}function s1(){Oe(!Eb,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${wb}`)}function bs(h){h?.cancel&&h.cancel()}function Ih(h,t){return Object.defineProperty(h,"width",{get(){return this.getViewport({scale:t}).width},configurable:!0}),Object.defineProperty(h,"height",{get(){return this.getViewport({scale:t}).height},configurable:!0}),Object.defineProperty(h,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(h,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),h}function _b(h){return h.name==="AbortException"||h.name==="RenderingCancelledException"}function a1(h){return new Promise((t,i)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return i(new Error("Error while reading a file."));t(s.result)},s.onerror=r=>{if(!r.target)return i(new Error("Error while reading a file."));const{error:o}=r.target;if(!o)return i(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return i(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return i(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return i(new Error("Error while reading a file: Aborted."));default:return i(new Error("Error while reading a file."))}},s.readAsArrayBuffer(h)})}const{PDFDataRangeTransport:r1}=Cw,o1=(h,t)=>{switch(t){case ly.NEED_PASSWORD:{const i=prompt("Enter the password to open this PDF file.");h(i);break}case ly.INCORRECT_PASSWORD:{const i=prompt("Invalid password. Please try again.");h(i);break}}};function hy(h){return typeof h=="object"&&h!==null&&("data"in h||"range"in h||"url"in h)}const l1=P.forwardRef(function({children:t,className:i,error:s="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:o,file:l,inputRef:u,imageResourcesPath:d,loading:p="Loading PDF",noData:g="No PDF file specified.",onItemClick:y,onLoadError:b,onLoadProgress:A,onLoadSuccess:E,onPassword:S=o1,onSourceError:T,onSourceSuccess:w,options:x,renderMode:C,rotate:O,scale:N,...j},B){const[V,Y]=va(),{value:Q,error:J}=V,[ot,ft]=va(),{value:st,error:mt}=ot,k=P.useRef(new Qw),G=P.useRef([]),Z=P.useRef(void 0),ht=P.useRef(void 0);l&&l!==Z.current&&hy(l)&&(Oe(!pa(l,Z.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Z.current=l),x&&x!==ht.current&&(Oe(!pa(x,ht.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ht.current=x);const At=P.useRef({scrollPageIntoView:Vt=>{const{dest:Lt,pageNumber:$t,pageIndex:ye=$t-1}=Vt;if(y){y({dest:Lt,pageIndex:ye,pageNumber:$t});return}const ue=G.current[ye];if(ue){ue.scrollIntoView();return}Oe(!1,`An internal link leading to page ${$t} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});P.useImperativeHandle(B,()=>({linkService:k,pages:G,viewer:At}),[]);function D(){w&&w()}function q(){J&&(Oe(!1,J.toString()),T&&T(J))}function W(){Y({type:"RESET"})}P.useEffect(W,[l,Y]);const tt=P.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return Hh(l)?{data:cy(l)}:(uy(),{url:l});if(l instanceof r1)return{range:l};if(e1(l))return{data:l};if(Yl&&i1(l))return{data:await a1(l)};if(Xt(typeof l=="object"),Xt(hy(l)),"url"in l&&typeof l.url=="string"){if(Hh(l.url)){const{url:Vt,...Lt}=l;return{data:cy(Vt),...Lt}}uy()}return l},[l]);P.useEffect(()=>{const Vt=Wr(tt());return Vt.promise.then(Lt=>{Y({type:"RESOLVE",value:Lt})}).catch(Lt=>{Y({type:"REJECT",error:Lt})}),()=>{bs(Vt)}},[tt,Y]),P.useEffect(()=>{if(!(typeof Q>"u")){if(Q===!1){q();return}D()}},[Q]);function lt(){st&&(E&&E(st),G.current=new Array(st.numPages),k.current.setDocument(st))}function dt(){mt&&(Oe(!1,mt.toString()),b&&b(mt))}P.useEffect(function(){ft({type:"RESET"})},[ft,Q]),P.useEffect(function(){if(!Q)return;const Lt=x?{...Q,...x}:Q,$t=od(Lt);A&&($t.onProgress=A),S&&($t.onPassword=S);const ye=$t;return ye.promise.then(ue=>{ye.destroyed||ft({type:"RESOLVE",value:ue})}).catch(ue=>{ye.destroyed||ft({type:"REJECT",error:ue})}),()=>{ye.destroy()}},[x,ft,Q]),P.useEffect(()=>{if(!(typeof st>"u")){if(st===!1){dt();return}lt()}},[st]),P.useEffect(function(){k.current.setViewer(At.current),k.current.setExternalLinkRel(r),k.current.setExternalLinkTarget(o)},[r,o]);const rt=P.useCallback((Vt,Lt)=>{G.current[Vt]=Lt},[]),Gt=P.useCallback(Vt=>{delete G.current[Vt]},[]),Ot=P.useMemo(()=>({imageResourcesPath:d,linkService:k.current,onItemClick:y,pdf:st,registerPage:rt,renderMode:C,rotate:O,scale:N,unregisterPage:Gt}),[d,y,st,rt,C,O,N,Gt]),Ne=P.useMemo(()=>Ab(j,()=>st),[j,st]);function Pt(){function Vt($t){return!!$t?.pdf}if(!Vt(Ot))throw new Error("pdf is undefined");const Lt=typeof t=="function"?t(Ot):t;return R.jsx(Sb.Provider,{value:Ot,children:Lt})}function $e(){return l?st==null?R.jsx(ga,{type:"loading",children:typeof p=="function"?p():p}):st===!1?R.jsx(ga,{type:"error",children:typeof s=="function"?s():s}):Pt():R.jsx(ga,{type:"no-data",children:typeof g=="function"?g():g})}return R.jsx("div",{className:Xl("react-pdf__Document",i),ref:u,...Ne,children:$e()})});function Tb(){return P.useContext(Sb)}function xb(){for(var h=[],t=0;t<arguments.length;t++)h[t]=arguments[t];var i=h.filter(Boolean);if(i.length<=1){var s=i[0];return s||null}return function(o){for(var l=0,u=i;l<u.length;l++){var d=u[l];typeof d=="function"?d(o):d&&(d.current=o)}}}const Cb=P.createContext(null);function $l(){return P.useContext(Cb)}function c1(){const h=Tb(),t=$l();Xt(t);const i={...h,...t},{filterAnnotations:s,imageResourcesPath:r,linkService:o,onGetAnnotationsError:l,onGetAnnotationsSuccess:u,onRenderAnnotationLayerError:d,onRenderAnnotationLayerSuccess:p,page:g,pdf:y,renderForms:b,rotate:A,scale:E=1}=i;Xt(y),Xt(g),Xt(o);const[S,T]=va(),{value:w,error:x}=S,C=P.useRef(null);Oe(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function O(){w&&u&&u(w)}function N(){x&&(Oe(!1,x.toString()),l&&l(x))}P.useEffect(function(){T({type:"RESET"})},[T,g]),P.useEffect(function(){if(!g)return;const Q=Wr(g.getAnnotations()),J=Q;return Q.promise.then(ot=>{T({type:"RESOLVE",value:ot})}).catch(ot=>{T({type:"REJECT",error:ot})}),()=>{bs(J)}},[T,g]),P.useEffect(()=>{if(w!==void 0){if(w===!1){N();return}O()}},[w]);function j(){p&&p()}function B(Y){Oe(!1,`${Y}`),d&&d(Y)}const V=P.useMemo(()=>g.getViewport({scale:E,rotation:A}),[g,A,E]);return P.useEffect(function(){if(!y||!g||!o||!w)return;const{current:Q}=C;if(!Q)return;const J=V.clone({dontFlip:!0}),ot={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:y.annotationStorage,commentManager:null,div:Q,l10n:null,linkService:o,page:g,structTreeLayer:null,viewport:J},ft={annotations:s?s({annotations:w}):w,annotationStorage:y.annotationStorage,div:Q,imageResourcesPath:r,linkService:o,page:g,renderForms:b,viewport:J};Q.innerHTML="";try{new fd(ot).render(ft),j()}catch(st){B(st)}return()=>{}},[w,s,r,o,g,y,b,V]),R.jsx("div",{className:Xl("react-pdf__Page__annotations","annotationLayer"),ref:C})}const Rb={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},u1=/^H(\d+)$/;function h1(h){return h in Rb}function Kl(h){return"children"in h}function Mb(h){return Kl(h)?h.children.length===1&&0 in h.children&&"id"in h.children[0]:!1}function d1(h){const t={};if(Kl(h)){const{role:i}=h,s=i.match(u1);if(s)t.role="heading",t["aria-level"]=Number(s[1]);else if(h1(i)){const r=Rb[i];r&&(t.role=r)}}return t}function Db(h){const t={};if(Kl(h)){if(h.alt!==void 0&&(t["aria-label"]=h.alt),h.lang!==void 0&&(t.lang=h.lang),Mb(h)){const[i]=h.children;if(i){const s=Db(i);return{...t,...s}}}}else"id"in h&&(t["aria-owns"]=h.id);return t}function f1(h){return h?{...d1(h),...Db(h)}:null}function Lb({className:h,node:t}){const i=P.useMemo(()=>f1(t),[t]),s=P.useMemo(()=>!Kl(t)||Mb(t)?null:t.children.map((r,o)=>R.jsx(Lb,{node:r},o)),[t]);return R.jsx("span",{className:h,...i,children:s})}function p1(){const h=$l();Xt(h);const{onGetStructTreeError:t,onGetStructTreeSuccess:i}=h,[s,r]=va(),{value:o,error:l}=s,{customTextRenderer:u,page:d}=h;function p(){o&&i&&i(o)}function g(){l&&(Oe(!1,l.toString()),t&&t(l))}return P.useEffect(function(){r({type:"RESET"})},[r,d]),P.useEffect(function(){if(u||!d)return;const b=Wr(d.getStructTree()),A=b;return b.promise.then(E=>{r({type:"RESOLVE",value:E})}).catch(E=>{r({type:"REJECT",error:E})}),()=>bs(A)},[u,d,r]),P.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}p()}},[o]),o?R.jsx(Lb,{className:"react-pdf__Page__structTree structTree",node:o}):null}const dy=Hi;function g1(h){const t=$l();Xt(t);const i={...t,...h},{_className:s,canvasBackground:r,devicePixelRatio:o=n1(),onRenderError:l,onRenderSuccess:u,page:d,renderForms:p,renderTextLayer:g,rotate:y,scale:b}=i,{canvasRef:A}=h;Xt(d);const E=P.useRef(null);function S(){d&&u&&u(Ih(d,b))}function T(O){_b(O)||(Oe(!1,O.toString()),l&&l(O))}const w=P.useMemo(()=>d.getViewport({scale:b*o,rotation:y}),[o,d,y,b]),x=P.useMemo(()=>d.getViewport({scale:b,rotation:y}),[d,y,b]);P.useEffect(function(){if(!d)return;d.cleanup();const{current:N}=E;if(!N)return;N.width=w.width,N.height=w.height,N.style.width=`${Math.floor(x.width)}px`,N.style.height=`${Math.floor(x.height)}px`,N.style.visibility="hidden";const j={annotationMode:p?dy.ENABLE_FORMS:dy.ENABLE,canvas:N,canvasContext:N.getContext("2d",{alpha:!1}),viewport:w};r&&(j.background=r);const B=d.render(j),V=B;return B.promise.then(()=>{N.style.visibility="",S()}).catch(T),()=>bs(V)},[r,d,p,w,x]);const C=P.useCallback(()=>{const{current:O}=E;O&&(O.width=0,O.height=0)},[]);return P.useEffect(()=>C,[C]),R.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:xb(A,E),style:{display:"block",userSelect:"none"},children:g?R.jsx(p1,{}):null})}function m1(h){return"str"in h}function y1(){const h=$l();Xt(h);const{customTextRenderer:t,onGetTextError:i,onGetTextSuccess:s,onRenderTextLayerError:r,onRenderTextLayerSuccess:o,page:l,pageIndex:u,pageNumber:d,rotate:p,scale:g}=h;Xt(l);const[y,b]=va(),{value:A,error:E}=y,S=P.useRef(null);Oe(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function T(){A&&s&&s(A)}function w(){E&&(Oe(!1,E.toString()),i&&i(E))}P.useEffect(function(){b({type:"RESET"})},[l,b]),P.useEffect(function(){if(!l)return;const V=Wr(l.getTextContent()),Y=V;return V.promise.then(Q=>{b({type:"RESOLVE",value:Q})}).catch(Q=>{b({type:"REJECT",error:Q})}),()=>bs(Y)},[l,b]),P.useEffect(()=>{if(A!==void 0){if(A===!1){w();return}T()}},[A]);const x=P.useCallback(()=>{o&&o()},[o]),C=P.useCallback(B=>{_b(B)||(Oe(!1,B.toString()),r&&r(B))},[r]);function O(){const B=S.current;B&&B.classList.add("selecting")}function N(){const B=S.current;B&&B.classList.remove("selecting")}const j=P.useMemo(()=>l.getViewport({scale:g,rotation:p}),[l,p,g]);return P.useLayoutEffect(function(){if(!l||!A)return;const{current:V}=S;if(!V)return;V.innerHTML="";const Y=l.streamTextContent({includeMarkedContent:!0}),Q={container:V,textContentSource:Y,viewport:j},J=new Pr(Q),ot=J;return J.render().then(()=>{const ft=document.createElement("div");ft.className="endOfContent",V.append(ft);const st=V.querySelectorAll('[role="presentation"]');if(t){let mt=0;A.items.forEach((k,G)=>{if(!m1(k))return;const Z=st[mt];if(!Z)return;const ht=t({pageIndex:u,pageNumber:d,itemIndex:G,...k});Z.innerHTML=ht,mt+=k.str&&k.hasEOL?2:1})}x()}).catch(C),()=>bs(ot)},[t,C,x,l,u,d,A,j]),R.jsx("div",{className:Xl("react-pdf__Page__textContent","textLayer"),onMouseUp:N,onMouseDown:O,ref:S})}const fy=1;function b1(h){const i={...Tb(),...h},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:o,canvasRef:l,children:u,className:d,customRenderer:p,customTextRenderer:g,devicePixelRatio:y,error:b="Failed to load the page.",filterAnnotations:A,height:E,inputRef:S,loading:T="Loading page",noData:w="No page specified.",onGetAnnotationsError:x,onGetAnnotationsSuccess:C,onGetStructTreeError:O,onGetStructTreeSuccess:N,onGetTextError:j,onGetTextSuccess:B,onLoadError:V,onLoadSuccess:Y,onRenderAnnotationLayerError:Q,onRenderAnnotationLayerSuccess:J,onRenderError:ot,onRenderSuccess:ft,onRenderTextLayerError:st,onRenderTextLayerSuccess:mt,pageIndex:k,pageNumber:G,pdf:Z,registerPage:ht,renderAnnotationLayer:At=!0,renderForms:D=!1,renderMode:q="canvas",renderTextLayer:W=!0,rotate:tt,scale:lt=fy,unregisterPage:dt,width:rt,...Gt}=i,[Ot,Ne]=va(),{value:Pt,error:$e}=Ot,Vt=P.useRef(null);Xt(Z);const Lt=cs(G)?G-1:k??null,$t=G??(cs(k)?k+1:null),ye=tt??(Pt?Pt.rotate:null),ue=P.useMemo(()=>{if(!Pt)return null;let Ke=1;const pn=lt??fy;if(rt||E){const wi=Pt.getViewport({scale:1,rotation:ye});rt?Ke=rt/wi.width:E&&(Ke=E/wi.height)}return pn*Ke},[E,Pt,ye,lt,rt]);P.useEffect(function(){return()=>{cs(Lt)&&r&&dt&&dt(Lt)}},[r,Z,Lt,dt]);function Qr(){if(Y){if(!Pt||!ue)return;Y(Ih(Pt,ue))}if(r&&ht){if(!cs(Lt)||!Vt.current)return;ht(Lt,Vt.current)}}function _a(){$e&&(Oe(!1,$e.toString()),V&&V($e))}P.useEffect(function(){Ne({type:"RESET"})},[Ne,Z,Lt]),P.useEffect(function(){if(!Z||!$t)return;const pn=Wr(Z.getPage($t)),wi=pn;return pn.promise.then(xa=>{Ne({type:"RESOLVE",value:xa})}).catch(xa=>{Ne({type:"REJECT",error:xa})}),()=>bs(wi)},[Ne,Z,$t]),P.useEffect(()=>{if(Pt!==void 0){if(Pt===!1){_a();return}Qr()}},[Pt,ue]);const Vn=P.useMemo(()=>cs(Lt)&&$t&&cs(ye)&&cs(ue)?{_className:s,canvasBackground:o,customTextRenderer:g,devicePixelRatio:y,filterAnnotations:A,onGetAnnotationsError:x,onGetAnnotationsSuccess:C,onGetStructTreeError:O,onGetStructTreeSuccess:N,onGetTextError:j,onGetTextSuccess:B,onRenderAnnotationLayerError:Q,onRenderAnnotationLayerSuccess:J,onRenderError:ot,onRenderSuccess:ft,onRenderTextLayerError:st,onRenderTextLayerSuccess:mt,page:Pt,pageIndex:Lt,pageNumber:$t,renderForms:D,renderTextLayer:W,rotate:ye,scale:ue}:null,[s,o,g,y,A,x,C,O,N,j,B,Q,J,ot,ft,st,mt,Pt,Lt,$t,D,W,ye,ue]),Ta=P.useMemo(()=>Ab(Gt,()=>Pt&&(ue?Ih(Pt,ue):void 0)),[Gt,Pt,ue]),Ss=`${Lt}@${ue}/${ye}`;function Wl(){switch(q){case"custom":return Xt(p),R.jsx(p,{},`${Ss}_custom`);case"none":return null;default:return R.jsx(g1,{canvasRef:l},`${Ss}_canvas`)}}function ke(){return W?R.jsx(y1,{},`${Ss}_text`):null}function Ql(){return At?R.jsx(c1,{},`${Ss}_annotations`):null}function Zr(){function Ke(wi){return!!wi?.page}if(!Ke(Vn))throw new Error("page is undefined");const pn=typeof u=="function"?u(Vn):u;return R.jsxs(Cb.Provider,{value:Vn,children:[Wl(),ke(),Ql(),pn]})}function Jr(){return $t?Z===null||Pt===void 0||Pt===null?R.jsx(ga,{type:"loading",children:typeof T=="function"?T():T}):Z===!1||Pt===!1?R.jsx(ga,{type:"error",children:typeof b=="function"?b():b}):Zr():R.jsx(ga,{type:"no-data",children:typeof w=="function"?w():w})}return R.jsx("div",{className:Xl(s,d),"data-page-number":$t,ref:xb(S,Vt),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${ue}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Ta,children:Jr()})}s1();Hn.workerSrc="pdf.worker.mjs";const py="/portfolio.github.io/assets/resume-CbIGcR6X.pdf";Hn.workerSrc=`//unpkg.com/pdfjs-dist@${ud}/build/pdf.worker.min.mjs`;function v1(){const[h,t]=P.useState(null),[i,s]=P.useState(1),[r,o]=P.useState(window.innerWidth);P.useEffect(()=>{const u=()=>o(window.innerWidth);return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);function l({numPages:u}){t(u)}return R.jsxs("div",{className:"resume-container",children:[R.jsxs("div",{className:"resume-header-row",children:[R.jsx("h2",{className:"resume-header",children:"My Resume"}),R.jsx("a",{href:py,download:!0,className:"download-btn",children:R.jsx("span",{children:"Download PDF"})})]}),R.jsx("div",{className:"pdf-container",children:R.jsx(l1,{file:py,onLoadSuccess:l,onLoadError:u=>console.error("Error loading PDF:",u),loading:R.jsx("div",{style:{color:"white"},children:"Loading PDF..."}),error:R.jsxs("div",{style:{color:"white",padding:"20px",textAlign:"center"},children:[R.jsx("p",{children:"Failed to load PDF."}),R.jsxs("p",{style:{fontSize:"0.8em"},children:["Please ensure ",R.jsx("b",{children:"src/assets/resume.pdf"})," exists and is a valid PDF file."]})]}),children:h&&Array.from(new Array(h),(u,d)=>R.jsx(b1,{pageNumber:d+1,width:r>900?900:r-40,renderTextLayer:!1,renderAnnotationLayer:!0,className:"pdf-page",style:{marginBottom:d<h-1?"10px":"0"}},`page_${d+1}`))})})]})}function A1(){const[h,t]=P.useState(!1);P.useEffect(()=>{localStorage.getItem("lightMode")==="enabled"&&t(!0)},[]),P.useEffect(()=>{h?(document.body.classList.add("lightmode"),localStorage.setItem("lightMode","enabled")):(document.body.classList.remove("lightmode"),localStorage.setItem("lightMode","null"))},[h]);const i=()=>t(!h);return R.jsxs(R.Fragment,{children:[R.jsx(zS,{lightMode:h,toggleTheme:i}),R.jsxs(nS,{children:[R.jsx(xr,{path:"/",element:R.jsx(jS,{})}),R.jsx(xr,{path:"/work",element:R.jsx(FS,{})}),R.jsx(xr,{path:"/contact",element:R.jsx(US,{})}),R.jsx(xr,{path:"/resume",element:R.jsx(v1,{})})]})]})}function S1(){return R.jsx(CS,{basename:"/portfolio.github.io/",children:R.jsx(A1,{})})}aA.createRoot(document.getElementById("root")).render(R.jsx(P.StrictMode,{children:R.jsx(S1,{})}));
